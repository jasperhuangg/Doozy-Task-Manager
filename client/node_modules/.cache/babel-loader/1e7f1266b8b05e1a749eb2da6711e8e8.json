{"ast":null,"code":"var _jsxFileName = \"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/todolist/Login.js\";\nimport React, { Component } from \"react\";\nimport \"./Login-Register.css\";\nimport { GoogleLogin } from \"react-google-login\";\nimport \"./GoogleButton.css\";\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleGoogleOAuth = response => {\n      const username = response.profileObj.email;\n      const firstName = response.profileObj.givenName;\n      const lastName = response.profileObj.lastName;\n      const password = this.hashGoogleInfo(response);\n      const domain = \"http://localhost:9000\";\n      const url = domain + \"/accountExists\";\n      const body = JSON.stringify({\n        username: username\n      });\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: body\n      }).then(res => res.json()).then(res => {\n        if (res) this.props.verifyLogin(username, password, \"Google\");else this.props.createAccount(username, firstName, lastName, password, \"Google\");\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      usernameEntered: false,\n      nextClicked: false\n    };\n    this.passwordInput = React.createRef();\n    this.inputRef = React.createRef();\n  }\n\n  componentDidUpdate() {\n    if (this.state.usernameEntered === false && this.state.email !== \"\") this.setState({\n      usernameEntered: true\n    });\n  }\n\n  handleEmailInput(e) {\n    var entered = e.target.value === \"\";\n    this.setState({\n      email: e.target.value,\n      usernameEntered: !entered\n    });\n  }\n\n  handleEmailEnter(e) {\n    if (this.state.usernameEntered && (e.keyCode === 13 || e.keyCode === 9)) {\n      e.preventDefault();\n      this.setState({\n        nextClicked: true\n      });\n      this.passwordInput.current.focus();\n    }\n  }\n\n  handlePasswordEnter(e) {\n    if (this.state.nextClicked && e.keyCode === 13 && e.target.value !== \"\") {\n      e.preventDefault();\n      this.props.verifyLogin(this.state.email, this.state.password, \"Conventional\"); // this.setState({ usernameEntered: false, nextClicked: false });\n    }\n  }\n\n  handlePasswordInput(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleLoginBtnClick(e) {\n    e.preventDefault();\n    if (!this.state.nextClicked) this.setState({\n      nextClicked: true\n    });else {\n      this.props.verifyLogin(this.state.email, this.state.password, \"Conventional\");\n    }\n  }\n\n  reverseStr(str) {\n    if (str === \"\" || str === undefined || str === null) return \"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";\n    return str.split(\"\").reverse().join(\"\");\n  }\n\n  hashGoogleInfo(responseObj) {\n    const profileObj = responseObj.profileObj;\n    const firstName = this.reverseStr(profileObj.givenName);\n    const lastName = this.reverseStr(profileObj.familyName);\n    const googleId = this.reverseStr(profileObj.googleId);\n    const email = this.reverseStr(profileObj.email);\n    const rand1 = \"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";\n    const rand2 = \"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";\n    const rand3 = \"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";\n    const rand4 = \"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";\n    const rand5 = \"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";\n    return rand1 + firstName + rand2 + lastName + rand3 + googleId + rand4 + email + rand5;\n  }\n\n  render() {\n    const sentBack = this.props.loginInfo !== \"not yet\";\n\n    if (this.state.nextClicked && !sentBack) {\n      this.passwordInput.current.focus();\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Login py-5 px-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        width: \"408px\",\n        height: \"170px\"\n      },\n      src: \"https://iili.io/JQPxMQ.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"text-left\",\n      style: {\n        fontWeight: \"600\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, \"Log in to your account\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"google-btn\",\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"google-icon-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"google-icon\",\n      alt: \"\",\n      src: \"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"google-button-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(GoogleLogin, {\n      clientId: \"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\",\n      render: renderProps => /*#__PURE__*/React.createElement(\"a\", {\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        className: \"btn-text no-bg-no-borders text-white text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, \"Log in with Google\"),\n      buttonText: \"Log in with Google\",\n      onSuccess: this.handleGoogleOAuth,\n      onFailure: response => {\n        alert(\"Google OAuth Failed.\\n\" + JSON.stringify(response));\n      },\n      cookiePolicy: \"single_host_origin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"or-separator my-2 w-100 text-center font-grey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"px-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, \"or\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"font-small-login-reg text-danger\" + (this.props.loginInfo === \"not yet\" ? \" d-none\" : \"\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, this.props.loginInfo === \"auth type\" ? \"Please log in using the method you created your account.\" : \"Please provide a valid username and password.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"font-grey font-small-login-reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"login-email-input\",\n      style: {\n        fontWeight: \"500\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, \"Email Address\", \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group input-group-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control form-control-sm\" + (this.state.usernameEntered ? \" input-validated\" : \"\") + (sentBack && this.props.loginInfo === \"username does not exist\" ? \" border-danger\" : \"\"),\n      id: \"login-email-input\",\n      \"aria-describedby\": \"emailHelp\",\n      onChange: e => this.handleEmailInput(e),\n      onKeyDown: e => this.handleEmailEnter(e),\n      disabled: this.state.nextClicked && this.props.loginInfo !== \"username does not exist\",\n      ref: this.inputRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\" + (this.state.nextClicked && this.props.loginInfo !== \"username does not exist\" ? \"\" : \" d-none\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text email-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\" + (this.state.nextClicked ? \"\" : \" d-none\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"login-password-input\",\n      style: {\n        fontWeight: \"500\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control form-control-sm\" + (sentBack ? \" border-danger\" : \"\"),\n      id: \"login-password-input\",\n      onChange: e => this.handlePasswordInput(e),\n      ref: this.passwordInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary px-4 font-small-login-reg\",\n      type: this.state.nextClicked ? \"submit\" : \"button\",\n      disabled: !this.state.usernameEntered || this.inputRef.current.value === \"\",\n      onClick: e => this.handleLoginBtnClick(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }\n    }, this.state.nextClicked ? \"Log In\" : \"Next\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ml-3 font-small-login-reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }\n    }, \"Don't have an account?\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => {\n        this.props.switchToRegister();\n      },\n      className: \"text-primary toggle-prompt-text\",\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    }, \"Sign Up\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/todolist/Login.js"],"names":["React","Component","GoogleLogin","Login","constructor","props","handleGoogleOAuth","response","username","profileObj","email","firstName","givenName","lastName","password","hashGoogleInfo","domain","url","body","JSON","stringify","fetch","method","headers","then","res","json","verifyLogin","createAccount","state","usernameEntered","nextClicked","passwordInput","createRef","inputRef","componentDidUpdate","setState","handleEmailInput","e","entered","target","value","handleEmailEnter","keyCode","preventDefault","current","focus","handlePasswordEnter","handlePasswordInput","handleLoginBtnClick","reverseStr","str","undefined","split","reverse","join","responseObj","familyName","googleId","rand1","rand2","rand3","rand4","rand5","render","sentBack","loginInfo","width","height","fontWeight","cursor","renderProps","onClick","disabled","alert","switchToRegister"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Login-Register.css\";\nimport { GoogleLogin } from \"react-google-login\";\nimport \"./GoogleButton.css\";\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      usernameEntered: false,\n      nextClicked: false,\n    };\n    this.passwordInput = React.createRef();\n    this.inputRef = React.createRef();\n  }\n\n  componentDidUpdate() {\n    if (this.state.usernameEntered === false && this.state.email !== \"\")\n      this.setState({ usernameEntered: true });\n  }\n\n  handleEmailInput(e) {\n    var entered = e.target.value === \"\";\n\n    this.setState({\n      email: e.target.value,\n      usernameEntered: !entered,\n    });\n  }\n\n  handleEmailEnter(e) {\n    if (this.state.usernameEntered && (e.keyCode === 13 || e.keyCode === 9)) {\n      e.preventDefault();\n      this.setState({ nextClicked: true });\n      this.passwordInput.current.focus();\n    }\n  }\n\n  handlePasswordEnter(e) {\n    if (this.state.nextClicked && e.keyCode === 13 && e.target.value !== \"\") {\n      e.preventDefault();\n      this.props.verifyLogin(\n        this.state.email,\n        this.state.password,\n        \"Conventional\"\n      );\n      // this.setState({ usernameEntered: false, nextClicked: false });\n    }\n  }\n\n  handlePasswordInput(e) {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleLoginBtnClick(e) {\n    e.preventDefault();\n    if (!this.state.nextClicked) this.setState({ nextClicked: true });\n    else {\n      this.props.verifyLogin(\n        this.state.email,\n        this.state.password,\n        \"Conventional\"\n      );\n    }\n  }\n\n  reverseStr(str) {\n    if (str === \"\" || str === undefined || str === null)\n      return \"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";\n    return str.split(\"\").reverse().join(\"\");\n  }\n\n  hashGoogleInfo(responseObj) {\n    const profileObj = responseObj.profileObj;\n\n    const firstName = this.reverseStr(profileObj.givenName);\n    const lastName = this.reverseStr(profileObj.familyName);\n    const googleId = this.reverseStr(profileObj.googleId);\n    const email = this.reverseStr(profileObj.email);\n\n    const rand1 =\n      \"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";\n    const rand2 =\n      \"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";\n    const rand3 =\n      \"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";\n    const rand4 =\n      \"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";\n    const rand5 =\n      \"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";\n\n    return (\n      rand1 +\n      firstName +\n      rand2 +\n      lastName +\n      rand3 +\n      googleId +\n      rand4 +\n      email +\n      rand5\n    );\n  }\n\n  handleGoogleOAuth = (response) => {\n    const username = response.profileObj.email;\n    const firstName = response.profileObj.givenName;\n    const lastName = response.profileObj.lastName;\n    const password = this.hashGoogleInfo(response);\n    const domain = \"http://localhost:9000\";\n    const url = domain + \"/accountExists\";\n    const body = JSON.stringify({\n      username: username,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res) this.props.verifyLogin(username, password, \"Google\");\n        else\n          this.props.createAccount(\n            username,\n            firstName,\n            lastName,\n            password,\n            \"Google\"\n          );\n      });\n  };\n\n  render() {\n    const sentBack = this.props.loginInfo !== \"not yet\";\n\n    if (this.state.nextClicked && !sentBack) {\n      this.passwordInput.current.focus();\n    }\n\n    return (\n      <div className=\"Login py-5 px-4\">\n        <img\n          style={{ width: \"408px\", height: \"170px\" }}\n          src=\"https://iili.io/JQPxMQ.png\"\n        />\n        <br />\n        <br />\n        <h5 className=\"text-left\" style={{ fontWeight: \"600\" }}>\n          Log in to your account\n        </h5>\n        <br />\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"google-btn\" style={{ cursor: \"pointer\" }}>\n            <div className=\"google-icon-wrapper\">\n              <img\n                className=\"google-icon\"\n                alt=\"\"\n                src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"\n              />\n            </div>\n            <div className=\"google-button-text\">\n              <GoogleLogin\n                clientId=\"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\"\n                render={(renderProps) => (\n                  <a\n                    onClick={renderProps.onClick}\n                    disabled={renderProps.disabled}\n                    className=\"btn-text no-bg-no-borders text-white text-center\"\n                  >\n                    Log in with Google\n                  </a>\n                )}\n                buttonText=\"Log in with Google\"\n                onSuccess={this.handleGoogleOAuth}\n                onFailure={(response) => {\n                  alert(\"Google OAuth Failed.\\n\" + JSON.stringify(response));\n                }}\n                cookiePolicy={\"single_host_origin\"}\n              />\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"or-separator my-2 w-100 text-center font-grey\">\n          <span className=\"px-1\">or</span>\n        </div>\n        <div\n          className={\n            \"font-small-login-reg text-danger\" +\n            (this.props.loginInfo === \"not yet\" ? \" d-none\" : \"\")\n          }\n        >\n          {this.props.loginInfo === \"auth type\"\n            ? \"Please log in using the method you created your account.\"\n            : \"Please provide a valid username and password.\"}\n        </div>\n        <br />\n        <form className=\"font-grey font-small-login-reg\">\n          <label htmlFor=\"login-email-input\" style={{ fontWeight: \"500\" }}>\n            Email Address{\" \"}\n          </label>\n          <div className=\"input-group input-group-sm\">\n            <input\n              type=\"email\"\n              className={\n                \"form-control form-control-sm\" +\n                (this.state.usernameEntered ? \" input-validated\" : \"\") +\n                (sentBack && this.props.loginInfo === \"username does not exist\"\n                  ? \" border-danger\"\n                  : \"\")\n              }\n              id=\"login-email-input\"\n              aria-describedby=\"emailHelp\"\n              onChange={(e) => this.handleEmailInput(e)}\n              onKeyDown={(e) => this.handleEmailEnter(e)}\n              disabled={\n                this.state.nextClicked &&\n                this.props.loginInfo !== \"username does not exist\"\n              }\n              ref={this.inputRef}\n            />\n            <div\n              className={\n                \"input-group-append\" +\n                (this.state.nextClicked &&\n                this.props.loginInfo !== \"username does not exist\"\n                  ? \"\"\n                  : \" d-none\")\n              }\n            >\n              <span className=\"input-group-text email-check\">\n                <i className=\"fas fa-check\"></i>\n              </span>\n            </div>\n\n            {/* <small id=\"emailHelp\" className=\"form-text text-muted\">\n              This is your email address you used when you registered.\n            </small> */}\n          </div>\n\n          <div\n            className={\"form-group\" + (this.state.nextClicked ? \"\" : \" d-none\")}\n          >\n            <br></br>\n            <label htmlFor=\"login-password-input\" style={{ fontWeight: \"500\" }}>\n              Password\n            </label>\n            <input\n              type=\"password\"\n              className={\n                \"form-control form-control-sm\" +\n                (sentBack ? \" border-danger\" : \"\")\n              }\n              id=\"login-password-input\"\n              onChange={(e) => this.handlePasswordInput(e)}\n              ref={this.passwordInput}\n            />\n          </div>\n          <br />\n          <br />\n\n          <button\n            className=\"btn btn-primary px-4 font-small-login-reg\"\n            type={this.state.nextClicked ? \"submit\" : \"button\"}\n            disabled={\n              !this.state.usernameEntered || this.inputRef.current.value === \"\"\n            }\n            onClick={(e) => this.handleLoginBtnClick(e)}\n          >\n            {this.state.nextClicked ? \"Log In\" : \"Next\"}\n          </button>\n\n          <span className=\"ml-3 font-small-login-reg\">\n            Don't have an account?{\" \"}\n            <span\n              onClick={() => {\n                this.props.switchToRegister();\n              }}\n              className=\"text-primary toggle-prompt-text\"\n              style={{ cursor: \"pointer\" }}\n            >\n              Sign Up\n            </span>\n          </span>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}