{"ast":null,"code":"import _classCallCheck from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Cookies from\"universal-cookie\";import\"./App.css\";import $ from\"jquery\";import Todolist from\"./todolist/Todolist\";import Details from\"./todolist/Details\";import Login from\"./todolist/Login\";import Register from\"./todolist/Register\";import Sidebar from\"./todolist/Sidebar\";import Notification from\"./todolist/Notification\";import Toolbar from\"./todolist/Toolbar\";import AddListOverlay from\"./todolist/AddListOverlay\";import EditListOverlay from\"./todolist/EditListOverlay\";import SettingsOverlay from\"./todolist/SettingsOverlay\";var ObjectID=require(\"bson-objectid\");var cookies=new Cookies();var domain=\"http://localhost:9000\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={docTitle:\"Log in | Doozy\",loggedIn:\"not yet\",registered:\"not yet\",loginOrRegister:\"login\",lists:[],username:\"\",currentlySelectedListIndex:0,currentlySelectedListName:\"\",currentlySelectedItemID:\"\",bgURL:\"\",firstName:\"\",lastName:\"\",loaded:false,notificationDisplaying:false,lastDeletedItem:{},lastDeletedItemListName:\"\",addListOverlayDisplaying:false,editListOverlayDisplaying:false,settingsOverlayDisplaying:false,editListName:\"\",editListColor:\"\",sorting:\"\",background:\"random\",keywords:\"both\"};_this.addListTitleRef=React.createRef();_this.editListTitleRef=React.createRef();_this.settingsRef=React.createRef();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var username=\"\";var firstName=\"\";var lastName=\"\";var loggedIn=\"not yet\";var docTitle=this.state.docTitle;var sorting=\"dates first\";var background=\"random\";var keywords=\"both\";// cookie exists\nif(cookies.get(\"DoozyLogin\")!==undefined){username=cookies.get(\"DoozyLogin\").email;firstName=cookies.get(\"DoozyLogin\").firstName;lastName=cookies.get(\"DoozyLogin\").lastName;loggedIn=\"successful\";// extend the expiration date of the cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:username,firstName:firstName,lastName:lastName},{path:\"/\",expires:aWeekFromNow});docTitle=\"Lists | Doozy\";}// user has signed in previously\nif(username!==\"\"){// make a call to the DB to retrieve the user's settings\nvar url=domain+\"/getSettings\";var body=JSON.stringify({username:username});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){var bgURL=res.background===\"random\"?getRandomBGURL():'url(\"'+res.background+'\")';_this2.setState({bgURL:bgURL,username:username,firstName:firstName,lastName:lastName,loggedIn:loggedIn,docTitle:docTitle,sorting:res.sorting,keywords:res.keywords,background:bgURL});});}else{$(\"#login-register\").removeClass(\"d-none\");this.setState({username:username,firstName:firstName,lastName:lastName,loggedIn:loggedIn,docTitle:docTitle,sorting:sorting,bgURL:getRandomBGURL(),background:background,keywords:keywords});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.loaded===false&&this.state.loggedIn===\"successful\"){this.setState({loaded:true});this.getLists();}}},{key:\"verifyLogin\",value:function verifyLogin(username,password,authType){var _this3=this;console.log(\"verify login with\",username,password,authType);var url=domain+\"/verifyLogin\";var body=JSON.stringify({username:username,password:password,authType:authType});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){// console.log(res);\nif(res.success){_this3.setState({docTitle:\"Lists | Doozy\",loggedIn:\"successful\",username:username,firstName:res.firstName,lastName:res.lastName,sorting:res.sorting,keywords:res.keywords,background:res.background});_this3.getLists();// set a cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:username,firstName:res.firstName,lastName:res.lastName},{path:\"/\",expires:aWeekFromNow});}else if(res.info===\"username does not exist\")_this3.setState({loggedIn:\"username does not exist\"});else if(res.info===\"auth type\")_this3.setState({loggedIn:\"auth type\",loginOrRegister:\"login\"});else if(res.info===\"incorrect password\")_this3.setState({loggedIn:\"incorrect password\"});});}},{key:\"createAccount\",value:function createAccount(email,firstName,lastName,password,authType){var _this4=this;if(email===\"\"||firstName===\"\"||lastName===\"\"||password===\"\")this.setState({registered:\"empty field(s)\"});else if(!ValidateEmail(email))this.setState({registered:\"invalid email\"});else if(password.length<6)this.setState({registered:\"password length\"});else{var url=domain+\"/createAccount\";var body=JSON.stringify({username:email,firstName:firstName,lastName:lastName,password:password,authType:authType});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){if(res.success){_this4.setState({docTitle:\"Lists | Doozy\",loggedIn:\"successful\",registered:\"successful\",username:email,firstName:firstName,lastName:lastName,sorting:\"dates first\",keywords:true,background:\"random\"});_this4.getLists();// set a cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:email,firstName:firstName,lastName:lastName},{path:\"/\",expires:aWeekFromNow});}else if(res.info===\"username already exists\"){_this4.setState({registered:\"username already exists\"});}});}}},{key:\"deleteAllCompletedItems\",value:function deleteAllCompletedItems(listName){var _this5=this;if(listName!==\"Today\"&&listName!==\"Next 7 Days\"&&listName!==\"All\"){var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;var firstCompletedIndex=0;for(var j=0;j<items.length;j++){if(items[j].completed){firstCompletedIndex=j;break;}}items=items.slice(0,firstCompletedIndex);break;}}var url=domain+\"/deleteCompletedItems\";var body=JSON.stringify({username:this.state.username,listName:listName});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){_this5.setState({lists:lists});_this5.getLists();});}}},{key:\"setSelectedItem\",value:function setSelectedItem(itemID){this.setState({currentlySelectedItemID:itemID,addListOverlayDisplaying:false});}},{key:\"setSelectedList\",value:function setSelectedList(listName){var index;if(listName===\"Today\")index=this.state.lists.length-3;if(listName===\"Next 7 Days\")index=this.state.lists.length-2;if(listName===\"All\")index=this.state.lists.length-1;else{for(var i=0;i<this.state.lists.length;i++){if(this.state.lists[i].name===listName){index=i;break;}}}this.setState({currentlySelectedListName:listName,currentlySelectedListIndex:index,currentlySelectedItemID:\"\",addListOverlayDisplaying:false});}},{key:\"toggleLoginRegister\",value:function toggleLoginRegister(){if(this.state.loginOrRegister===\"login\")this.setState({docTitle:\"Sign Up | Doozy\",loginOrRegister:\"register\"});else if(this.state.loginOrRegister===\"register\")this.setState({docTitle:\"Log In | Doozy\",loginOrRegister:\"login\"});}},{key:\"getCurrentlySelectedItem\",value:function getCurrentlySelectedItem(){if(this.state.currentlySelectedItemID===\"\")return{title:\"\",description:\"\",dueDate:\"\",priority:\"\",completed:false,itemID:\"\"};var items=this.state.lists.slice(this.state.currentlySelectedListIndex)[0].items;for(var i=0;i<items.length;i++){if(items[i].itemID===this.state.currentlySelectedItemID)return items[i];}return{title:\"\",description:\"\",dueDate:\"\",priority:\"\",completed:false,itemID:\"\"};}// for now assume we are getting the user's username from the props\n// that are being passed in by a Login component (to be created)\n},{key:\"getLists\",value:function getLists(currentlySelectedList,currentlySelectedListIndex){var _this6=this;var url=domain+\"/getLists\";var body=JSON.stringify({username:this.state.username/*this.props.username*/});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){var lists=res;lists=_this6.appendSmartLists(lists);if(currentlySelectedList!==undefined&&currentlySelectedListIndex!==undefined){_this6.setState({lists:lists,currentlySelectedListIndex:currentlySelectedListIndex,currentlySelectedListName:currentlySelectedList});}else{var index=_this6.state.registered===\"successful\"?0:lists.length-1;var name=lists[index].name;_this6.setState({lists:lists,currentlySelectedListIndex:index,currentlySelectedListName:name});}});}},{key:\"appendSmartLists\",value:function appendSmartLists(lists){var next7Days=this.getNext7Days(lists);var today=this.getToday(lists);var all=this.getAll(lists);lists.push(today);lists.push(next7Days);lists.push(all);return lists;}},{key:\"getNext7Days\",value:function getNext7Days(lists){var next7Days={name:\"Next 7 Days\",color:\"\",items:[]};for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){if(checkIfNext7Days(items[j].dueDate)){items[j].originalList=lists[i].name;items[j].color=lists[i].color;next7Days.items.push(items[j]);}}}var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;next7Days.items.sort(sortingFunction);return next7Days;}},{key:\"getAll\",value:function getAll(lists){var all={name:\"All\",color:\"\",items:[]};for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){items[j].originalList=lists[i].name;items[j].color=lists[i].color;}all.items=all.items.concat(lists[i].items);}var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;all.items.sort(sortingFunction);return all;}},{key:\"getToday\",value:function getToday(lists){var today={name:\"Today\",color:\"\",items:[]};var t=dateToStr(new Date());for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].dueDate===t){items[j].originalList=lists[i].name;items[j].color=lists[i].color;today.items.push(items[j]);}}}var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;today.items.sort(sortingFunction);return today;}},{key:\"addListItem\",value:function addListItem(listName,title,dueDate,description,priority,color,itemID,completed){var lists=this.state.lists.slice();var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;var id=null;var item={title:title,description:description,dueDate:dueDate,priority:priority,completed:completed===undefined?false:completed,originalList:listName,color:color,itemID:itemID===undefined?new ObjectID().toString():itemID};for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;items.push(item);id=item.itemID;items.sort(sortingFunction);break;}}var today=dateToStr(new Date());if(dueDate===today){lists[lists.length-3].items.push(item);lists[lists.length-3].items.sort(sortingFunction);}if(checkIfNext7Days(dueDate)){lists[lists.length-2].items.push(item);lists[lists.length-2].items.sort(sortingFunction);}lists[lists.length-1].items.push(item);lists[lists.length-1].items.sort(sortingFunction);this.setState({lists:lists,currentlySelectedItemID:id});var url=domain+\"/addListItem\";var body=JSON.stringify({username:this.state.username,listName:listName,title:title,dueDate:dueDate,description:description,priority:priority,itemID:id});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"deleteListItem\",value:function deleteListItem(listName,itemID,originalList){var dueDate=\"\";var item;var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===listName||lists[i].name===originalList){var items=lists[i].items;var idx=-1;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){idx=j;dueDate=items[j].dueDate;item=items[j];break;}}items=items.splice(idx,1);}}var index=-1;var today=dateToStr(new Date());if(dueDate===today){items=lists[lists.length-3].items;for(var _j=0;_j<items.length;_j++){if(items[_j].itemID===itemID){index=_j;break;}}items=items.splice(index,1);}if(checkIfNext7Days(dueDate)){items=lists[lists.length-2].items;for(var _j2=0;_j2<items.length;_j2++){if(items[_j2].itemID===itemID){index=_j2;break;}}items=items.splice(index,1);}items=lists[lists.length-1].items;for(var _j3=0;_j3<items.length;_j3++){if(items[_j3].itemID===itemID){index=_j3;break;}}items=items.splice(index,1);this.setState({lists:lists,currentlySelectedItemID:\"\",lastDeletedItem:item,lastDeletedItemListName:listName});var url=domain+\"/deleteListItem\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.text();});this.handleDisplayNotification();}},{key:\"setItemTitle\",value:function setItemTitle(listName,itemID,title){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].title=title;item=items[j];break;}}break;}}if(item.originalList!==listName){for(var _i=0;_i<lists.length;_i++){if(lists[_i].name===item.originalList){var _items=lists[_i].items;for(var _j4=0;_j4<_items.length;_j4++){if(_items[_j4].itemID===itemID){_items[_j4].title=title;break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);var url=domain+\"/setItemTitle\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,title:title});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.text();});}},{key:\"setItemCompleted\",value:function setItemCompleted(listName,itemID,completed){var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].completed=completed;item=items[j];items.sort(sortingFunction);break;}}break;}}if(item.originalList!==listName){for(var _i2=0;_i2<lists.length;_i2++){if(lists[_i2].name===item.originalList){var _items2=lists[_i2].items;for(var _j5=0;_j5<_items2.length;_j5++){if(_items2[_j5].itemID===itemID){_items2[_j5].completed=completed;_items2.sort(sortingFunction);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemCompleted\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,completed:completed});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemDueDate\",value:function setItemDueDate(listName,itemID,dueDate){var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].dueDate=dueDate;item=items[j];items.sort(sortingFunction);break;}}break;}}if(item.originalList!==listName){for(var _i3=0;_i3<lists.length;_i3++){if(lists[_i3].name===item.originalList){var _items3=lists[_i3].items;for(var _j6=0;_j6<_items3.length;_j6++){if(_items3[_j6].itemID===itemID){_items3[_j6].dueDate=dueDate;_items3.sort(sortingFunction);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemDueDate\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,dueDate:dueDate});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemPriority\",value:function setItemPriority(listName,itemID,priority){var sortingFunction=this.state.sorting===\"dates first\"?sortListItemsDatesFirst:sortListItemsPrioritiesFirst;var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].priority=priority;item=items[j];items.sort(sortingFunction);break;}}break;}}if(item.originalList!==listName){for(var _i4=0;_i4<lists.length;_i4++){if(lists[_i4].name===item.originalList){var _items4=lists[_i4].items;for(var _j7=0;_j7<_items4.length;_j7++){if(_items4[_j7].itemID===itemID){_items4[_j7].priority=priority;_items4.sort(sortingFunction);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemPriority\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,priority:priority});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemDescription\",value:function setItemDescription(listName,itemID,description){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].description=description;item=items[j];break;}}break;}}if(item.originalList!==listName){for(var _i5=0;_i5<lists.length;_i5++){if(lists[_i5].name===item.originalList){var _items5=lists[_i5].items;for(var _j8=0;_j8<_items5.length;_j8++){if(_items5[_j8].itemID===itemID){_items5[_j8].description=description;break;}}break;}}}this.setState({lists:lists});var url=domain+\"/setItemDescription\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,description:description});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"handleLogOut\",value:function handleLogOut(){// delete the cookie\ncookies.remove(\"DoozyLogin\");// const bgURL = getRandomBGURL();\n// reset state back to start\nthis.setState({docTitle:\"Log in | Doozy\",loggedIn:\"not yet\",registered:\"not yet\",loginOrRegister:\"login\",lists:[],username:\"\",currentlySelectedListIndex:0,currentlySelectedListName:\"\",currentlySelectedItemID:\"\",// bgURL: bgURL,\nfirstName:\"\",lastName:\"\",loaded:false});}},{key:\"createEmptyList\",value:function createEmptyList(listName,color){var list={name:listName,color:color,items:[]};var lists=this.state.lists.slice();lists.splice(lists.length-3,0,list);this.setState({lists:lists,currentlySelectedListIndex:lists.length-4,currentlySelectedListName:listName});var url=domain+\"/createEmptyList\";var body=JSON.stringify({username:this.state.username,listName:listName,color:color});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"focusAddListOverlayTitleInput\",value:function focusAddListOverlayTitleInput(){this.addListTitleRef.current.focus();}},{key:\"focusEditListOverlayTitleInput\",value:function focusEditListOverlayTitleInput(){this.editListTitleRef.current.focus();}},{key:\"deleteList\",value:function deleteList(listName){var idx=-1;var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===listName){idx=i;break;}}lists.splice(idx,1);lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists,currentlySelectedItemID:\"\",currentlySelectedListIndex:idx-1>=0?idx-1:2,currentlySelectedListName:idx-1>=0?lists[idx-1].name:lists[2].name});var url=domain+\"/deleteList\";var body=JSON.stringify({username:this.state.username,listName:listName});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"editList\",value:function editList(oldName,newName,color){var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===oldName){lists[i].name=newName;lists[i].color=color;var items=lists[i].items;for(var j=0;j<items.length;j++){items[j].originalList=newName;items[j].color=color;}break;}}this.setState({lists:lists});var url=domain+\"/editList\";var body=JSON.stringify({username:this.state.username,oldName:oldName,newName:newName,color:color});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"handleDisplayNotification\",value:function handleDisplayNotification(){var _this7=this;this.setState({notificationDisplaying:true});setTimeout(function(){_this7.setState({notificationDisplaying:false});},4000);}},{key:\"handleShowAddListOverlay\",value:function handleShowAddListOverlay(){var _this8=this;this.setState({addListOverlayDisplaying:true});$(\".add-list-overlay-color-selected\").removeClass(\".add-list-overlay-color-selected\");this.addListTitleRef.current.value=\"\";setTimeout(function(){_this8.addListTitleRef.current.focus();},500);}},{key:\"handleShowEditListOverlay\",value:function handleShowEditListOverlay(listName,color){var _this9=this;this.setState({editListOverlayDisplaying:true,editListColor:color,editListName:listName});this.editListTitleRef.current.value=listName;setTimeout(function(){_this9.editListTitleRef.current.focus();},500);}},{key:\"handleShowSettingsOverlay\",value:function handleShowSettingsOverlay(){var _this10=this;this.setState({settingsOverlayDisplaying:true});setTimeout(function(){_this10.settingsRef.current.focus();},500);}},{key:\"handleHideAddListOverlay\",value:function handleHideAddListOverlay(){this.setState({addListOverlayDisplaying:false});}},{key:\"handleHideEditListOverlay\",value:function handleHideEditListOverlay(){this.setState({editListOverlayDisplaying:false,editListColor:\"\",editListName:\"\"});}},{key:\"setBackgroundSetting\",value:function setBackgroundSetting(background){this.setState({background:background,bgURL:'url(\"'+background+'\")'});}},{key:\"setKeywordsSetting\",value:function setKeywordsSetting(keywordsEnabled){this.setState({keywords:keywordsEnabled});var url=domain+\"/setKeywordSetting\";var body=JSON.stringify({username:this.state.username,keywords:keywordsEnabled});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setSortingSetting\",value:function setSortingSetting(sortingType){var _this11=this;this.setState({sorting:sortingType});var url=domain+\"/setSortingSetting\";var body=JSON.stringify({username:this.state.username,sorting:sortingType});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(){_this11.getLists(_this11.state.currentlySelectedListName,_this11.state.currentlySelectedListIndex);});}},{key:\"render\",value:function render(){var _this12=this;document.title=this.state.docTitle;var listArr=this.state.lists.slice(this.state.currentlySelectedListIndex,this.state.currentlySelectedListIndex+1);var lastDeletedItemTitle=\"\";if(this.state.lastDeletedItem!==undefined)lastDeletedItemTitle=this.state.lastDeletedItem.title;var selectedItem=this.getCurrentlySelectedItem();var appClasses=\"row align-items-center\"+(this.state.loggedIn===\"successful\"?\"\":\" d-none\");var loginRegClasses=\"container-fluid align-items-center\"+(this.state.loggedIn===\"successful\"?\" d-none\":\" d-flex \");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"login-register\",style:{backgroundImage:this.state.bgURL},className:loginRegClasses},/*#__PURE__*/React.createElement(\"div\",{className:\"login-section\"+(this.state.loginOrRegister===\"login\"?\"\":\" d-none\")},/*#__PURE__*/React.createElement(Login,{loginInfo:this.state.loggedIn,verifyLogin:function verifyLogin(username,password,authType){return _this12.verifyLogin(username,password,authType);},createAccount:function createAccount(email,fName,lName,password,authType){return _this12.createAccount(email,fName,lName,password,authType);},switchToRegister:function switchToRegister(){return _this12.toggleLoginRegister();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"register-section\"+(this.state.loginOrRegister===\"register\"?\"\":\" d-none\")},/*#__PURE__*/React.createElement(Register,{switchToLogin:function switchToLogin(){return _this12.toggleLoginRegister();},verifyLogin:function verifyLogin(username,password,authType){return _this12.verifyLogin(username,password,authType);},createAccount:function createAccount(email,fName,lName,password,authType){return _this12.createAccount(email,fName,lName,password,authType);},registerInfo:this.state.registered}))),/*#__PURE__*/React.createElement(\"div\",{id:\"app\",style:{backgroundImage:this.state.bgURL},className:appClasses,onKeyDown:function onKeyDown(e){if(e.keyCode===27){if(_this12.state.addListOverlayDisplaying)_this12.setState({addListOverlayDisplaying:false});else if(_this12.state.settingsOverlayDisplaying)_this12.setState({settingsOverlayDisplaying:false});else if(_this12.state.editListOverlayDisplaying)_this12.setState({editListOverlayDisplaying:false});}}},/*#__PURE__*/React.createElement(AddListOverlay,{id:\"addListOverlay\",displaying:this.state.addListOverlayDisplaying,addListTitleRef:this.addListTitleRef,lists:this.state.lists,hideOverlay:function hideOverlay(){return _this12.handleHideAddListOverlay();},createList:function createList(listName,color){return _this12.createEmptyList(listName,color);},focusTitleInput:function focusTitleInput(){return _this12.focusAddListOverlayTitleInput();}}),/*#__PURE__*/React.createElement(EditListOverlay,{id:\"editListOverlay\",displaying:this.state.editListOverlayDisplaying,editListTitleRef:this.editListTitleRef,lists:this.state.lists,hideOverlay:function hideOverlay(){return _this12.handleHideEditListOverlay();},focusTitleInput:function focusTitleInput(){return _this12.focusEditListOverlayTitleInput();},startingName:this.state.editListName,startingColor:this.state.editListColor,editList:function editList(oldName,newName,color){return _this12.editList(oldName,newName,color);}}),/*#__PURE__*/React.createElement(SettingsOverlay,{settingsRef:this.settingsRef,displaying:this.state.settingsOverlayDisplaying,sorting:this.state.sorting,keywords:this.state.keywords,background:this.state.background,setKeywordsSetting:function setKeywordsSetting(keywords){return _this12.setKeywordsSetting(keywords);},setSortingSetting:function setSortingSetting(sorting){return _this12.setSortingSetting(sorting);},setBackgroundSetting:function setBackgroundSetting(bg){return _this12.setBackgroundSetting(bg);},hideSettingsOverlay:function hideSettingsOverlay(){return _this12.setState({settingsOverlayDisplaying:false});}}),/*#__PURE__*/React.createElement(Notification,{displaying:this.state.notificationDisplaying,hideNotification:function hideNotification(){return _this12.setState({notificationDisplaying:false});},title:lastDeletedItemTitle,undo:function undo(){if(_this12.state.lastDeletedItem.itemID!==undefined){_this12.addListItem(_this12.state.lastDeletedItem.originalList,_this12.state.lastDeletedItem.title,_this12.state.lastDeletedItem.dueDate,_this12.state.lastDeletedItem.description,_this12.state.lastDeletedItem.priority,_this12.state.lastDeletedItem.color,_this12.state.lastDeletedItem.itemID,_this12.state.lastDeletedItem.completed);}},listName:this.state.lastDeletedItemListName,originalList:this.state.lastDeletedItem.originalList}),/*#__PURE__*/React.createElement(\"div\",{id:\"sidebar\",className:\"p-0\"},/*#__PURE__*/React.createElement(Sidebar,{username:this.state.username,lists:this.state.lists,firstName:this.state.firstName,lastName:this.state.lastName,currentlySelectedListName:this.state.currentlySelectedListName,setSelectedList:function setSelectedList(listName){return _this12.setSelectedList(listName);},showAddListOverlay:function showAddListOverlay(){return _this12.handleShowAddListOverlay();},deleteList:function deleteList(listName){return _this12.deleteList(listName);},showEditListOverlay:function showEditListOverlay(listName,color){return _this12.handleShowEditListOverlay(listName,color);}})),listArr.map(function(list,i){return/*#__PURE__*/React.createElement(React.Fragment,{key:list.name},/*#__PURE__*/React.createElement(\"div\",{id:\"todolist\",className:\"col-5\"},/*#__PURE__*/React.createElement(Todolist,{color:list.color,name:list.name,items:list.items,keywords:_this12.state.keywords,addListItem:function addListItem(listName,title,dueDate,description,priority,color){return _this12.addListItem(listName,title,dueDate,description,priority,color);},deleteListItem:function deleteListItem(listName,itemID,originalList){return _this12.deleteListItem(listName,itemID,originalList);},setItemTitle:function setItemTitle(listName,itemID,title){return _this12.setItemTitle(listName,itemID,title);},setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this12.setItemCompleted(listName,itemID,completed);},setSelectedItem:function setSelectedItem(itemID){return _this12.setSelectedItem(itemID);},selectedItemID:_this12.state.currentlySelectedItemID,hideAddListOverlay:function hideAddListOverlay(){return _this12.handleHideAddListOverlay();}})),/*#__PURE__*/React.createElement(\"div\",{id:\"details\",className:\"col-4\"},/*#__PURE__*/React.createElement(Details,{listName:list.name,selectedItemID:selectedItem.itemID,selectedItemColor:selectedItem.color,selectedItemList:selectedItem.originalList,selectedItemTitle:selectedItem.title,selectedItemDueDate:selectedItem.dueDate,selectedItemDescription:selectedItem.description,selectedItemPriority:selectedItem.priority,selectedItemCompleted:selectedItem.completed,setItemTitle:function setItemTitle(listName,itemID,title){return _this12.setItemTitle(listName,itemID,title);},setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this12.setItemCompleted(listName,itemID,completed);},setItemDueDate:function setItemDueDate(listName,itemID,dueDate){return _this12.setItemDueDate(listName,itemID,dueDate);},setItemPriority:function setItemPriority(listName,itemID,priority){return _this12.setItemPriority(listName,itemID,priority);},setItemDescription:function setItemDescription(listName,itemID,description){return _this12.setItemDescription(listName,itemID,description);},handleDelete:function handleDelete(listName,itemID,originalList){return _this12.deleteListItem(listName,itemID,originalList);},hideAddListOverlay:function hideAddListOverlay(){return _this12.handleHideAddListOverlay();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"toolbar\",className:\"row col-1 justify-content-center\"},/*#__PURE__*/React.createElement(Toolbar,{handleLogOut:function handleLogOut(){return _this12.handleLogOut();},deleteAllCompletedItems:function deleteAllCompletedItems(){_this12.deleteAllCompletedItems(_this12.state.currentlySelectedListName);},currentlySelectedListName:_this12.state.currentlySelectedListName,handleShowSettingsOverlay:function handleShowSettingsOverlay(){return _this12.handleShowSettingsOverlay();}})));})));}}]);return App;}(Component);export{App as default};function sortListItemsDatesFirst(a,b){if(a.completed&&!b.completed)return 1;else if(!a.completed&&b.completed)return-1;else if(a.dueDate===\"\"&&b.dueDate!==\"\")return 1;else if(a.dueDate!==\"\"&&b.dueDate===\"\")return-1;else{// both are either completed or incomplete or have a due date set or no due date set\nif(a.dueDate===b.dueDate){// sort items due on the same day by priority\nvar priorities=[\"low\",\"medium\",\"high\"];var priorityA=priorities.indexOf(a.priority);var priorityB=priorities.indexOf(b.priority);if(priorityA!==priorityB)return priorityB-priorityA;else{// sort by itemID\nvar itemIDA=a.itemID;var itemIDB=b.itemID;return itemIDA-itemIDB;}}else{// sort items based on date\nvar dateA=new Date(a.dueDate+\" 00:00\");var dateB=new Date(b.dueDate+\" 00:00\");return dateA-dateB;}}}function sortListItemsPrioritiesFirst(a,b){if(a.completed&&!b.completed)return 1;else if(!a.completed&&b.completed)return-1;else{// sort items by priority first\nvar priorities=[\"low\",\"medium\",\"high\"];var priorityA=priorities.indexOf(a.priority);var priorityB=priorities.indexOf(b.priority);// if they have the same priority, sort by due date\nif(priorityB===priorityA){if(a.dueDate===\"\"&&b.dueDate!==\"\")return 1;else if(a.dueDate!==\"\"&&b.dueDate===\"\")return-1;// sort items based on due date\nvar dateA=new Date(a.dueDate+\" 00:00\");var dateB=new Date(b.dueDate+\" 00:00\");if(a.dueDate!==b.dueDate)return dateA-dateB;else{// sort by itemID\nvar itemIDA=a.itemID;var itemIDB=b.itemID;return itemIDA-itemIDB;}}else return priorityB-priorityA;}}function ValidateEmail(mail){if(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)){return true;}return false;}function getRandomBGURL(){// visit https://freeimage.host/ to host more background images\nvar backgroundURLs=[\"https://iili.io/J4xbBS.jpg\",\"https://iili.io/J4xtQ2.jpg\",\"https://iili.io/J4z92e.jpg\",\"https://iili.io/J4zdpj.jpg\",\"https://iili.io/J4zJkb.jpg\",\"https://iili.io/J4zWZl.jpg\",\"https://iili.io/J4Weln.jpg\",\"https://iili.io/J4WhoN.jpg\",\"https://iili.io/J4WOKX.jpg\",\"https://iili.io/J4WUN4.jpg\",\"https://iili.io/J4WgDl.jpg\",\"https://iili.io/J4WmDQ.jpg\",\"https://iili.io/J4X9WB.jpg\",\"https://iili.io/J4XHiP.jpg\",\"https://iili.io/J4WyxV.jpg\",\"https://iili.io/JPNuGR.jpg\",\"https://iili.io/JPN53N.jpg\",\"https://iili.io/JPNTCv.jpg\",\"https://iili.io/JiKSp4.jpg\",\"https://iili.io/Jszxun.jpg\",\"https://iili.io/JszAG4.jpg\",\"https://iili.io/JszIZG.jpg\",\"https://iili.io/Jszzjs.jpg\",\"https://iili.io/Jszunf.jpg\"];var currBackground=Math.floor(Math.random()*Math.floor(backgroundURLs.length));return'url(\"'+backgroundURLs[currBackground]+'\")';}function dateToStr(date){var day=date.getDate();if(day<10)day=\"0\"+day.toString();var month=date.getMonth()+1;if(month<10)month=\"0\"+month.toString();var year=date.getFullYear().toString();var formatted=year+\"-\"+month+\"-\"+day;return formatted;}function checkIfNext7Days(dateStr){var curr=new Date();for(var i=0;i<7;i++){var d=dateToStr(curr);if(dateStr===d)return true;curr.setDate(curr.getDate()+1);}d=dateToStr(curr);if(dateStr===d)return true;return false;}","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/App.js"],"names":["React","Component","Cookies","$","Todolist","Details","Login","Register","Sidebar","Notification","Toolbar","AddListOverlay","EditListOverlay","SettingsOverlay","ObjectID","require","cookies","domain","App","props","state","docTitle","loggedIn","registered","loginOrRegister","lists","username","currentlySelectedListIndex","currentlySelectedListName","currentlySelectedItemID","bgURL","firstName","lastName","loaded","notificationDisplaying","lastDeletedItem","lastDeletedItemListName","addListOverlayDisplaying","editListOverlayDisplaying","settingsOverlayDisplaying","editListName","editListColor","sorting","background","keywords","addListTitleRef","createRef","editListTitleRef","settingsRef","get","undefined","email","aWeekFromNow","Date","setDate","getDate","set","path","expires","url","body","JSON","stringify","fetch","method","headers","then","res","json","getRandomBGURL","setState","removeClass","getLists","password","authType","console","log","success","info","ValidateEmail","length","listName","slice","i","name","items","firstCompletedIndex","j","completed","itemID","index","title","description","dueDate","priority","currentlySelectedList","appendSmartLists","next7Days","getNext7Days","today","getToday","all","getAll","push","color","checkIfNext7Days","originalList","sortingFunction","sortListItemsDatesFirst","sortListItemsPrioritiesFirst","sort","concat","t","dateToStr","id","item","toString","idx","splice","text","handleDisplayNotification","remove","list","current","focus","oldName","newName","setTimeout","value","keywordsEnabled","sortingType","document","listArr","lastDeletedItemTitle","selectedItem","getCurrentlySelectedItem","appClasses","loginRegClasses","backgroundImage","verifyLogin","fName","lName","createAccount","toggleLoginRegister","e","keyCode","handleHideAddListOverlay","createEmptyList","focusAddListOverlayTitleInput","handleHideEditListOverlay","focusEditListOverlayTitleInput","editList","setKeywordsSetting","setSortingSetting","bg","setBackgroundSetting","addListItem","setSelectedList","handleShowAddListOverlay","deleteList","handleShowEditListOverlay","map","deleteListItem","setItemTitle","setItemCompleted","setSelectedItem","setItemDueDate","setItemPriority","setItemDescription","handleLogOut","deleteAllCompletedItems","handleShowSettingsOverlay","a","b","priorities","priorityA","indexOf","priorityB","itemIDA","itemIDB","dateA","dateB","mail","test","backgroundURLs","currBackground","Math","floor","random","date","day","month","getMonth","year","getFullYear","formatted","dateStr","curr","d"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Cookies from \"universal-cookie\";\nimport \"./App.css\";\n\nimport $ from \"jquery\";\n\nimport Todolist from \"./todolist/Todolist\";\nimport Details from \"./todolist/Details\";\nimport Login from \"./todolist/Login\";\nimport Register from \"./todolist/Register\";\nimport Sidebar from \"./todolist/Sidebar\";\nimport Notification from \"./todolist/Notification\";\nimport Toolbar from \"./todolist/Toolbar\";\nimport AddListOverlay from \"./todolist/AddListOverlay\";\nimport EditListOverlay from \"./todolist/EditListOverlay\";\nimport SettingsOverlay from \"./todolist/SettingsOverlay\";\n\nvar ObjectID = require(\"bson-objectid\");\nconst cookies = new Cookies();\n\nconst domain = \"http://localhost:9000\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      docTitle: \"Log in | Doozy\",\n      loggedIn: \"not yet\",\n      registered: \"not yet\",\n      loginOrRegister: \"login\",\n      lists: [],\n      username: \"\",\n      currentlySelectedListIndex: 0,\n      currentlySelectedListName: \"\",\n      currentlySelectedItemID: \"\",\n      bgURL: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      loaded: false,\n      notificationDisplaying: false,\n      lastDeletedItem: {},\n      lastDeletedItemListName: \"\",\n      addListOverlayDisplaying: false,\n      editListOverlayDisplaying: false,\n      settingsOverlayDisplaying: false,\n      editListName: \"\",\n      editListColor: \"\",\n      sorting: \"\",\n      background: \"random\",\n      keywords: \"both\",\n    };\n    this.addListTitleRef = React.createRef();\n    this.editListTitleRef = React.createRef();\n    this.settingsRef = React.createRef();\n  }\n\n  componentDidMount() {\n    var username = \"\";\n    var firstName = \"\";\n    var lastName = \"\";\n    var loggedIn = \"not yet\";\n    var docTitle = this.state.docTitle;\n    var sorting = \"dates first\";\n    var background = \"random\";\n    var keywords = \"both\";\n\n    // cookie exists\n    if (cookies.get(\"DoozyLogin\") !== undefined) {\n      username = cookies.get(\"DoozyLogin\").email;\n      firstName = cookies.get(\"DoozyLogin\").firstName;\n      lastName = cookies.get(\"DoozyLogin\").lastName;\n      loggedIn = \"successful\";\n\n      // extend the expiration date of the cookie\n      var aWeekFromNow = new Date();\n      aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n      cookies.set(\n        \"DoozyLogin\",\n        {\n          email: username,\n          firstName: firstName,\n          lastName: lastName,\n        },\n        {\n          path: \"/\",\n          expires: aWeekFromNow,\n        }\n      );\n      docTitle = \"Lists | Doozy\";\n    }\n\n    // user has signed in previously\n    if (username !== \"\") {\n      // make a call to the DB to retrieve the user's settings\n      const url = domain + \"/getSettings\";\n      const body = JSON.stringify({\n        username: username,\n      });\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: body,\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          var bgURL =\n            res.background === \"random\"\n              ? getRandomBGURL()\n              : 'url(\"' + res.background + '\")';\n\n          this.setState({\n            bgURL: bgURL,\n            username: username,\n            firstName: firstName,\n            lastName: lastName,\n            loggedIn: loggedIn,\n            docTitle: docTitle,\n            sorting: res.sorting,\n            keywords: res.keywords,\n            background: bgURL,\n          });\n        });\n    } else {\n      $(\"#login-register\").removeClass(\"d-none\");\n      this.setState({\n        username: username,\n        firstName: firstName,\n        lastName: lastName,\n        loggedIn: loggedIn,\n        docTitle: docTitle,\n        sorting: sorting,\n        bgURL: getRandomBGURL(),\n        background: background,\n        keywords: keywords,\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.loaded === false && this.state.loggedIn === \"successful\") {\n      this.setState({ loaded: true });\n      this.getLists();\n    }\n  }\n\n  verifyLogin(username, password, authType) {\n    console.log(\"verify login with\", username, password, authType);\n    const url = domain + \"/verifyLogin\";\n    const body = JSON.stringify({\n      username: username,\n      password: password,\n      authType: authType,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        // console.log(res);\n        if (res.success) {\n          this.setState({\n            docTitle: \"Lists | Doozy\",\n            loggedIn: \"successful\",\n            username: username,\n            firstName: res.firstName,\n            lastName: res.lastName,\n            sorting: res.sorting,\n            keywords: res.keywords,\n            background: res.background,\n          });\n          this.getLists();\n          // set a cookie\n          var aWeekFromNow = new Date();\n          aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n          cookies.set(\n            \"DoozyLogin\",\n            {\n              email: username,\n              firstName: res.firstName,\n              lastName: res.lastName,\n            },\n            {\n              path: \"/\",\n              expires: aWeekFromNow,\n            }\n          );\n        } else if (res.info === \"username does not exist\")\n          this.setState({ loggedIn: \"username does not exist\" });\n        else if (res.info === \"auth type\")\n          this.setState({ loggedIn: \"auth type\", loginOrRegister: \"login\" });\n        else if (res.info === \"incorrect password\")\n          this.setState({ loggedIn: \"incorrect password\" });\n      });\n  }\n\n  createAccount(email, firstName, lastName, password, authType) {\n    if (email === \"\" || firstName === \"\" || lastName === \"\" || password === \"\")\n      this.setState({ registered: \"empty field(s)\" });\n    else if (!ValidateEmail(email))\n      this.setState({ registered: \"invalid email\" });\n    else if (password.length < 6)\n      this.setState({ registered: \"password length\" });\n    else {\n      const url = domain + \"/createAccount\";\n      const body = JSON.stringify({\n        username: email,\n        firstName: firstName,\n        lastName: lastName,\n        password: password,\n        authType: authType,\n      });\n\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: body,\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.success) {\n            this.setState({\n              docTitle: \"Lists | Doozy\",\n              loggedIn: \"successful\",\n              registered: \"successful\",\n              username: email,\n              firstName: firstName,\n              lastName: lastName,\n              sorting: \"dates first\",\n              keywords: true,\n              background: \"random\",\n            });\n            this.getLists();\n            // set a cookie\n            var aWeekFromNow = new Date();\n            aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n            cookies.set(\n              \"DoozyLogin\",\n              { email: email, firstName: firstName, lastName: lastName },\n              {\n                path: \"/\",\n                expires: aWeekFromNow,\n              }\n            );\n          } else if (res.info === \"username already exists\") {\n            this.setState({ registered: \"username already exists\" });\n          }\n        });\n    }\n  }\n\n  deleteAllCompletedItems(listName) {\n    if (\n      listName !== \"Today\" &&\n      listName !== \"Next 7 Days\" &&\n      listName !== \"All\"\n    ) {\n      var lists = this.state.lists.slice();\n\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === listName) {\n          var items = lists[i].items;\n          var firstCompletedIndex = 0;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].completed) {\n              firstCompletedIndex = j;\n              break;\n            }\n          }\n          items = items.slice(0, firstCompletedIndex);\n          break;\n        }\n      }\n\n      const url = domain + \"/deleteCompletedItems\";\n      const body = JSON.stringify({\n        username: this.state.username,\n        listName: listName,\n      });\n\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: body,\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          this.setState({ lists: lists });\n          this.getLists();\n        });\n    }\n  }\n\n  setSelectedItem(itemID) {\n    this.setState({\n      currentlySelectedItemID: itemID,\n      addListOverlayDisplaying: false,\n    });\n  }\n\n  setSelectedList(listName) {\n    var index;\n\n    if (listName === \"Today\") index = this.state.lists.length - 3;\n    if (listName === \"Next 7 Days\") index = this.state.lists.length - 2;\n    if (listName === \"All\") index = this.state.lists.length - 1;\n    else {\n      for (let i = 0; i < this.state.lists.length; i++) {\n        if (this.state.lists[i].name === listName) {\n          index = i;\n          break;\n        }\n      }\n    }\n    this.setState({\n      currentlySelectedListName: listName,\n      currentlySelectedListIndex: index,\n      currentlySelectedItemID: \"\",\n      addListOverlayDisplaying: false,\n    });\n  }\n\n  toggleLoginRegister() {\n    if (this.state.loginOrRegister === \"login\")\n      this.setState({\n        docTitle: \"Sign Up | Doozy\",\n        loginOrRegister: \"register\",\n      });\n    else if (this.state.loginOrRegister === \"register\")\n      this.setState({\n        docTitle: \"Log In | Doozy\",\n        loginOrRegister: \"login\",\n      });\n  }\n\n  getCurrentlySelectedItem() {\n    if (this.state.currentlySelectedItemID === \"\")\n      return {\n        title: \"\",\n        description: \"\",\n        dueDate: \"\",\n        priority: \"\",\n        completed: false,\n        itemID: \"\",\n      };\n\n    var items = this.state.lists.slice(this.state.currentlySelectedListIndex)[0]\n      .items;\n\n    for (let i = 0; i < items.length; i++)\n      if (items[i].itemID === this.state.currentlySelectedItemID)\n        return items[i];\n\n    return {\n      title: \"\",\n      description: \"\",\n      dueDate: \"\",\n      priority: \"\",\n      completed: false,\n      itemID: \"\",\n    };\n  }\n\n  // for now assume we are getting the user's username from the props\n  // that are being passed in by a Login component (to be created)\n  getLists(currentlySelectedList, currentlySelectedListIndex) {\n    const url = domain + \"/getLists\";\n    const body = JSON.stringify({\n      username: this.state.username /*this.props.username*/,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        var lists = res;\n\n        lists = this.appendSmartLists(lists);\n\n        if (\n          currentlySelectedList !== undefined &&\n          currentlySelectedListIndex !== undefined\n        ) {\n          this.setState({\n            lists: lists,\n            currentlySelectedListIndex: currentlySelectedListIndex,\n            currentlySelectedListName: currentlySelectedList,\n          });\n        } else {\n          const index =\n            this.state.registered === \"successful\" ? 0 : lists.length - 1;\n          const name = lists[index].name;\n          this.setState({\n            lists: lists,\n            currentlySelectedListIndex: index,\n            currentlySelectedListName: name,\n          });\n        }\n      });\n  }\n\n  appendSmartLists(lists) {\n    var next7Days = this.getNext7Days(lists);\n    var today = this.getToday(lists);\n    var all = this.getAll(lists);\n\n    lists.push(today);\n    lists.push(next7Days);\n    lists.push(all);\n\n    return lists;\n  }\n\n  getNext7Days(lists) {\n    var next7Days = {\n      name: \"Next 7 Days\",\n      color: \"\",\n      items: [],\n    };\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n      for (let j = 0; j < items.length; j++) {\n        if (checkIfNext7Days(items[j].dueDate)) {\n          items[j].originalList = lists[i].name;\n          items[j].color = lists[i].color;\n          next7Days.items.push(items[j]);\n        }\n      }\n    }\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n    next7Days.items.sort(sortingFunction);\n\n    return next7Days;\n  }\n\n  getAll(lists) {\n    var all = {\n      name: \"All\",\n      color: \"\",\n      items: [],\n    };\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n\n      for (let j = 0; j < items.length; j++) {\n        items[j].originalList = lists[i].name;\n        items[j].color = lists[i].color;\n      }\n\n      all.items = all.items.concat(lists[i].items);\n    }\n\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n    all.items.sort(sortingFunction);\n\n    return all;\n  }\n\n  getToday(lists) {\n    var today = {\n      name: \"Today\",\n      color: \"\",\n      items: [],\n    };\n\n    var t = dateToStr(new Date());\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].dueDate === t) {\n          items[j].originalList = lists[i].name;\n          items[j].color = lists[i].color;\n          today.items.push(items[j]);\n        }\n      }\n    }\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n    today.items.sort(sortingFunction);\n\n    return today;\n  }\n\n  addListItem(\n    listName,\n    title,\n    dueDate,\n    description,\n    priority,\n    color,\n    itemID,\n    completed\n  ) {\n    const lists = this.state.lists.slice();\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n\n    var id = null;\n    var item = {\n      title: title,\n      description: description,\n      dueDate: dueDate,\n      priority: priority,\n      completed: completed === undefined ? false : completed,\n      originalList: listName,\n      color: color,\n      itemID: itemID === undefined ? new ObjectID().toString() : itemID,\n    };\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        items.push(item);\n        id = item.itemID;\n\n        items.sort(sortingFunction);\n        break;\n      }\n    }\n\n    var today = dateToStr(new Date());\n    if (dueDate === today) {\n      lists[lists.length - 3].items.push(item);\n      lists[lists.length - 3].items.sort(sortingFunction);\n    }\n    if (checkIfNext7Days(dueDate)) {\n      lists[lists.length - 2].items.push(item);\n      lists[lists.length - 2].items.sort(sortingFunction);\n    }\n    lists[lists.length - 1].items.push(item);\n    lists[lists.length - 1].items.sort(sortingFunction);\n\n    this.setState({ lists: lists, currentlySelectedItemID: id });\n\n    const url = domain + \"/addListItem\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n      title: title,\n      dueDate: dueDate,\n      description: description,\n      priority: priority,\n      itemID: id,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  deleteListItem(listName, itemID, originalList) {\n    var dueDate = \"\";\n    var item;\n    const lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName || lists[i].name === originalList) {\n        var items = lists[i].items;\n        var idx = -1;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            idx = j;\n            dueDate = items[j].dueDate;\n            item = items[j];\n            break;\n          }\n        }\n        items = items.splice(idx, 1);\n      }\n    }\n\n    let index = -1;\n    var today = dateToStr(new Date());\n    if (dueDate === today) {\n      items = lists[lists.length - 3].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].itemID === itemID) {\n          index = j;\n          break;\n        }\n      }\n      items = items.splice(index, 1);\n    }\n    if (checkIfNext7Days(dueDate)) {\n      items = lists[lists.length - 2].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].itemID === itemID) {\n          index = j;\n          break;\n        }\n      }\n      items = items.splice(index, 1);\n    }\n    items = lists[lists.length - 1].items;\n    for (let j = 0; j < items.length; j++) {\n      if (items[j].itemID === itemID) {\n        index = j;\n        break;\n      }\n    }\n    items = items.splice(index, 1);\n\n    this.setState({\n      lists: lists,\n      currentlySelectedItemID: \"\",\n      lastDeletedItem: item,\n      lastDeletedItemListName: listName,\n    });\n\n    const url = domain + \"/deleteListItem\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    }).then((res) => res.text());\n    this.handleDisplayNotification();\n  }\n\n  setItemTitle(listName, itemID, title) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].title = title;\n            item = items[j];\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].title = title;\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    const url = domain + \"/setItemTitle\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      title: title,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    }).then((res) => res.text());\n  }\n\n  setItemCompleted(listName, itemID, completed) {\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].completed = completed;\n            item = items[j];\n            items.sort(sortingFunction);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].completed = completed;\n              items.sort(sortingFunction);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemCompleted\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      completed: completed,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemDueDate(listName, itemID, dueDate) {\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].dueDate = dueDate;\n            item = items[j];\n            items.sort(sortingFunction);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].dueDate = dueDate;\n              items.sort(sortingFunction);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemDueDate\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      dueDate: dueDate,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemPriority(listName, itemID, priority) {\n    var sortingFunction =\n      this.state.sorting === \"dates first\"\n        ? sortListItemsDatesFirst\n        : sortListItemsPrioritiesFirst;\n\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].priority = priority;\n            item = items[j];\n            items.sort(sortingFunction);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].priority = priority;\n              items.sort(sortingFunction);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemPriority\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      priority: priority,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemDescription(listName, itemID, description) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].description = description;\n            item = items[j];\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].description = description;\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemDescription\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      description: description,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  handleLogOut() {\n    // delete the cookie\n    cookies.remove(\"DoozyLogin\");\n\n    // const bgURL = getRandomBGURL();\n\n    // reset state back to start\n    this.setState({\n      docTitle: \"Log in | Doozy\",\n      loggedIn: \"not yet\",\n      registered: \"not yet\",\n      loginOrRegister: \"login\",\n      lists: [],\n      username: \"\",\n      currentlySelectedListIndex: 0,\n      currentlySelectedListName: \"\",\n      currentlySelectedItemID: \"\",\n      // bgURL: bgURL,\n      firstName: \"\",\n      lastName: \"\",\n      loaded: false,\n    });\n  }\n\n  createEmptyList(listName, color) {\n    var list = { name: listName, color: color, items: [] };\n    var lists = this.state.lists.slice();\n    lists.splice(lists.length - 3, 0, list);\n    this.setState({\n      lists: lists,\n      currentlySelectedListIndex: lists.length - 4,\n      currentlySelectedListName: listName,\n    });\n\n    const url = domain + \"/createEmptyList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n      color: color,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  focusAddListOverlayTitleInput() {\n    this.addListTitleRef.current.focus();\n  }\n\n  focusEditListOverlayTitleInput() {\n    this.editListTitleRef.current.focus();\n  }\n\n  deleteList(listName) {\n    var idx = -1;\n    var lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++)\n      if (lists[i].name === listName) {\n        idx = i;\n        break;\n      }\n    lists.splice(idx, 1);\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({\n      lists: lists,\n      currentlySelectedItemID: \"\",\n      currentlySelectedListIndex: idx - 1 >= 0 ? idx - 1 : 2,\n      currentlySelectedListName:\n        idx - 1 >= 0 ? lists[idx - 1].name : lists[2].name,\n    });\n\n    const url = domain + \"/deleteList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  editList(oldName, newName, color) {\n    var lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === oldName) {\n        lists[i].name = newName;\n        lists[i].color = color;\n        var items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          items[j].originalList = newName;\n          items[j].color = color;\n        }\n        break;\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/editList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      oldName: oldName,\n      newName: newName,\n      color: color,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  handleDisplayNotification() {\n    this.setState({ notificationDisplaying: true });\n    setTimeout(() => {\n      this.setState({ notificationDisplaying: false });\n    }, 4000);\n  }\n\n  handleShowAddListOverlay() {\n    this.setState({ addListOverlayDisplaying: true });\n    $(\".add-list-overlay-color-selected\").removeClass(\n      \".add-list-overlay-color-selected\"\n    );\n    this.addListTitleRef.current.value = \"\";\n    setTimeout(() => {\n      this.addListTitleRef.current.focus();\n    }, 500);\n  }\n\n  handleShowEditListOverlay(listName, color) {\n    this.setState({\n      editListOverlayDisplaying: true,\n      editListColor: color,\n      editListName: listName,\n    });\n\n    this.editListTitleRef.current.value = listName;\n\n    setTimeout(() => {\n      this.editListTitleRef.current.focus();\n    }, 500);\n  }\n\n  handleShowSettingsOverlay() {\n    this.setState({ settingsOverlayDisplaying: true });\n\n    setTimeout(() => {\n      this.settingsRef.current.focus();\n    }, 500);\n  }\n\n  handleHideAddListOverlay() {\n    this.setState({ addListOverlayDisplaying: false });\n  }\n\n  handleHideEditListOverlay() {\n    this.setState({\n      editListOverlayDisplaying: false,\n      editListColor: \"\",\n      editListName: \"\",\n    });\n  }\n\n  setBackgroundSetting(background) {\n    this.setState({\n      background: background,\n      bgURL: 'url(\"' + background + '\")',\n    });\n  }\n\n  setKeywordsSetting(keywordsEnabled) {\n    this.setState({ keywords: keywordsEnabled });\n\n    const url = domain + \"/setKeywordSetting\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      keywords: keywordsEnabled,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setSortingSetting(sortingType) {\n    this.setState({ sorting: sortingType });\n\n    const url = domain + \"/setSortingSetting\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      sorting: sortingType,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    }).then(() => {\n      this.getLists(\n        this.state.currentlySelectedListName,\n        this.state.currentlySelectedListIndex\n      );\n    });\n  }\n\n  render() {\n    document.title = this.state.docTitle;\n\n    const listArr = this.state.lists.slice(\n      this.state.currentlySelectedListIndex,\n      this.state.currentlySelectedListIndex + 1\n    );\n\n    var lastDeletedItemTitle = \"\";\n    if (this.state.lastDeletedItem !== undefined)\n      lastDeletedItemTitle = this.state.lastDeletedItem.title;\n\n    const selectedItem = this.getCurrentlySelectedItem();\n    const appClasses =\n      \"row align-items-center\" +\n      (this.state.loggedIn === \"successful\" ? \"\" : \" d-none\");\n    const loginRegClasses =\n      \"container-fluid align-items-center\" +\n      (this.state.loggedIn === \"successful\" ? \" d-none\" : \" d-flex \");\n\n    return (\n      <>\n        <div\n          id=\"login-register\"\n          style={{ backgroundImage: this.state.bgURL }}\n          className={loginRegClasses}\n        >\n          <div\n            className={\n              \"login-section\" +\n              (this.state.loginOrRegister === \"login\" ? \"\" : \" d-none\")\n            }\n          >\n            <Login\n              loginInfo={this.state.loggedIn}\n              verifyLogin={(username, password, authType) =>\n                this.verifyLogin(username, password, authType)\n              }\n              createAccount={(email, fName, lName, password, authType) =>\n                this.createAccount(email, fName, lName, password, authType)\n              }\n              switchToRegister={() => this.toggleLoginRegister()}\n            />\n          </div>\n          <div\n            className={\n              \"register-section\" +\n              (this.state.loginOrRegister === \"register\" ? \"\" : \" d-none\")\n            }\n          >\n            <Register\n              switchToLogin={() => this.toggleLoginRegister()}\n              verifyLogin={(username, password, authType) =>\n                this.verifyLogin(username, password, authType)\n              }\n              createAccount={(email, fName, lName, password, authType) =>\n                this.createAccount(email, fName, lName, password, authType)\n              }\n              registerInfo={this.state.registered}\n            />\n          </div>\n        </div>\n        <div\n          id=\"app\"\n          style={{ backgroundImage: this.state.bgURL }}\n          className={appClasses}\n          onKeyDown={(e) => {\n            if (e.keyCode === 27) {\n              if (this.state.addListOverlayDisplaying)\n                this.setState({ addListOverlayDisplaying: false });\n              else if (this.state.settingsOverlayDisplaying)\n                this.setState({ settingsOverlayDisplaying: false });\n              else if (this.state.editListOverlayDisplaying)\n                this.setState({ editListOverlayDisplaying: false });\n            }\n          }}\n        >\n          <AddListOverlay\n            id=\"addListOverlay\"\n            displaying={this.state.addListOverlayDisplaying}\n            addListTitleRef={this.addListTitleRef}\n            lists={this.state.lists}\n            hideOverlay={() => this.handleHideAddListOverlay()}\n            createList={(listName, color) =>\n              this.createEmptyList(listName, color)\n            }\n            focusTitleInput={() => this.focusAddListOverlayTitleInput()}\n          />\n          <EditListOverlay\n            id=\"editListOverlay\"\n            displaying={this.state.editListOverlayDisplaying}\n            editListTitleRef={this.editListTitleRef}\n            lists={this.state.lists}\n            hideOverlay={() => this.handleHideEditListOverlay()}\n            focusTitleInput={() => this.focusEditListOverlayTitleInput()}\n            startingName={this.state.editListName}\n            startingColor={this.state.editListColor}\n            editList={(oldName, newName, color) =>\n              this.editList(oldName, newName, color)\n            }\n          />\n          <SettingsOverlay\n            settingsRef={this.settingsRef}\n            displaying={this.state.settingsOverlayDisplaying}\n            sorting={this.state.sorting}\n            keywords={this.state.keywords}\n            background={this.state.background}\n            setKeywordsSetting={(keywords) => this.setKeywordsSetting(keywords)}\n            setSortingSetting={(sorting) => this.setSortingSetting(sorting)}\n            setBackgroundSetting={(bg) => this.setBackgroundSetting(bg)}\n            hideSettingsOverlay={() =>\n              this.setState({ settingsOverlayDisplaying: false })\n            }\n          />\n          <Notification\n            displaying={this.state.notificationDisplaying}\n            hideNotification={() =>\n              this.setState({ notificationDisplaying: false })\n            }\n            title={lastDeletedItemTitle}\n            undo={() => {\n              if (this.state.lastDeletedItem.itemID !== undefined) {\n                this.addListItem(\n                  this.state.lastDeletedItem.originalList,\n                  this.state.lastDeletedItem.title,\n                  this.state.lastDeletedItem.dueDate,\n                  this.state.lastDeletedItem.description,\n                  this.state.lastDeletedItem.priority,\n                  this.state.lastDeletedItem.color,\n                  this.state.lastDeletedItem.itemID,\n                  this.state.lastDeletedItem.completed\n                );\n              }\n            }}\n            listName={this.state.lastDeletedItemListName}\n            originalList={this.state.lastDeletedItem.originalList}\n          />\n          <div id=\"sidebar\" className=\"p-0\">\n            <Sidebar\n              username={this.state.username}\n              lists={this.state.lists}\n              firstName={this.state.firstName}\n              lastName={this.state.lastName}\n              currentlySelectedListName={this.state.currentlySelectedListName}\n              setSelectedList={(listName) => this.setSelectedList(listName)}\n              showAddListOverlay={() => this.handleShowAddListOverlay()}\n              deleteList={(listName) => this.deleteList(listName)}\n              showEditListOverlay={(listName, color) =>\n                this.handleShowEditListOverlay(listName, color)\n              }\n            />\n          </div>\n          {listArr.map((list, i) => {\n            return (\n              <React.Fragment key={list.name}>\n                <div id=\"todolist\" className=\"col-5\">\n                  <Todolist\n                    color={list.color}\n                    name={list.name}\n                    items={list.items}\n                    keywords={this.state.keywords}\n                    addListItem={(\n                      listName,\n                      title,\n                      dueDate,\n                      description,\n                      priority,\n                      color\n                    ) =>\n                      this.addListItem(\n                        listName,\n                        title,\n                        dueDate,\n                        description,\n                        priority,\n                        color\n                      )\n                    }\n                    deleteListItem={(listName, itemID, originalList) =>\n                      this.deleteListItem(listName, itemID, originalList)\n                    }\n                    setItemTitle={(listName, itemID, title) =>\n                      this.setItemTitle(listName, itemID, title)\n                    }\n                    setItemCompleted={(listName, itemID, completed) =>\n                      this.setItemCompleted(listName, itemID, completed)\n                    }\n                    setSelectedItem={(itemID) => this.setSelectedItem(itemID)}\n                    selectedItemID={this.state.currentlySelectedItemID}\n                    hideAddListOverlay={() => this.handleHideAddListOverlay()}\n                  />\n                </div>\n                <div id=\"details\" className=\"col-4\">\n                  <Details\n                    listName={list.name}\n                    selectedItemID={selectedItem.itemID}\n                    selectedItemColor={selectedItem.color}\n                    selectedItemList={selectedItem.originalList}\n                    selectedItemTitle={selectedItem.title}\n                    selectedItemDueDate={selectedItem.dueDate}\n                    selectedItemDescription={selectedItem.description}\n                    selectedItemPriority={selectedItem.priority}\n                    selectedItemCompleted={selectedItem.completed}\n                    setItemTitle={(listName, itemID, title) =>\n                      this.setItemTitle(listName, itemID, title)\n                    }\n                    setItemCompleted={(listName, itemID, completed) =>\n                      this.setItemCompleted(listName, itemID, completed)\n                    }\n                    setItemDueDate={(listName, itemID, dueDate) =>\n                      this.setItemDueDate(listName, itemID, dueDate)\n                    }\n                    setItemPriority={(listName, itemID, priority) =>\n                      this.setItemPriority(listName, itemID, priority)\n                    }\n                    setItemDescription={(listName, itemID, description) =>\n                      this.setItemDescription(listName, itemID, description)\n                    }\n                    handleDelete={(listName, itemID, originalList) =>\n                      this.deleteListItem(listName, itemID, originalList)\n                    }\n                    hideAddListOverlay={() => this.handleHideAddListOverlay()}\n                  />\n                </div>\n                <div className=\"col-1\"></div>\n                <div id=\"toolbar\" className=\"row col-1 justify-content-center\">\n                  <Toolbar\n                    handleLogOut={() => this.handleLogOut()}\n                    deleteAllCompletedItems={() => {\n                      this.deleteAllCompletedItems(\n                        this.state.currentlySelectedListName\n                      );\n                    }}\n                    currentlySelectedListName={\n                      this.state.currentlySelectedListName\n                    }\n                    handleShowSettingsOverlay={() =>\n                      this.handleShowSettingsOverlay()\n                    }\n                  />\n                </div>\n              </React.Fragment>\n            );\n          })}\n        </div>\n      </>\n    );\n  }\n}\n\nfunction sortListItemsDatesFirst(a, b) {\n  if (a.completed && !b.completed) return 1;\n  else if (!a.completed && b.completed) return -1;\n  else if (a.dueDate === \"\" && b.dueDate !== \"\") return 1;\n  else if (a.dueDate !== \"\" && b.dueDate === \"\") return -1;\n  else {\n    // both are either completed or incomplete or have a due date set or no due date set\n    if (a.dueDate === b.dueDate) {\n      // sort items due on the same day by priority\n      const priorities = [\"low\", \"medium\", \"high\"];\n      const priorityA = priorities.indexOf(a.priority);\n      const priorityB = priorities.indexOf(b.priority);\n\n      if (priorityA !== priorityB) return priorityB - priorityA;\n      else {\n        // sort by itemID\n        const itemIDA = a.itemID;\n        const itemIDB = b.itemID;\n        return itemIDA - itemIDB;\n      }\n    } else {\n      // sort items based on date\n      const dateA = new Date(a.dueDate + \" 00:00\");\n      const dateB = new Date(b.dueDate + \" 00:00\");\n      return dateA - dateB;\n    }\n  }\n}\n\nfunction sortListItemsPrioritiesFirst(a, b) {\n  if (a.completed && !b.completed) return 1;\n  else if (!a.completed && b.completed) return -1;\n  else {\n    // sort items by priority first\n    const priorities = [\"low\", \"medium\", \"high\"];\n    const priorityA = priorities.indexOf(a.priority);\n    const priorityB = priorities.indexOf(b.priority);\n    // if they have the same priority, sort by due date\n    if (priorityB === priorityA) {\n      if (a.dueDate === \"\" && b.dueDate !== \"\") return 1;\n      else if (a.dueDate !== \"\" && b.dueDate === \"\") return -1;\n\n      // sort items based on due date\n      const dateA = new Date(a.dueDate + \" 00:00\");\n      const dateB = new Date(b.dueDate + \" 00:00\");\n\n      if (a.dueDate !== b.dueDate) return dateA - dateB;\n      else {\n        // sort by itemID\n        const itemIDA = a.itemID;\n        const itemIDB = b.itemID;\n        return itemIDA - itemIDB;\n      }\n    } else return priorityB - priorityA;\n  }\n}\n\nfunction ValidateEmail(mail) {\n  if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n    return true;\n  }\n  return false;\n}\n\nfunction getRandomBGURL() {\n  // visit https://freeimage.host/ to host more background images\n  const backgroundURLs = [\n    \"https://iili.io/J4xbBS.jpg\",\n    \"https://iili.io/J4xtQ2.jpg\",\n    \"https://iili.io/J4z92e.jpg\",\n    \"https://iili.io/J4zdpj.jpg\",\n    \"https://iili.io/J4zJkb.jpg\",\n    \"https://iili.io/J4zWZl.jpg\",\n    \"https://iili.io/J4Weln.jpg\",\n    \"https://iili.io/J4WhoN.jpg\",\n    \"https://iili.io/J4WOKX.jpg\",\n    \"https://iili.io/J4WUN4.jpg\",\n    \"https://iili.io/J4WgDl.jpg\",\n    \"https://iili.io/J4WmDQ.jpg\",\n    \"https://iili.io/J4X9WB.jpg\",\n    \"https://iili.io/J4XHiP.jpg\",\n    \"https://iili.io/J4WyxV.jpg\",\n    \"https://iili.io/JPNuGR.jpg\",\n    \"https://iili.io/JPN53N.jpg\",\n    \"https://iili.io/JPNTCv.jpg\",\n    \"https://iili.io/JiKSp4.jpg\",\n    \"https://iili.io/Jszxun.jpg\",\n    \"https://iili.io/JszAG4.jpg\",\n    \"https://iili.io/JszIZG.jpg\",\n    \"https://iili.io/Jszzjs.jpg\",\n    \"https://iili.io/Jszunf.jpg\",\n  ];\n  var currBackground = Math.floor(\n    Math.random() * Math.floor(backgroundURLs.length)\n  );\n\n  return 'url(\"' + backgroundURLs[currBackground] + '\")';\n}\n\nfunction dateToStr(date) {\n  var day = date.getDate();\n  if (day < 10) day = \"0\" + day.toString();\n\n  var month = date.getMonth() + 1;\n  if (month < 10) month = \"0\" + month.toString();\n\n  var year = date.getFullYear().toString();\n\n  var formatted = year + \"-\" + month + \"-\" + day;\n\n  return formatted;\n}\n\nfunction checkIfNext7Days(dateStr) {\n  var curr = new Date();\n  for (let i = 0; i < 7; i++) {\n    var d = dateToStr(curr);\n    if (dateStr === d) return true;\n    curr.setDate(curr.getDate() + 1);\n  }\n\n  d = dateToStr(curr);\n  if (dateStr === d) return true;\n\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}