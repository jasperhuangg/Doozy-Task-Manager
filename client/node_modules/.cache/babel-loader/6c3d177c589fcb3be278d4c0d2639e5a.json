{"ast":null,"code":"var _jsxFileName = \"/Users/jasper.huang/Desktop/Personal_Projects/mern-todolist/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport Todolist from \"./todolist/Todolist.js\";\nimport Details from \"./todolist/Details.js\";\nconst domain = \"http://localhost:9000\";\n\nvar ObjectID = require(\"bson-objectid\");\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      error: null,\n      lists: [],\n      currentlySelectedList: 0,\n      currentlySelectedItemID: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getLists();\n  }\n\n  setSelectedItem(itemID) {\n    this.setState({\n      currentlySelectedItemID: itemID\n    });\n  }\n\n  getCurrentlySelectedItem() {\n    if (this.state.currentlySelectedItemID === \"\") return {\n      title: \"\",\n      description: \"\",\n      dueDate: \"\",\n      priority: \"\",\n      completed: false,\n      itemID: \"\"\n    };\n    var items = this.state.lists.slice(this.state.currentlySelectedList)[0].items;\n\n    for (let i = 0; i < items.length; i++) if (items[i].itemID === this.state.currentlySelectedItemID) return items[i];\n  } // for now assume we are getting the user's username from the props\n  // that are being passed in by a Login component (to be created)\n\n\n  getLists() {\n    const url = domain + \"/getLists\";\n    const body = JSON.stringify({\n      username: \"Jasper\"\n      /*this.props.username*/\n\n    });\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: body\n    }).then(res => res.json()).then(res => {\n      var lists = res;\n      this.setState({\n        lists: lists,\n        isLoaded: true\n      });\n    });\n  }\n\n  addListItem(listName, title, dueDate, description, priority) {\n    const lists = this.state.lists.slice();\n    var objID = null;\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        var item = {\n          title: title,\n          description: description,\n          dueDate: dueDate,\n          priority: priority,\n          completed: false,\n          itemID: new ObjectID().toString()\n        };\n        items.push(item);\n        objID = item.itemID;\n        items.sort(sortListItems);\n        break;\n      }\n    }\n\n    this.setState({\n      lists: lists\n    });\n    const url = domain + \"/addListItem\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      title: title,\n      dueDate: dueDate,\n      description: description,\n      priority: priority,\n      itemID: objID\n    });\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: body\n    });\n  }\n\n  deleteListItem(listName, itemID) {\n    const lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        var items = lists[i].items;\n        var idx = -1;\n\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            idx = j;\n            break;\n          }\n        }\n\n        items = items.splice(idx, 1);\n      }\n    }\n\n    this.setState({\n      lists: lists\n    });\n    const url = domain + \"/deleteListItem\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID\n    });\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: body\n    });\n  }\n\n  setItemTitle(listName, itemID, title) {\n    const lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].title = title;\n            break;\n          }\n        }\n\n        break;\n      }\n    }\n\n    this.setState({\n      lists: lists\n    });\n    const url = domain + \"/setItemTitle\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID,\n      title: title\n    });\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: body\n    });\n  }\n\n  setItemCompleted(listName, itemID, completed) {\n    const lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].completed = completed;\n            items.sort(sortListItems);\n            break;\n          }\n        }\n\n        break;\n      }\n    }\n\n    this.setState({\n      lists: lists\n    });\n    const url = domain + \"/setItemCompleted\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID,\n      completed: completed\n    });\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: body\n    });\n  }\n\n  setListName(oldListName, newListName) {}\n\n  setItemDueDate(dueDate) {}\n\n  setItemPriority(priority) {}\n\n  setItemDescription(description) {}\n\n  render() {\n    const listArr = this.state.lists.slice(this.state.currentlySelectedList, 1);\n    console.log(\"currently selected: \" + this.state.currentlySelectedItemID);\n    const selectedItem = this.getCurrentlySelectedItem();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"sidebar\",\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"todolist\",\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }, listArr.map((list, i) => /*#__PURE__*/React.createElement(Todolist, {\n      key: list.name,\n      color: list.color,\n      name: list.name,\n      items: list.items,\n      addListItem: (listName, title, dueDate, description, priority) => this.addListItem(listName, title, dueDate, description, priority),\n      deleteListItem: (listName, itemID) => this.deleteListItem(listName, itemID),\n      setItemTitle: (listName, itemID, title) => this.setItemTitle(listName, itemID, title),\n      setItemCompleted: (listName, itemID, completed) => this.setItemCompleted(listName, itemID, completed),\n      setItemDueDate: (listName, itemID, dueDate) => this.setItemDueDate(listName, itemID, dueDate),\n      setItemPriority: (listName, itemID, priority) => this.setItemPriority(listName, itemID, priority),\n      setSelectedItem: itemID => this.setSelectedItem(itemID),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"details\",\n      className: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Details, {\n      selectedItemID: selectedItem.itemID,\n      selectedItemTitle: selectedItem.title,\n      selectedItemDueDate: selectedItem.duedate,\n      selectedItemDescription: selectedItem.description,\n      selectedItemPriority: selectedItem.priority,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nfunction sortListItems(a, b) {\n  if (a.completed && !b.completed) return 1;else if (!a.completed && b.completed) return -1;else if (a.dueDate === \"\" && b.dueDate !== \"\") return 1;else if (a.dueDate !== \"\" && b.dueDate === \"\") return -1;else {\n    // both are either completed or incomplete or have a due date set or no due date set\n    if (a.dueDate === b.dueDate) {\n      // sort items due on the same day by priority\n      const priorities = [\"low\", \"medium\", \"high\"];\n      const priorityA = priorities.indexOf(a.priority);\n      const priorityB = priorities.indexOf(b.priority);\n      if (priorityA !== priorityB) return priorityB - priorityA;else {\n        // sort by itemID\n        const itemIDA = a.itemID;\n        const itemIDB = b.itemID;\n        return itemIDA - itemIDB;\n      }\n    } else {\n      // sort items based on date\n      const dateA = new Date(a.dueDate + \" 00:00\");\n      const dateB = new Date(b.dueDate + \" 00:00\");\n      return dateA - dateB;\n    }\n  }\n}","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/mern-todolist/client/src/App.js"],"names":["React","Component","Todolist","Details","domain","ObjectID","require","App","constructor","props","state","isLoaded","error","lists","currentlySelectedList","currentlySelectedItemID","componentDidMount","getLists","setSelectedItem","itemID","setState","getCurrentlySelectedItem","title","description","dueDate","priority","completed","items","slice","i","length","url","body","JSON","stringify","username","fetch","method","headers","then","res","json","addListItem","listName","objID","name","item","toString","push","sort","sortListItems","deleteListItem","idx","j","splice","setItemTitle","setItemCompleted","setListName","oldListName","newListName","setItemDueDate","setItemPriority","setItemDescription","render","listArr","console","log","selectedItem","map","list","color","duedate","a","b","priorities","priorityA","indexOf","priorityB","itemIDA","itemIDB","dateA","Date","dateB"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Todolist from \"./todolist/Todolist.js\";\nimport Details from \"./todolist/Details.js\";\n\nconst domain = \"http://localhost:9000\";\nvar ObjectID = require(\"bson-objectid\");\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      error: null,\n      lists: [],\n      currentlySelectedList: 0,\n      currentlySelectedItemID: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getLists();\n  }\n\n  setSelectedItem(itemID) {\n    this.setState({ currentlySelectedItemID: itemID });\n  }\n\n  getCurrentlySelectedItem() {\n    if (this.state.currentlySelectedItemID === \"\")\n      return {\n        title: \"\",\n        description: \"\",\n        dueDate: \"\",\n        priority: \"\",\n        completed: false,\n        itemID: \"\",\n      };\n\n    var items = this.state.lists.slice(this.state.currentlySelectedList)[0]\n      .items;\n\n    for (let i = 0; i < items.length; i++)\n      if (items[i].itemID === this.state.currentlySelectedItemID)\n        return items[i];\n  }\n\n  // for now assume we are getting the user's username from the props\n  // that are being passed in by a Login component (to be created)\n  getLists() {\n    const url = domain + \"/getLists\";\n    const body = JSON.stringify({\n      username: \"Jasper\" /*this.props.username*/,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        var lists = res;\n        this.setState({ lists: lists, isLoaded: true });\n      });\n  }\n\n  addListItem(listName, title, dueDate, description, priority) {\n    const lists = this.state.lists.slice();\n    var objID = null;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        var item = {\n          title: title,\n          description: description,\n          dueDate: dueDate,\n          priority: priority,\n          completed: false,\n          itemID: new ObjectID().toString(),\n        };\n        items.push(item);\n        objID = item.itemID;\n        items.sort(sortListItems);\n        break;\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/addListItem\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      title: title,\n      dueDate: dueDate,\n      description: description,\n      priority: priority,\n      itemID: objID,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: body,\n    });\n  }\n\n  deleteListItem(listName, itemID) {\n    const lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        var items = lists[i].items;\n        var idx = -1;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            idx = j;\n            break;\n          }\n        }\n        items = items.splice(idx, 1);\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/deleteListItem\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: body,\n    });\n  }\n\n  setItemTitle(listName, itemID, title) {\n    const lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].title = title;\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemTitle\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID,\n      title: title,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: body,\n    });\n  }\n\n  setItemCompleted(listName, itemID, completed) {\n    const lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].completed = completed;\n            items.sort(sortListItems);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemCompleted\";\n    const body = JSON.stringify({\n      username: \"Jasper\",\n      listName: listName,\n      itemID: itemID,\n      completed: completed,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: body,\n    });\n  }\n\n  setListName(oldListName, newListName) {}\n\n  setItemDueDate(dueDate) {}\n\n  setItemPriority(priority) {}\n\n  setItemDescription(description) {}\n\n  render() {\n    const listArr = this.state.lists.slice(this.state.currentlySelectedList, 1);\n\n    console.log(\"currently selected: \" + this.state.currentlySelectedItemID);\n\n    const selectedItem = this.getCurrentlySelectedItem();\n\n    return (\n      <div className=\"container-fluid row\">\n        <div id=\"sidebar\" className=\"col-2\"></div>\n        <div id=\"todolist\" className=\"col-6\">\n          {listArr.map((list, i) => (\n            <Todolist\n              key={list.name}\n              color={list.color}\n              name={list.name}\n              items={list.items}\n              addListItem={(listName, title, dueDate, description, priority) =>\n                this.addListItem(\n                  listName,\n                  title,\n                  dueDate,\n                  description,\n                  priority\n                )\n              }\n              deleteListItem={(listName, itemID) =>\n                this.deleteListItem(listName, itemID)\n              }\n              setItemTitle={(listName, itemID, title) =>\n                this.setItemTitle(listName, itemID, title)\n              }\n              setItemCompleted={(listName, itemID, completed) =>\n                this.setItemCompleted(listName, itemID, completed)\n              }\n              setItemDueDate={(listName, itemID, dueDate) =>\n                this.setItemDueDate(listName, itemID, dueDate)\n              }\n              setItemPriority={(listName, itemID, priority) =>\n                this.setItemPriority(listName, itemID, priority)\n              }\n              setSelectedItem={(itemID) => this.setSelectedItem(itemID)}\n            />\n          ))}\n        </div>\n        <div id=\"details\" className=\"col-4\">\n          <Details\n            selectedItemID={selectedItem.itemID}\n            selectedItemTitle={selectedItem.title}\n            selectedItemDueDate={selectedItem.duedate}\n            selectedItemDescription={selectedItem.description}\n            selectedItemPriority={selectedItem.priority}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction sortListItems(a, b) {\n  if (a.completed && !b.completed) return 1;\n  else if (!a.completed && b.completed) return -1;\n  else if (a.dueDate === \"\" && b.dueDate !== \"\") return 1;\n  else if (a.dueDate !== \"\" && b.dueDate === \"\") return -1;\n  else {\n    // both are either completed or incomplete or have a due date set or no due date set\n    if (a.dueDate === b.dueDate) {\n      // sort items due on the same day by priority\n      const priorities = [\"low\", \"medium\", \"high\"];\n      const priorityA = priorities.indexOf(a.priority);\n      const priorityB = priorities.indexOf(b.priority);\n\n      if (priorityA !== priorityB) return priorityB - priorityA;\n      else {\n        // sort by itemID\n        const itemIDA = a.itemID;\n        const itemIDB = b.itemID;\n        return itemIDA - itemIDB;\n      }\n    } else {\n      // sort items based on date\n      const dateA = new Date(a.dueDate + \" 00:00\");\n      const dateB = new Date(b.dueDate + \" 00:00\");\n      return dateA - dateB;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}