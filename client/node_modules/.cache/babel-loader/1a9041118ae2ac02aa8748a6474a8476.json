{"ast":null,"code":"import _classCallCheck from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./Login-Register.css\";import{GoogleLogin}from\"react-google-login\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.handleGoogleOAuth=function(response){var username=response.profileObj.email;var firstName=response.profileObj.givenName;var lastName=response.profileObj.lastName;var password=_this.hashGoogleInfo(response);// add some sort of hashing function to this\nvar domain=\"http://localhost:9000\";var url=domain+\"/accountExists\";var body=JSON.stringify({username:username});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){if(res)_this.props.verifyLogin(username,password);else _this.props.createAccount(username,firstName,lastName,password,\"Google\");});};_this.state={email:\"\",password:\"\",firstName:\"\",lastName:\"\"};_this.passwordInput=React.createRef();return _this;}_createClass(Register,[{key:\"handleEmailChange\",value:function handleEmailChange(e){this.setState({email:e.target.value});}},{key:\"handleFirstNameChange\",value:function handleFirstNameChange(e){this.setState({firstName:e.target.value});}},{key:\"handleLastNameChange\",value:function handleLastNameChange(e){this.setState({lastName:e.target.value});}},{key:\"handlePasswordChange\",value:function handlePasswordChange(e){this.setState({password:e.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(){var email=this.state.email;var firstName=this.state.firstName;var lastName=this.state.lastName;var password=this.state.password;this.props.createAccount(email,firstName,lastName,password,\"Conventional\");}},{key:\"handleKeyDown\",value:function handleKeyDown(e){if(e.keyCode===13){this.handleSubmit();}}},{key:\"reverseStr\",value:function reverseStr(str){if(str===\"\"||str===undefined||str===null)return\"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";return str.split(\"\").reverse().join(\"\");}},{key:\"hashGoogleInfo\",value:function hashGoogleInfo(responseObj){var profileObj=responseObj.profileObj;var firstName=this.reverseStr(profileObj.givenName);var lastName=this.reverseStr(profileObj.familyName);var googleId=this.reverseStr(profileObj.googleId);var email=this.reverseStr(profileObj.email);var rand1=\"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";var rand2=\"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";var rand3=\"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";var rand4=\"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";var rand5=\"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";return rand1+firstName+rand2+lastName+rand3+googleId+rand4+email+rand5;}},{key:\"render\",value:function render(){var _this2=this;var warningMessage=\"\";var emptyFields=new Array(4).fill(false);if(this.props.registerInfo===\"username already exists\")warningMessage=\"An account with that email already exists. \";else if(this.props.registerInfo===\"invalid email\")warningMessage=\"Please enter a valid email address.\";else if(this.props.registerInfo===\"password length\")warningMessage=\"Password must be at least 6 characters.\";else if(this.props.registerInfo===\"empty field(s)\"){warningMessage=\"Please fill in all fields.\";emptyFields[0]=this.state.email===\"\";emptyFields[1]=this.state.firstName===\"\";emptyFields[2]=this.state.lastName===\"\";emptyFields[3]=this.state.password===\"\";}var emailInputHighlighted=this.props.registerInfo===\"username already exists\"||this.props.registerInfo===\"invalid email\"||emptyFields[0];var firstNameInputHighlighted=emptyFields[1];var lastNameInputHighlighted=emptyFields[2];var passwordInputHighlighted=this.props.registerInfo===\"password length\"||emptyFields[3];return/*#__PURE__*/React.createElement(\"div\",{className:\"Register py-5 px-4\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-left\",style:{fontWeight:\"600\"}},\"Create your account\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"google-btn google-btn-lg\",style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"google-icon-wrapper\"},/*#__PURE__*/React.createElement(\"img\",{className:\"google-icon\",alt:\"\",src:\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"google-button-text\"},/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/React.createElement(\"a\",{onClick:renderProps.onClick,disabled:renderProps.disabled,className:\"btn-text no-bg-no-borders text-white text-center\"},\"Sign up with Google\");},buttonText:\"Sign Up with Google\",onSuccess:this.handleGoogleOAuth,onFailure:function onFailure(){// alert(\"Google OAuth Failed.\");\n},cookiePolicy:\"single_host_origin\"})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"or-separator my-2 w-100 text-center font-grey\"},/*#__PURE__*/React.createElement(\"span\",{className:\"px-1\"},\"or\")),/*#__PURE__*/React.createElement(\"div\",{className:\"font-small-login-reg text-danger py-2\"+(warningMessage===\"\"?\" d-none\":\"\")},warningMessage),/*#__PURE__*/React.createElement(\"form\",{className:\"font-grey font-small-login-reg\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-email-input\",style:{fontWeight:\"500\"}},\"Email Address\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-sm mb-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control form-control-sm\"+(emailInputHighlighted?\" border-danger\":\"\"),id:\"login-email-input\",\"aria-describedby\":\"emailHelp\",onChange:function onChange(e){return _this2.handleEmailChange(e);}})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-firstName-input\",style:{fontWeight:\"500\"}},\"First Name\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-sm mb-3\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control form-control-sm \"+(firstNameInputHighlighted?\" border-danger\":\"\"),id:\"login-firstName-input\",\"aria-describedby\":\"emailHelp\",onChange:function onChange(e){return _this2.handleFirstNameChange(e);}})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-lastName-input\",style:{fontWeight:\"500\"}},\"Last Name\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-sm mb-3\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control form-control-sm\"+(lastNameInputHighlighted?\" border-danger\":\"\"),id:\"login-lastName-input\",\"aria-describedby\":\"emailHelp\",onChange:function onChange(e){return _this2.handleLastNameChange(e);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-password-input\",style:{fontWeight:\"500\"}},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control form-control-sm\"+(passwordInputHighlighted?\" border-danger\":\"\"),id:\"login-password-input\",onChange:function onChange(e){return _this2.handlePasswordChange(e);},onKeyDown:function onKeyDown(e){return _this2.handleKeyDown(e);},ref:this.passwordInput})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary px-4 font-small-login-reg\",type:\"button\",onClick:function onClick(){return _this2.handleSubmit();}},\"Sign Up\"),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-3 font-small-login-reg\"},\"Already have an account?\",\" \",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){_this2.props.switchToLogin();},className:\"text-primary toggle-prompt-text\",style:{cursor:\"pointer\"}},\"Log In\"))));}}]);return Register;}(Component);export{Register as default};","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/todolist/Register.js"],"names":["React","Component","GoogleLogin","Register","props","handleGoogleOAuth","response","username","profileObj","email","firstName","givenName","lastName","password","hashGoogleInfo","domain","url","body","JSON","stringify","fetch","method","headers","then","res","json","verifyLogin","createAccount","state","passwordInput","createRef","e","setState","target","value","keyCode","handleSubmit","str","undefined","split","reverse","join","responseObj","reverseStr","familyName","googleId","rand1","rand2","rand3","rand4","rand5","warningMessage","emptyFields","Array","fill","registerInfo","emailInputHighlighted","firstNameInputHighlighted","lastNameInputHighlighted","passwordInputHighlighted","fontWeight","cursor","renderProps","onClick","disabled","handleEmailChange","handleFirstNameChange","handleLastNameChange","handlePasswordChange","handleKeyDown","switchToLogin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Login-Register.css\";\nimport { GoogleLogin } from \"react-google-login\";\n\nexport default class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n    };\n    this.passwordInput = React.createRef();\n  }\n\n  handleEmailChange(e) {\n    this.setState({ email: e.target.value });\n  }\n\n  handleFirstNameChange(e) {\n    this.setState({ firstName: e.target.value });\n  }\n\n  handleLastNameChange(e) {\n    this.setState({ lastName: e.target.value });\n  }\n\n  handlePasswordChange(e) {\n    this.setState({ password: e.target.value });\n  }\n\n  handleSubmit() {\n    const email = this.state.email;\n    const firstName = this.state.firstName;\n    const lastName = this.state.lastName;\n    const password = this.state.password;\n    this.props.createAccount(\n      email,\n      firstName,\n      lastName,\n      password,\n      \"Conventional\"\n    );\n  }\n\n  handleKeyDown(e) {\n    if (e.keyCode === 13) {\n      this.handleSubmit();\n    }\n  }\n\n  reverseStr(str) {\n    if (str === \"\" || str === undefined || str === null)\n      return \"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";\n    return str.split(\"\").reverse().join(\"\");\n  }\n\n  hashGoogleInfo(responseObj) {\n    const profileObj = responseObj.profileObj;\n\n    const firstName = this.reverseStr(profileObj.givenName);\n    const lastName = this.reverseStr(profileObj.familyName);\n    const googleId = this.reverseStr(profileObj.googleId);\n    const email = this.reverseStr(profileObj.email);\n\n    const rand1 =\n      \"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";\n    const rand2 =\n      \"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";\n    const rand3 =\n      \"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";\n    const rand4 =\n      \"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";\n    const rand5 =\n      \"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";\n\n    return (\n      rand1 +\n      firstName +\n      rand2 +\n      lastName +\n      rand3 +\n      googleId +\n      rand4 +\n      email +\n      rand5\n    );\n  }\n\n  handleGoogleOAuth = (response) => {\n    const username = response.profileObj.email;\n    const firstName = response.profileObj.givenName;\n    const lastName = response.profileObj.lastName;\n    const password = this.hashGoogleInfo(response); // add some sort of hashing function to this\n    const domain = \"http://localhost:9000\";\n    const url = domain + \"/accountExists\";\n    const body = JSON.stringify({\n      username: username,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res) this.props.verifyLogin(username, password);\n        else\n          this.props.createAccount(\n            username,\n            firstName,\n            lastName,\n            password,\n            \"Google\"\n          );\n      });\n  };\n\n  render() {\n    var warningMessage = \"\";\n    var emptyFields = new Array(4).fill(false);\n\n    if (this.props.registerInfo === \"username already exists\")\n      warningMessage = \"An account with that email already exists. \";\n    else if (this.props.registerInfo === \"invalid email\")\n      warningMessage = \"Please enter a valid email address.\";\n    else if (this.props.registerInfo === \"password length\")\n      warningMessage = \"Password must be at least 6 characters.\";\n    else if (this.props.registerInfo === \"empty field(s)\") {\n      warningMessage = \"Please fill in all fields.\";\n      emptyFields[0] = this.state.email === \"\";\n      emptyFields[1] = this.state.firstName === \"\";\n      emptyFields[2] = this.state.lastName === \"\";\n      emptyFields[3] = this.state.password === \"\";\n    }\n\n    const emailInputHighlighted =\n      this.props.registerInfo === \"username already exists\" ||\n      this.props.registerInfo === \"invalid email\" ||\n      emptyFields[0];\n    const firstNameInputHighlighted = emptyFields[1];\n    const lastNameInputHighlighted = emptyFields[2];\n    const passwordInputHighlighted =\n      this.props.registerInfo === \"password length\" || emptyFields[3];\n\n    return (\n      <div className=\"Register py-5 px-4\">\n        <h5 className=\"text-left\" style={{ fontWeight: \"600\" }}>\n          Create your account\n        </h5>\n        <br />\n        <br />\n        <div className=\"d-flex justify-content-center\">\n          <div\n            className=\"google-btn google-btn-lg\"\n            style={{ cursor: \"pointer\" }}\n          >\n            <div className=\"google-icon-wrapper\">\n              <img\n                className=\"google-icon\"\n                alt=\"\"\n                src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"\n              />\n            </div>\n            <div className=\"google-button-text\">\n              <GoogleLogin\n                clientId=\"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\"\n                render={(renderProps) => (\n                  <a\n                    onClick={renderProps.onClick}\n                    disabled={renderProps.disabled}\n                    className=\"btn-text no-bg-no-borders text-white text-center\"\n                  >\n                    Sign up with Google\n                  </a>\n                )}\n                buttonText=\"Sign Up with Google\"\n                onSuccess={this.handleGoogleOAuth}\n                onFailure={() => {\n                  // alert(\"Google OAuth Failed.\");\n                }}\n                cookiePolicy={\"single_host_origin\"}\n              />\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"or-separator my-2 w-100 text-center font-grey\">\n          <span className=\"px-1\">or</span>\n        </div>\n        <div\n          className={\n            \"font-small-login-reg text-danger py-2\" +\n            (warningMessage === \"\" ? \" d-none\" : \"\")\n          }\n        >\n          {warningMessage}\n        </div>\n        <form className=\"font-grey font-small-login-reg\">\n          <label htmlFor=\"login-email-input\" style={{ fontWeight: \"500\" }}>\n            Email Address{\" \"}\n          </label>\n          <div className=\"input-group input-group-sm mb-3\">\n            <input\n              type=\"email\"\n              className={\n                \"form-control form-control-sm\" +\n                (emailInputHighlighted ? \" border-danger\" : \"\")\n              }\n              id=\"login-email-input\"\n              aria-describedby=\"emailHelp\"\n              onChange={(e) => this.handleEmailChange(e)}\n            />\n          </div>\n          <label htmlFor=\"login-firstName-input\" style={{ fontWeight: \"500\" }}>\n            First Name{\" \"}\n          </label>\n          <div className=\"input-group input-group-sm mb-3\">\n            <br></br>\n            <input\n              type=\"text\"\n              className={\n                \"form-control form-control-sm \" +\n                (firstNameInputHighlighted ? \" border-danger\" : \"\")\n              }\n              id=\"login-firstName-input\"\n              aria-describedby=\"emailHelp\"\n              onChange={(e) => this.handleFirstNameChange(e)}\n            />\n          </div>\n          <label htmlFor=\"login-lastName-input\" style={{ fontWeight: \"500\" }}>\n            Last Name{\" \"}\n          </label>\n          <div className=\"input-group input-group-sm mb-3\">\n            <br></br>\n            <input\n              type=\"text\"\n              className={\n                \"form-control form-control-sm\" +\n                (lastNameInputHighlighted ? \" border-danger\" : \"\")\n              }\n              id=\"login-lastName-input\"\n              aria-describedby=\"emailHelp\"\n              onChange={(e) => this.handleLastNameChange(e)}\n            />\n          </div>\n          <div className={\"form-group\"}>\n            <label htmlFor=\"login-password-input\" style={{ fontWeight: \"500\" }}>\n              Password\n            </label>\n            <input\n              type=\"password\"\n              className={\n                \"form-control form-control-sm\" +\n                (passwordInputHighlighted ? \" border-danger\" : \"\")\n              }\n              id=\"login-password-input\"\n              onChange={(e) => this.handlePasswordChange(e)}\n              onKeyDown={(e) => this.handleKeyDown(e)}\n              ref={this.passwordInput}\n            />\n          </div>\n          <br />\n          <button\n            className=\"btn btn-primary px-4 font-small-login-reg\"\n            type=\"button\"\n            onClick={() => this.handleSubmit()}\n          >\n            {\"Sign Up\"}\n          </button>\n\n          <span className=\"ml-3 font-small-login-reg\">\n            Already have an account?{\" \"}\n            <span\n              onClick={() => {\n                this.props.switchToLogin();\n              }}\n              className=\"text-primary toggle-prompt-text\"\n              style={{ cursor: \"pointer\" }}\n            >\n              Log In\n            </span>\n          </span>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}