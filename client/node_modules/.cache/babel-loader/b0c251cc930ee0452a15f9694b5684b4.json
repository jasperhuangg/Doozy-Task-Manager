{"ast":null,"code":"// takes in any string and parses out any keywords that can be used to construct a date\n// examples:\nexport default function DateParser(str) {\n  const spokenWords = [\"today\", \"tomorrow\", \"yesterday\", \"yday\", \"tmr\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\", \"sunday\"];\n  const months = [\"january\", \"jan\", \"february\", \"feb\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"aug\", \"september\", \"sep\", \"october\", \"oct\", \"november\", \"nov\", \"december\", \"dec\"];\n  const daysWithSuffix = [\"1st\", \"2nd\", \"3rd\", \"4th\", \"5th\", \"6th\", \"7th\", \"8th\", \"9th\", \"10th\", \"11th\", \"12th\", \"13th\", \"14th\", \"15th\", \"16th\", \"17th\", \"18th\", \"19th\", \"20th\", \"21st\", \"22nd\", \"23rd\", \"24th\", \"25th\", \"26th\", \"27th\", \"28th\", \"29th\", \"30th\", \"31st\"];\n  var words = str.toLowerCase().split(\" \");\n  var isSpokenWord = false;\n  var isStringDate = false;\n  var monthBeforeDay = null;\n  var keywords = \"\";\n  var month = \"\";\n  var monthCandidates = [];\n  var day = \"\"; // search for any occurences of commonly spoken words\n\n  for (let i = 0; i < words.length; i++) {\n    var word = words[i];\n\n    if (spokenWords.indexOf(word) !== -1) {\n      keywords = word;\n      isSpokenWord = true;\n      break;\n    }\n  } // if we don't find any commonly spoken words, look for string representations of dates\n\n\n  if (isSpokenWord === false) {\n    // look for months\n    for (let i = 0; i < words.length; i++) {\n      let word = words[i];\n\n      if (months.indexOf(word) !== -1) {\n        monthCandidates.push(word);\n      }\n    } // if we found a month, look on either side of it for a date\n\n\n    if (monthCandidates.length > 0) {\n      // check each month candidate\n      for (let f = 0; f < monthCandidates.length; f++) {\n        var monthCandidate = monthCandidates[f];\n        const monthIndex = getPosition(words, monthCandidate, f + 1);\n        var dateCandidates = [];\n        if (monthIndex - 1 >= 0) dateCandidates.push({\n          index: monthIndex - 1,\n          date: words[monthIndex - 1]\n        });\n        if (monthIndex + 1 < words.length) dateCandidates.push({\n          index: monthIndex + 1,\n          date: words[monthIndex + 1]\n        }); // check to see if either of these dateCandidates are actual dates with suffixes\n\n        for (let i = 0; i < dateCandidates.length; i++) {\n          const dateCandidate = dateCandidates[i].date;\n          const idx = dateCandidates[i].index;\n\n          if (daysWithSuffix.indexOf(dateCandidate) !== -1) {\n            day = dateCandidate;\n            if (idx > monthIndex) monthBeforeDay = true;else monthBeforeDay = false;\n            break;\n          }\n        } // if nothing was found, then we look for numeric representations\n\n\n        if (day === \"\") {\n          for (let i = 0; i < dateCandidates.length; i++) {\n            const dateCandidate = parseInt(dateCandidates[i].date);\n            const idx = dateCandidates[i].index;\n\n            if (dateCandidate > 0 && dateCandidate <= 31) {\n              day = dateCandidate;\n              if (idx > monthIndex) monthBeforeDay = true;else monthBeforeDay = false;\n              break;\n            }\n          }\n        } // if we found a date, then we have a date value\n\n\n        if (day !== \"\") {\n          isStringDate = true;\n          month = monthCandidates[f];\n          break;\n        }\n      }\n    }\n  }\n\n  var today = new Date();\n  var currYear = today.getFullYear();\n  var currMonth = today.getMonth() + 1;\n  var currDate = today.getDate();\n  var currDayOfTheWeek = today.getDay() + 1; // create and return the parsed date\n\n  if (!isSpokenWord && !isStringDate) return {\n    date: \"\",\n    keywords: \"\"\n  }; // no date found\n  else if (isSpokenWord && !isStringDate) {\n      if (keywords === \"today\") {\n        return {\n          date: getFormattedDate(currYear, currMonth, currDate),\n          keywords: keywords\n        };\n      } else if (keywords === \"yesterday\" || keywords === \"yday\") {\n        var yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        return {\n          date: getFormattedDate(yesterday.getFullYear(), yesterday.getMonth() + 1, yesterday.getDate()),\n          keywords: keywords\n        };\n      } else if (keywords === \"tomorrow\" || keywords === \"tmr\") {\n        var tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        return {\n          date: getFormattedDate(tomorrow.getFullYear(), tomorrow.getMonth() + 1, tomorrow.getDate()),\n          keywords: keywords\n        };\n      } else {\n        var dayOfTheWeek = dayOfTheWeekToNumber(keywords); // always going to assume its the next upcoming day\n\n        var difference = distanceToNextDay(currDayOfTheWeek, dayOfTheWeek);\n        var nextGivenDay = new Date();\n        nextGivenDay.setDate(nextGivenDay.getDate() + difference);\n        return {\n          date: getFormattedDate(nextGivenDay.getFullYear(), nextGivenDay.getMonth() + 1, nextGivenDay.getDate()),\n          keywords: keywords\n        };\n      }\n    } else if (isStringDate && !isSpokenWord) {\n      var currDay = today.getDate();\n      var monthNum = convertMonthToNumber(month);\n      var dayNum = parseInt(day);\n      var year = currYear;\n      if (monthNum < currMonth) year = currYear + 1;else if (monthNum === currMonth) {\n        if (dayNum < currDay) year = currYear + 1;\n      } else year = currYear;\n      var keywordsToReturn = monthBeforeDay ? month + \" \" + day : day + \" \" + month;\n      return {\n        date: getFormattedDate(year, monthNum, dayNum),\n        keywords: keywordsToReturn\n      };\n    }\n}\n\nfunction convertMonthToNumber(month) {\n  if (month === \"jan\") return 1;\n  if (month === \"feb\") return 2;\n  if (month === \"aug\") return 8;\n  if (month === \"sep\") return 9;\n  if (month === \"oct\") return 10;\n  if (month === \"nov\") return 11;\n  if (month === \"dec\") return 12;\n  const months = [\"\", \"january\", \"february\", \"march\", \"april\", \"may\", \"june\", \"july\", \"august\", \"september\", \"october\", \"november\", \"december\"];\n  return months.indexOf(month);\n}\n\nfunction dayOfTheWeekToNumber(dayOfTheWeek) {\n  const daysOfTheWeek = [\"\", \"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n  return daysOfTheWeek.indexOf(dayOfTheWeek);\n}\n\nfunction distanceToNextDay(day1, day2) {\n  var diff = 7 - day1 + day2;\n  if (diff !== 7) diff %= 7;\n  return diff;\n}\n\nfunction getFormattedDate(year, month, day) {\n  if (month < 10) month = \"0\" + month.toString();\n  if (day < 10) day = \"0\" + day.toString();\n  return year + \"-\" + month + \"-\" + day;\n}\n\nfunction getPosition(array, entry, occurence) {\n  var seen = 0;\n\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === entry) {\n      seen++;\n      if (seen === occurence) return i;\n    }\n  }\n\n  if (seen === 1) return array.indexOf(entry);\n} // console.log(DateParser(\"go to italy sep 10\"));","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/mern-todolist/client/src/todolist/DateParser.js"],"names":["DateParser","str","spokenWords","months","daysWithSuffix","words","toLowerCase","split","isSpokenWord","isStringDate","monthBeforeDay","keywords","month","monthCandidates","day","i","length","word","indexOf","push","f","monthCandidate","monthIndex","getPosition","dateCandidates","index","date","dateCandidate","idx","parseInt","today","Date","currYear","getFullYear","currMonth","getMonth","currDate","getDate","currDayOfTheWeek","getDay","getFormattedDate","yesterday","setDate","tomorrow","dayOfTheWeek","dayOfTheWeekToNumber","difference","distanceToNextDay","nextGivenDay","currDay","monthNum","convertMonthToNumber","dayNum","year","keywordsToReturn","daysOfTheWeek","day1","day2","diff","toString","array","entry","occurence","seen"],"mappings":"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","sourcesContent":["// takes in any string and parses out any keywords that can be used to construct a date\n// examples:\nexport default function DateParser(str) {\n  const spokenWords = [\n    \"today\",\n    \"tomorrow\",\n    \"yesterday\",\n    \"yday\",\n    \"tmr\",\n    \"monday\",\n    \"tuesday\",\n    \"wednesday\",\n    \"thursday\",\n    \"friday\",\n    \"saturday\",\n    \"sunday\",\n  ];\n\n  const months = [\n    \"january\",\n    \"jan\",\n    \"february\",\n    \"feb\",\n    \"march\",\n    \"april\",\n    \"may\",\n    \"june\",\n    \"july\",\n    \"august\",\n    \"aug\",\n    \"september\",\n    \"sep\",\n    \"october\",\n    \"oct\",\n    \"november\",\n    \"nov\",\n    \"december\",\n    \"dec\",\n  ];\n\n  const daysWithSuffix = [\n    \"1st\",\n    \"2nd\",\n    \"3rd\",\n    \"4th\",\n    \"5th\",\n    \"6th\",\n    \"7th\",\n    \"8th\",\n    \"9th\",\n    \"10th\",\n    \"11th\",\n    \"12th\",\n    \"13th\",\n    \"14th\",\n    \"15th\",\n    \"16th\",\n    \"17th\",\n    \"18th\",\n    \"19th\",\n    \"20th\",\n    \"21st\",\n    \"22nd\",\n    \"23rd\",\n    \"24th\",\n    \"25th\",\n    \"26th\",\n    \"27th\",\n    \"28th\",\n    \"29th\",\n    \"30th\",\n    \"31st\",\n  ];\n\n  var words = str.toLowerCase().split(\" \");\n\n  var isSpokenWord = false;\n  var isStringDate = false;\n  var monthBeforeDay = null;\n  var keywords = \"\";\n  var month = \"\";\n  var monthCandidates = [];\n  var day = \"\";\n\n  // search for any occurences of commonly spoken words\n  for (let i = 0; i < words.length; i++) {\n    var word = words[i];\n    if (spokenWords.indexOf(word) !== -1) {\n      keywords = word;\n      isSpokenWord = true;\n      break;\n    }\n  }\n\n  // if we don't find any commonly spoken words, look for string representations of dates\n  if (isSpokenWord === false) {\n    // look for months\n    for (let i = 0; i < words.length; i++) {\n      let word = words[i];\n      if (months.indexOf(word) !== -1) {\n        monthCandidates.push(word);\n      }\n    }\n\n    // if we found a month, look on either side of it for a date\n    if (monthCandidates.length > 0) {\n      // check each month candidate\n      for (let f = 0; f < monthCandidates.length; f++) {\n        var monthCandidate = monthCandidates[f];\n        const monthIndex = getPosition(words, monthCandidate, f + 1);\n        var dateCandidates = [];\n        if (monthIndex - 1 >= 0)\n          dateCandidates.push({\n            index: monthIndex - 1,\n            date: words[monthIndex - 1],\n          });\n        if (monthIndex + 1 < words.length)\n          dateCandidates.push({\n            index: monthIndex + 1,\n            date: words[monthIndex + 1],\n          });\n\n        // check to see if either of these dateCandidates are actual dates with suffixes\n        for (let i = 0; i < dateCandidates.length; i++) {\n          const dateCandidate = dateCandidates[i].date;\n          const idx = dateCandidates[i].index;\n          if (daysWithSuffix.indexOf(dateCandidate) !== -1) {\n            day = dateCandidate;\n            if (idx > monthIndex) monthBeforeDay = true;\n            else monthBeforeDay = false;\n            break;\n          }\n        }\n\n        // if nothing was found, then we look for numeric representations\n        if (day === \"\") {\n          for (let i = 0; i < dateCandidates.length; i++) {\n            const dateCandidate = parseInt(dateCandidates[i].date);\n            const idx = dateCandidates[i].index;\n            if (dateCandidate > 0 && dateCandidate <= 31) {\n              day = dateCandidate;\n              if (idx > monthIndex) monthBeforeDay = true;\n              else monthBeforeDay = false;\n              break;\n            }\n          }\n        }\n\n        // if we found a date, then we have a date value\n        if (day !== \"\") {\n          isStringDate = true;\n          month = monthCandidates[f];\n          break;\n        }\n      }\n    }\n  }\n\n  var today = new Date();\n  var currYear = today.getFullYear();\n  var currMonth = today.getMonth() + 1;\n  var currDate = today.getDate();\n  var currDayOfTheWeek = today.getDay() + 1;\n\n  // create and return the parsed date\n  if (!isSpokenWord && !isStringDate) return { date: \"\", keywords: \"\" };\n  // no date found\n  else if (isSpokenWord && !isStringDate) {\n    if (keywords === \"today\") {\n      return {\n        date: getFormattedDate(currYear, currMonth, currDate),\n        keywords: keywords,\n      };\n    } else if (keywords === \"yesterday\" || keywords === \"yday\") {\n      var yesterday = new Date();\n      yesterday.setDate(yesterday.getDate() - 1);\n      return {\n        date: getFormattedDate(\n          yesterday.getFullYear(),\n          yesterday.getMonth() + 1,\n          yesterday.getDate()\n        ),\n        keywords: keywords,\n      };\n    } else if (keywords === \"tomorrow\" || keywords === \"tmr\") {\n      var tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      return {\n        date: getFormattedDate(\n          tomorrow.getFullYear(),\n          tomorrow.getMonth() + 1,\n          tomorrow.getDate()\n        ),\n        keywords: keywords,\n      };\n    } else {\n      var dayOfTheWeek = dayOfTheWeekToNumber(keywords); // always going to assume its the next upcoming day\n      var difference = distanceToNextDay(currDayOfTheWeek, dayOfTheWeek);\n      var nextGivenDay = new Date();\n      nextGivenDay.setDate(nextGivenDay.getDate() + difference);\n\n      return {\n        date: getFormattedDate(\n          nextGivenDay.getFullYear(),\n          nextGivenDay.getMonth() + 1,\n          nextGivenDay.getDate()\n        ),\n        keywords: keywords,\n      };\n    }\n  } else if (isStringDate && !isSpokenWord) {\n    var currDay = today.getDate();\n\n    var monthNum = convertMonthToNumber(month);\n    var dayNum = parseInt(day);\n\n    var year = currYear;\n    if (monthNum < currMonth) year = currYear + 1;\n    else if (monthNum === currMonth) {\n      if (dayNum < currDay) year = currYear + 1;\n    } else year = currYear;\n\n    var keywordsToReturn = monthBeforeDay\n      ? month + \" \" + day\n      : day + \" \" + month;\n\n    return {\n      date: getFormattedDate(year, monthNum, dayNum),\n      keywords: keywordsToReturn,\n    };\n  }\n}\n\nfunction convertMonthToNumber(month) {\n  if (month === \"jan\") return 1;\n  if (month === \"feb\") return 2;\n  if (month === \"aug\") return 8;\n  if (month === \"sep\") return 9;\n  if (month === \"oct\") return 10;\n  if (month === \"nov\") return 11;\n  if (month === \"dec\") return 12;\n\n  const months = [\n    \"\",\n    \"january\",\n    \"february\",\n    \"march\",\n    \"april\",\n    \"may\",\n    \"june\",\n    \"july\",\n    \"august\",\n    \"september\",\n    \"october\",\n    \"november\",\n    \"december\",\n  ];\n\n  return months.indexOf(month);\n}\n\nfunction dayOfTheWeekToNumber(dayOfTheWeek) {\n  const daysOfTheWeek = [\n    \"\",\n    \"sunday\",\n    \"monday\",\n    \"tuesday\",\n    \"wednesday\",\n    \"thursday\",\n    \"friday\",\n    \"saturday\",\n  ];\n\n  return daysOfTheWeek.indexOf(dayOfTheWeek);\n}\n\nfunction distanceToNextDay(day1, day2) {\n  var diff = 7 - day1 + day2;\n  if (diff !== 7) diff %= 7;\n  return diff;\n}\n\nfunction getFormattedDate(year, month, day) {\n  if (month < 10) month = \"0\" + month.toString();\n  if (day < 10) day = \"0\" + day.toString();\n\n  return year + \"-\" + month + \"-\" + day;\n}\n\nfunction getPosition(array, entry, occurence) {\n  var seen = 0;\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === entry) {\n      seen++;\n      if (seen === occurence) return i;\n    }\n  }\n  if (seen === 1) return array.indexOf(entry);\n}\n\n// console.log(DateParser(\"go to italy sep 10\"));\n"]},"metadata":{},"sourceType":"module"}