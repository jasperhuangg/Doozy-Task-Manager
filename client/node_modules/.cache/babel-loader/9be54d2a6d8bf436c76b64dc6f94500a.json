{"ast":null,"code":"import _classCallCheck from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{ContextMenu,MenuItem,ContextMenuTrigger}from\"react-contextmenu\";import $ from\"jquery\";import ListItem from\"./ListItem.js\";import CalendarOverlay from\"./CalendarOverlay.js\";import PrioritiesOverlay from\"./PrioritiesOverlay.js\";import DateParser from\"./DateParser.js\";import PriorityParser from\"./PriorityParser.js\";import\"./Todolist.css\";var Todolist=/*#__PURE__*/function(_Component){_inherits(Todolist,_Component);var _super=_createSuper(Todolist);function Todolist(props){var _this;_classCallCheck(this,Todolist);_this=_super.call(this,props);_this.state={calendarOverlayDisplaying:false,prioritiesOverlayDisplaying:false,addItemValue:\"\",addItemDate:\"\",addItemPriority:\"low\",listItems:_this.props.items,addItemDateKeywords:\"\",addItemPriorityKeywords:\"\",completedItemsShowing:false};_this.inputRef=React.createRef();return _this;}_createClass(Todolist,[{key:\"componentDidMount\",value:function componentDidMount(){$(document).ready(function(){$(\"#completed-items\").hide();});}},{key:\"keyPress\",value:function keyPress(e){var val=document.getElementById(\"addItemInput\").value;if(this.state.addItemDate!==\"\")val=removeOccurence(val,this.state.addItemDateKeywords);if(this.state.addItemPriorityKeywords!==\"\")val=removeOccurence(val,this.state.addItemPriorityKeywords);val=removeExtraWhitespace(val);// hardcoded date and priority values as UI components not yet implemented\nif(e.keyCode===13&&val!==\"\"){this.props.addListItem(this.props.name,val,this.state.addItemDate,\"\",this.state.addItemPriority,this.props.color);$(\"#addItemInput\").val(\"\");this.handleCalendarOverlayOK();this.setState({addItemDate:\"\",addItemValue:\"\",addItemDateKeywords:\"\",addItemPriority:\"low\",keywordSet:false});$(document).find(\".add-item-input-container\").show();var backspaceEvent=$.Event(\"keyDown\");backspaceEvent.which=8;// # Some key code value\n$(\"#addItemInput\").trigger(backspaceEvent);}}},{key:\"handleInput\",value:function handleInput(e){var dateParserObj=DateParser(e.target.value);var priorityParserObj=PriorityParser(e.target.value);var parsedDate=dateParserObj.date;var keywords=dateParserObj.keywords;var parsedPriority=priorityParserObj.priority;var priorityKeywords=priorityParserObj.keywords;if(keywords===\"\"&&this.state.addItemDateKeywords!==\"\"&&e.target.value.indexOf(this.state.addItemDateKeywords)!==-1){parsedDate=this.state.addItemDate;keywords=this.state.addItemDateKeywords;}if(priorityKeywords===\"\"&&// this.state.addItemPriorityKeywords !== \"\" &&\ne.target.value.indexOf(this.state.addItemPriorityKeywords)!==-1){parsedPriority=this.state.addItemPriority;priorityKeywords=this.state.addItemPriorityKeywords;}this.setState({addItemValue:e.target.value,addItemDate:parsedDate,addItemDateKeywords:keywords,addItemPriority:parsedPriority,addItemPriorityKeywords:priorityKeywords});}},{key:\"setAddItemDate\",value:function setAddItemDate(date){this.setState({addItemDate:date});}},{key:\"handleDelete\",value:function handleDelete(id,originalList){this.props.deleteListItem(this.props.name,id,originalList);}},{key:\"handleCalendarOverlayOK\",value:function handleCalendarOverlayOK(){this.setState({calendarOverlayDisplaying:false});}},{key:\"handleCalendarOverlayClear\",value:function handleCalendarOverlayClear(){this.setState({calendarOverlayDisplaying:false,addItemDate:\"\"});}},{key:\"handleShowCalendarOverlay\",value:function handleShowCalendarOverlay(e){var xCoord=e.clientX*7/12;$(\".calendar-overlay\").css(\"left\",xCoord+\"px\");if(this.state.calendarOverlayDisplaying)this.setState({calendarOverlayDisplaying:false});else this.setState({calendarOverlayDisplaying:true});}},{key:\"handleShowPrioritiesOverlay\",value:function handleShowPrioritiesOverlay(e){var xCoord=e.clientX*7/12;$(\".priorities-overlay\").css(\"left\",xCoord+\"px\");if(this.state.prioritiesOverlayDisplaying)this.setState({prioritiesOverlayDisplaying:false});else this.setState({prioritiesOverlayDisplaying:true});}},{key:\"handlePrioritiesOverlayClick\",value:function handlePrioritiesOverlayClick(priority){this.setState({addItemPriority:priority,prioritiesOverlayDisplaying:false});}},{key:\"getIndexOfFirstCompletedItem\",value:function getIndexOfFirstCompletedItem(){var items=this.props.items;for(var i=0;i<items.length;i++){if(items[i].completed)return i;}return-1;}},{key:\"getPriorityIconClasses\",value:function getPriorityIconClasses(){var classes=\"fas fa-balance-scale-left priorities-base\";if(this.state.addItemPriority===\"high\"){classes+=\" text-danger\";}else if(this.state.addItemPriority===\"medium\"){classes+=\" text-warning\";}else if(this.state.addItemPriority===\"low\"){classes+=\" text-primary\";}return classes;}},{key:\"handleCloseOverlays\",value:function handleCloseOverlays(e){if(this.state.calendarOverlayDisplaying||this.state.prioritiesOverlayDisplaying){if(e.target.id!==\"calendar-overlay\"&&e.target.id!==\"priorities-overlay\")this.setState({calendarOverlayDisplaying:false,prioritiesOverlayDisplaying:false});else if(e.target.id===\"calendar-overlay\")this.setState({prioritiesOverlayDisplaying:false});else if(e.target.id===\"priorities-overlay\")this.setState({calendarOverlayDisplaying:false});this.inputRef.current.focus();}}},{key:\"getCalendarIconClasses\",value:function getCalendarIconClasses(){var classes=\"fas fa-calendar-alt calendar-base\";if(this.state.addItemDate!==\"\")classes+=\" calendar-selected\";return classes;}},{key:\"handleCompletedSeparatorClick\",value:function handleCompletedSeparatorClick(){this.setState({completedItemsShowing:!this.state.completedItemsShowing});$(document).find(\"#completed-items\").slideToggle(\"fast\");}},{key:\"render\",value:function render(){var _this2=this;// important variables used for render setup\nvar name=this.props.name;var calendarOverlayClasslist=this.state.calendarOverlayDisplaying?\"\":\"d-none\";var prioritiesOverlayClasslist=this.state.prioritiesOverlayDisplaying?\"\":\"d-none\";var dueDateFormatted=formatDate(this.state.addItemDate);var placeholder='Add a task to \"'+name+'\"'+(dueDateFormatted===\"\"?\"\":\" on \"+dueDateFormatted);var addItemText=this.state.addItemValue;// classes used for rendering the icons used for accessing the calendar/priority overlays\nvar priorityIconClasses=this.getPriorityIconClasses();var calendarIconClasses=this.getCalendarIconClasses();// used so placeholder text stays in title input when it is focused but empty\n$(document).find(\".add-item-input-container\").show();// split the list items into two categories: incompleted items and completed items\n// supports functionality of hiding/showing completed items\nvar firstCompletedIndex=this.getIndexOfFirstCompletedItem();var incompletedItems=[];var completedItems=[];if(firstCompletedIndex!==-1){incompletedItems=this.props.items.slice(0,firstCompletedIndex);completedItems=this.props.items.slice(firstCompletedIndex,this.props.items.length);}else{incompletedItems=this.props.items.slice();completedItems=[];}var emptyListText=\"\";var emptyListIcon=\"fas fa-plus-square mr-2\";if(name===\"Today\"){emptyListText=\"Nothing due today, let's get ahead!\";emptyListIcon=\"fas fa-exclamation-circle mr-2\";}else if(name===\"All\"){emptyListText=\"Nothing due, kick back and relax.\";emptyListIcon=\"fas fa-exclamation-circle mr-2\";}else if(name===\"Next 7 Days\"){emptyListText=\"Nothing due in the next week, let's get ahead!\";emptyListIcon=\"fas fa-exclamation-circle mr-2\";}else{if(completedItems.length>0)emptyListText=\"Nothing due at the moment.\";else emptyListText=\"Add an item above\";emptyListIcon=\"fas fa-exclamation-circle mr-2\";}var completedSeparatorIconClasses=\"fas fa-sort-down mr-2 base\"+(this.state.completedItemsShowing?\"\":\" icon-rotated\");return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid todolist\",onClick:function onClick(e){return _this2.handleCloseOverlays(e);}},/*#__PURE__*/React.createElement(\"h3\",{className:\"list-name text-left pl-1 my-4\"},name),/*#__PURE__*/React.createElement(\"div\",{className:\"add-item-input-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-4\"},/*#__PURE__*/React.createElement(\"input\",{spellCheck:\"false\",suppressContentEditableWarning:true,id:\"addItemInput\",placeholder:placeholder,className:\"form-control form-control-sm text-left editable\"+(name===\"Today\"||name===\"Next 7 Days\"||name===\"All\"?\" d-none\":\"\"),type:\"text\",defaultValue:addItemText,onInput:function onInput(e){return _this2.handleInput(e);},onKeyDown:function onKeyDown(e){return _this2.keyPress(e);},ref:this.inputRef,onClick:function onClick(){return _this2.props.hideAddListOverlay();},autoComplete:\"off\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"+(name===\"Today\"||name===\"Next 7 Days\"||name===\"All\"?\" d-none\":\"\"),onClick:function onClick(e){_this2.handleShowPrioritiesOverlay(e);_this2.props.hideAddListOverlay();}},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text icon\"},/*#__PURE__*/React.createElement(\"i\",{className:priorityIconClasses}))),/*#__PURE__*/React.createElement(\"div\",{id:\"priorities-overlay\",className:prioritiesOverlayClasslist},/*#__PURE__*/React.createElement(PrioritiesOverlay,{handlePrioritiesOverlayClick:function handlePrioritiesOverlayClick(priority){return _this2.handlePrioritiesOverlayClick(priority);},currentlySelectedPriority:this.state.addItemPriority})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\",onClick:function onClick(e){_this2.handleShowCalendarOverlay(e);_this2.props.hideAddListOverlay();}},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text icon\"+(name===\"Today\"||name===\"Next 7 Days\"||name===\"All\"?\" d-none\":\"\")},/*#__PURE__*/React.createElement(\"i\",{className:calendarIconClasses}))))),/*#__PURE__*/React.createElement(\"div\",{id:\"calendar-overlay\",className:calendarOverlayClasslist},/*#__PURE__*/React.createElement(CalendarOverlay,{setDueDate:function setDueDate(date){return _this2.setAddItemDate(date);},handleCalendarOverlayOK:function handleCalendarOverlayOK(){return _this2.handleCalendarOverlayOK();},handleCalendarOverlayClear:function handleCalendarOverlayClear(){return _this2.handleCalendarOverlayClear();},currentlySelectedDate:this.state.addItemDate})),/*#__PURE__*/React.createElement(\"div\",{className:\"todolist-items\"},/*#__PURE__*/React.createElement(\"div\",{id:\"incompleted-items\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pl-2 font-small font-grey \"+(incompletedItems.length===0?\"\":\"d-none\"),style:{pointerEvents:\"none\"}},/*#__PURE__*/React.createElement(\"i\",{className:emptyListIcon}),emptyListText),incompletedItems.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"list-item\",key:item.itemID},/*#__PURE__*/React.createElement(ContextMenuTrigger,{id:item.itemID},/*#__PURE__*/React.createElement(ListItem,{listName:name,title:item.title,description:item.description,priority:item.priority,dueDate:item.dueDate,completed:item.completed,itemID:item.itemID,setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this2.props.setItemCompleted(listName,itemID,completed);},setItemTitle:function setItemTitle(listName,itemID,title){return _this2.props.setItemTitle(listName,itemID,title);},setSelectedItem:function setSelectedItem(itemID){return _this2.props.setSelectedItem(itemID);},selectedItemID:_this2.props.selectedItemID,handleDelete:function handleDelete(){return _this2.handleDelete(item.itemID,item.originalList);}})),/*#__PURE__*/React.createElement(ContextMenu,{id:item.itemID,className:\"delete-menu px-2 py-1 shadow-sm\"},/*#__PURE__*/React.createElement(MenuItem,{data:{foo:\"bar\"},className:\"delete-menu-item px-1\",onClick:function onClick(){return _this2.handleDelete(item.itemID,item.originalList);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center justify-content-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash col-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"col-6\"},\"Delete\")))));})),/*#__PURE__*/React.createElement(\"div\",{style:{cursor:\"pointer\"},className:\"completed-separator mt-2 mb-2 font-small text-left \"+(completedItems.length===0||name===\"Today\"||name===\"Next 7 Days\"||name===\"All\"?\"d-none\":\"\"),onClick:function onClick(){return _this2.handleCompletedSeparatorClick();}},/*#__PURE__*/React.createElement(\"i\",{id:\"completed-separator-icon\",className:completedSeparatorIconClasses}),\"Completed\"),/*#__PURE__*/React.createElement(\"div\",{id:\"completed-items\",className:name===\"Today\"||name===\"Next 7 Days\"||name===\"All\"?\"d-none\":\"\"},completedItems.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"list-item\",key:item.itemID},/*#__PURE__*/React.createElement(ContextMenuTrigger,{id:item.itemID},/*#__PURE__*/React.createElement(ListItem,{listName:name,title:item.title,description:item.description,priority:item.priority,dueDate:item.dueDate,completed:item.completed,itemID:item.itemID,setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this2.props.setItemCompleted(listName,itemID,completed);},setItemTitle:function setItemTitle(listName,itemID,title){return _this2.props.setItemTitle(listName,itemID,title);},setSelectedItem:function setSelectedItem(itemID){return _this2.props.setSelectedItem(itemID);},selectedItemID:_this2.props.selectedItemID,handleDelete:function handleDelete(){_this2.handleDelete(item.itemID,item.originalList);}})),/*#__PURE__*/React.createElement(ContextMenu,{id:item.itemID.toString(),className:\"delete-menu px-2 py-1 shadow-sm\"},/*#__PURE__*/React.createElement(MenuItem,{data:{foo:\"bar\"},className:\"delete-menu-item px-1\",onClick:function onClick(){return _this2.handleDelete(item.itemID,item.originalList);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center justify-content-left\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash col-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"col-6\"},\"Delete\")))));})),/*#__PURE__*/React.createElement(\"div\",{id:\"bottom-line\",className:\"list-item\"+(this.state.completedItemsShowing||completedItems.length===0||name===\"Today\"||name===\"All\"||name===\"Next 7 Days\"?\" d-none\":\"\")})));}}]);return Todolist;}(Component);// takes in a string (e.g. '01-23-2020') and returns its equivalent 'Jan 23'\n// omits year if year is the same as the current year\nexport{Todolist as default};function formatDate(str){if(str===\"\")return\"\";var today=new Date();var currYear=today.getFullYear();var monthAbbr=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var year=parseInt(str.substring(0,4));var month=parseInt(str.substring(5,7));var day=parseInt(str.substring(8,10));var formatted=monthAbbr[month-1]+\" \"+day+(currYear===year?\"\":\", \"+year);return formatted;}// removes the first occurence of toRemove in str, returns the modified version\nfunction removeOccurence(str,toRemove){if(toRemove===\"\")return str;var lowerCase=str.toLowerCase();var startIndex=lowerCase.indexOf(toRemove);var endIndex=startIndex+toRemove.length;var res=str.substring(0,startIndex)+str.substring(endIndex,str.length);return res;}// removes any duplicate, leading, and trailing whitespaces in str\nfunction removeExtraWhitespace(str){str=str.replace(/\\s+/g,\" \");str=str.trim();return str;}","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/todolist/Todolist.js"],"names":["React","Component","ContextMenu","MenuItem","ContextMenuTrigger","$","ListItem","CalendarOverlay","PrioritiesOverlay","DateParser","PriorityParser","Todolist","props","state","calendarOverlayDisplaying","prioritiesOverlayDisplaying","addItemValue","addItemDate","addItemPriority","listItems","items","addItemDateKeywords","addItemPriorityKeywords","completedItemsShowing","inputRef","createRef","document","ready","hide","e","val","getElementById","value","removeOccurence","removeExtraWhitespace","keyCode","addListItem","name","color","handleCalendarOverlayOK","setState","keywordSet","find","show","backspaceEvent","Event","which","trigger","dateParserObj","target","priorityParserObj","parsedDate","date","keywords","parsedPriority","priority","priorityKeywords","indexOf","id","originalList","deleteListItem","xCoord","clientX","css","i","length","completed","classes","current","focus","slideToggle","calendarOverlayClasslist","prioritiesOverlayClasslist","dueDateFormatted","formatDate","placeholder","addItemText","priorityIconClasses","getPriorityIconClasses","calendarIconClasses","getCalendarIconClasses","firstCompletedIndex","getIndexOfFirstCompletedItem","incompletedItems","completedItems","slice","emptyListText","emptyListIcon","completedSeparatorIconClasses","handleCloseOverlays","handleInput","keyPress","hideAddListOverlay","handleShowPrioritiesOverlay","handlePrioritiesOverlayClick","handleShowCalendarOverlay","setAddItemDate","handleCalendarOverlayClear","pointerEvents","map","item","itemID","title","description","dueDate","listName","setItemCompleted","setItemTitle","setSelectedItem","selectedItemID","handleDelete","foo","cursor","handleCompletedSeparatorClick","toString","str","today","Date","currYear","getFullYear","monthAbbr","year","parseInt","substring","month","day","formatted","toRemove","lowerCase","toLowerCase","startIndex","endIndex","res","replace","trim"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport $ from \"jquery\";\n\nimport ListItem from \"./ListItem.js\";\nimport CalendarOverlay from \"./CalendarOverlay.js\";\nimport PrioritiesOverlay from \"./PrioritiesOverlay.js\";\nimport DateParser from \"./DateParser.js\";\nimport PriorityParser from \"./PriorityParser.js\";\n\nimport \"./Todolist.css\";\n\nexport default class Todolist extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      calendarOverlayDisplaying: false,\n      prioritiesOverlayDisplaying: false,\n      addItemValue: \"\",\n      addItemDate: \"\",\n      addItemPriority: \"low\",\n      listItems: this.props.items,\n      addItemDateKeywords: \"\",\n      addItemPriorityKeywords: \"\",\n      completedItemsShowing: false,\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    $(document).ready(function () {\n      $(\"#completed-items\").hide();\n    });\n  }\n\n  keyPress(e) {\n    var val = document.getElementById(\"addItemInput\").value;\n    if (this.state.addItemDate !== \"\")\n      val = removeOccurence(val, this.state.addItemDateKeywords);\n    if (this.state.addItemPriorityKeywords !== \"\")\n      val = removeOccurence(val, this.state.addItemPriorityKeywords);\n    val = removeExtraWhitespace(val);\n\n    // hardcoded date and priority values as UI components not yet implemented\n    if (e.keyCode === 13 && val !== \"\") {\n      this.props.addListItem(\n        this.props.name,\n        val,\n        this.state.addItemDate,\n        \"\",\n        this.state.addItemPriority,\n        this.props.color\n      );\n      $(\"#addItemInput\").val(\"\");\n      this.handleCalendarOverlayOK();\n      this.setState({\n        addItemDate: \"\",\n        addItemValue: \"\",\n        addItemDateKeywords: \"\",\n        addItemPriority: \"low\",\n        keywordSet: false,\n      });\n      $(document).find(\".add-item-input-container\").show();\n      var backspaceEvent = $.Event(\"keyDown\");\n      backspaceEvent.which = 8; // # Some key code value\n      $(\"#addItemInput\").trigger(backspaceEvent);\n    }\n  }\n\n  handleInput(e) {\n    var dateParserObj = DateParser(e.target.value);\n    var priorityParserObj = PriorityParser(e.target.value);\n    var parsedDate = dateParserObj.date;\n    var keywords = dateParserObj.keywords;\n    var parsedPriority = priorityParserObj.priority;\n    var priorityKeywords = priorityParserObj.keywords;\n\n    if (\n      keywords === \"\" &&\n      this.state.addItemDateKeywords !== \"\" &&\n      e.target.value.indexOf(this.state.addItemDateKeywords) !== -1\n    ) {\n      parsedDate = this.state.addItemDate;\n      keywords = this.state.addItemDateKeywords;\n    }\n\n    if (\n      priorityKeywords === \"\" &&\n      // this.state.addItemPriorityKeywords !== \"\" &&\n      e.target.value.indexOf(this.state.addItemPriorityKeywords) !== -1\n    ) {\n      parsedPriority = this.state.addItemPriority;\n      priorityKeywords = this.state.addItemPriorityKeywords;\n    }\n\n    this.setState({\n      addItemValue: e.target.value,\n      addItemDate: parsedDate,\n      addItemDateKeywords: keywords,\n      addItemPriority: parsedPriority,\n      addItemPriorityKeywords: priorityKeywords,\n    });\n  }\n\n  setAddItemDate(date) {\n    this.setState({ addItemDate: date });\n  }\n\n  handleDelete(id, originalList) {\n    this.props.deleteListItem(this.props.name, id, originalList);\n  }\n\n  handleCalendarOverlayOK() {\n    this.setState({ calendarOverlayDisplaying: false });\n  }\n\n  handleCalendarOverlayClear() {\n    this.setState({\n      calendarOverlayDisplaying: false,\n      addItemDate: \"\",\n    });\n  }\n\n  handleShowCalendarOverlay(e) {\n    const xCoord = (e.clientX * 7) / 12;\n    $(\".calendar-overlay\").css(\"left\", xCoord + \"px\");\n    if (this.state.calendarOverlayDisplaying)\n      this.setState({ calendarOverlayDisplaying: false });\n    else this.setState({ calendarOverlayDisplaying: true });\n  }\n\n  handleShowPrioritiesOverlay(e) {\n    const xCoord = (e.clientX * 7) / 12;\n    $(\".priorities-overlay\").css(\"left\", xCoord + \"px\");\n    if (this.state.prioritiesOverlayDisplaying)\n      this.setState({ prioritiesOverlayDisplaying: false });\n    else this.setState({ prioritiesOverlayDisplaying: true });\n  }\n\n  handlePrioritiesOverlayClick(priority) {\n    this.setState({\n      addItemPriority: priority,\n      prioritiesOverlayDisplaying: false,\n    });\n  }\n\n  getIndexOfFirstCompletedItem() {\n    const items = this.props.items;\n\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].completed) return i;\n    }\n\n    return -1;\n  }\n\n  getPriorityIconClasses() {\n    var classes = \"fas fa-balance-scale-left priorities-base\";\n    if (this.state.addItemPriority === \"high\") {\n      classes += \" text-danger\";\n    } else if (this.state.addItemPriority === \"medium\") {\n      classes += \" text-warning\";\n    } else if (this.state.addItemPriority === \"low\") {\n      classes += \" text-primary\";\n    }\n\n    return classes;\n  }\n\n  handleCloseOverlays(e) {\n    if (\n      this.state.calendarOverlayDisplaying ||\n      this.state.prioritiesOverlayDisplaying\n    ) {\n      if (\n        e.target.id !== \"calendar-overlay\" &&\n        e.target.id !== \"priorities-overlay\"\n      )\n        this.setState({\n          calendarOverlayDisplaying: false,\n          prioritiesOverlayDisplaying: false,\n        });\n      else if (e.target.id === \"calendar-overlay\")\n        this.setState({\n          prioritiesOverlayDisplaying: false,\n        });\n      else if (e.target.id === \"priorities-overlay\")\n        this.setState({\n          calendarOverlayDisplaying: false,\n        });\n      this.inputRef.current.focus();\n    }\n  }\n\n  getCalendarIconClasses() {\n    var classes = \"fas fa-calendar-alt calendar-base\";\n    if (this.state.addItemDate !== \"\") classes += \" calendar-selected\";\n\n    return classes;\n  }\n\n  handleCompletedSeparatorClick() {\n    this.setState({ completedItemsShowing: !this.state.completedItemsShowing });\n    $(document).find(\"#completed-items\").slideToggle(\"fast\");\n  }\n\n  render() {\n    // important variables used for render setup\n    var name = this.props.name;\n    const calendarOverlayClasslist = this.state.calendarOverlayDisplaying\n      ? \"\"\n      : \"d-none\";\n    const prioritiesOverlayClasslist = this.state.prioritiesOverlayDisplaying\n      ? \"\"\n      : \"d-none\";\n    const dueDateFormatted = formatDate(this.state.addItemDate);\n    const placeholder =\n      'Add a task to \"' +\n      name +\n      '\"' +\n      (dueDateFormatted === \"\" ? \"\" : \" on \" + dueDateFormatted);\n    var addItemText = this.state.addItemValue;\n\n    // classes used for rendering the icons used for accessing the calendar/priority overlays\n    const priorityIconClasses = this.getPriorityIconClasses();\n    const calendarIconClasses = this.getCalendarIconClasses();\n\n    // used so placeholder text stays in title input when it is focused but empty\n    $(document).find(\".add-item-input-container\").show();\n\n    // split the list items into two categories: incompleted items and completed items\n    // supports functionality of hiding/showing completed items\n    const firstCompletedIndex = this.getIndexOfFirstCompletedItem();\n    var incompletedItems = [];\n    var completedItems = [];\n    if (firstCompletedIndex !== -1) {\n      incompletedItems = this.props.items.slice(0, firstCompletedIndex);\n      completedItems = this.props.items.slice(\n        firstCompletedIndex,\n        this.props.items.length\n      );\n    } else {\n      incompletedItems = this.props.items.slice();\n      completedItems = [];\n    }\n\n    var emptyListText = \"\";\n    var emptyListIcon = \"fas fa-plus-square mr-2\";\n\n    if (name === \"Today\") {\n      emptyListText = \"Nothing due today, let's get ahead!\";\n      emptyListIcon = \"fas fa-exclamation-circle mr-2\";\n    } else if (name === \"All\") {\n      emptyListText = \"Nothing due, kick back and relax.\";\n      emptyListIcon = \"fas fa-exclamation-circle mr-2\";\n    } else if (name === \"Next 7 Days\") {\n      emptyListText = \"Nothing due in the next week, let's get ahead!\";\n      emptyListIcon = \"fas fa-exclamation-circle mr-2\";\n    } else {\n      if (completedItems.length > 0)\n        emptyListText = \"Nothing due at the moment.\";\n      else emptyListText = \"Add an item above\";\n      emptyListIcon = \"fas fa-exclamation-circle mr-2\";\n    }\n\n    const completedSeparatorIconClasses =\n      \"fas fa-sort-down mr-2 base\" +\n      (this.state.completedItemsShowing ? \"\" : \" icon-rotated\");\n    return (\n      <div\n        className=\"container-fluid todolist\"\n        onClick={(e) => this.handleCloseOverlays(e)}\n      >\n        <h3 className=\"list-name text-left pl-1 my-4\">{name}</h3>\n        <div className=\"add-item-input-container\">\n          <div className=\"input-group mb-4\">\n            <input\n              spellCheck=\"false\"\n              suppressContentEditableWarning={true}\n              id=\"addItemInput\"\n              placeholder={placeholder}\n              className={\n                \"form-control form-control-sm text-left editable\" +\n                (name === \"Today\" || name === \"Next 7 Days\" || name === \"All\"\n                  ? \" d-none\"\n                  : \"\")\n              }\n              type=\"text\"\n              defaultValue={addItemText}\n              onInput={(e) => this.handleInput(e)}\n              onKeyDown={(e) => this.keyPress(e)}\n              ref={this.inputRef}\n              onClick={() => this.props.hideAddListOverlay()}\n              autoComplete=\"off\"\n            ></input>\n            <div\n              className={\n                \"input-group-append\" +\n                (name === \"Today\" || name === \"Next 7 Days\" || name === \"All\"\n                  ? \" d-none\"\n                  : \"\")\n              }\n              onClick={(e) => {\n                this.handleShowPrioritiesOverlay(e);\n                this.props.hideAddListOverlay();\n              }}\n            >\n              <span className=\"input-group-text icon\">\n                <i className={priorityIconClasses}></i>\n              </span>\n            </div>\n            <div id=\"priorities-overlay\" className={prioritiesOverlayClasslist}>\n              <PrioritiesOverlay\n                handlePrioritiesOverlayClick={(priority) =>\n                  this.handlePrioritiesOverlayClick(priority)\n                }\n                currentlySelectedPriority={this.state.addItemPriority}\n              />\n            </div>\n            <div\n              className=\"input-group-append\"\n              onClick={(e) => {\n                this.handleShowCalendarOverlay(e);\n                this.props.hideAddListOverlay();\n              }}\n            >\n              <span\n                className={\n                  \"input-group-text icon\" +\n                  (name === \"Today\" || name === \"Next 7 Days\" || name === \"All\"\n                    ? \" d-none\"\n                    : \"\")\n                }\n              >\n                <i className={calendarIconClasses}></i>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div id=\"calendar-overlay\" className={calendarOverlayClasslist}>\n          <CalendarOverlay\n            setDueDate={(date) => this.setAddItemDate(date)}\n            handleCalendarOverlayOK={() => this.handleCalendarOverlayOK()}\n            handleCalendarOverlayClear={() => this.handleCalendarOverlayClear()}\n            currentlySelectedDate={this.state.addItemDate}\n          />\n        </div>\n        <div className=\"todolist-items\">\n          <div id=\"incompleted-items\">\n            <span\n              className={\n                \"pl-2 font-small font-grey \" +\n                (incompletedItems.length === 0 ? \"\" : \"d-none\")\n              }\n              style={{ pointerEvents: \"none\" }}\n            >\n              <i className={emptyListIcon}></i>\n              {emptyListText}\n            </span>\n            {incompletedItems.map((item, i) => {\n              return (\n                <div className=\"list-item\" key={item.itemID}>\n                  <ContextMenuTrigger id={item.itemID}>\n                    <ListItem\n                      listName={name}\n                      title={item.title}\n                      description={item.description}\n                      priority={item.priority}\n                      dueDate={item.dueDate}\n                      completed={item.completed}\n                      itemID={item.itemID}\n                      setItemCompleted={(listName, itemID, completed) =>\n                        this.props.setItemCompleted(listName, itemID, completed)\n                      }\n                      setItemTitle={(listName, itemID, title) =>\n                        this.props.setItemTitle(listName, itemID, title)\n                      }\n                      setSelectedItem={(itemID) =>\n                        this.props.setSelectedItem(itemID)\n                      }\n                      selectedItemID={this.props.selectedItemID}\n                      handleDelete={() =>\n                        this.handleDelete(item.itemID, item.originalList)\n                      }\n                    />\n                  </ContextMenuTrigger>\n                  <ContextMenu\n                    id={item.itemID}\n                    className=\"delete-menu px-2 py-1 shadow-sm\"\n                  >\n                    <MenuItem\n                      data={{ foo: \"bar\" }}\n                      className=\"delete-menu-item px-1\"\n                      onClick={() =>\n                        this.handleDelete(item.itemID, item.originalList)\n                      }\n                    >\n                      <div className=\"row align-items-center justify-content-left\">\n                        <i className=\"fas fa-trash col-1\"></i>\n                        <span className=\"col-6\">Delete</span>\n                      </div>\n                    </MenuItem>\n                  </ContextMenu>\n                </div>\n              );\n            })}\n          </div>\n          <div\n            style={{ cursor: \"pointer\" }}\n            className={\n              \"completed-separator mt-2 mb-2 font-small text-left \" +\n              (completedItems.length === 0 ||\n              name === \"Today\" ||\n              name === \"Next 7 Days\" ||\n              name === \"All\"\n                ? \"d-none\"\n                : \"\")\n            }\n            onClick={() => this.handleCompletedSeparatorClick()}\n          >\n            <i\n              id=\"completed-separator-icon\"\n              className={completedSeparatorIconClasses}\n            ></i>\n            Completed\n          </div>\n          <div\n            id=\"completed-items\"\n            className={\n              name === \"Today\" || name === \"Next 7 Days\" || name === \"All\"\n                ? \"d-none\"\n                : \"\"\n            }\n          >\n            {completedItems.map((item, i) => {\n              return (\n                <div className={\"list-item\"} key={item.itemID}>\n                  <ContextMenuTrigger id={item.itemID}>\n                    <ListItem\n                      listName={name}\n                      title={item.title}\n                      description={item.description}\n                      priority={item.priority}\n                      dueDate={item.dueDate}\n                      completed={item.completed}\n                      itemID={item.itemID}\n                      setItemCompleted={(listName, itemID, completed) =>\n                        this.props.setItemCompleted(listName, itemID, completed)\n                      }\n                      setItemTitle={(listName, itemID, title) =>\n                        this.props.setItemTitle(listName, itemID, title)\n                      }\n                      setSelectedItem={(itemID) =>\n                        this.props.setSelectedItem(itemID)\n                      }\n                      selectedItemID={this.props.selectedItemID}\n                      handleDelete={() => {\n                        this.handleDelete(item.itemID, item.originalList);\n                      }}\n                    />\n                  </ContextMenuTrigger>\n                  <ContextMenu\n                    id={item.itemID.toString()}\n                    className=\"delete-menu px-2 py-1 shadow-sm\"\n                  >\n                    <MenuItem\n                      data={{ foo: \"bar\" }}\n                      className=\"delete-menu-item px-1\"\n                      onClick={() =>\n                        this.handleDelete(item.itemID, item.originalList)\n                      }\n                    >\n                      <div className=\"row align-items-center justify-content-left\">\n                        <i className=\"fas fa-trash col-1\"></i>\n                        <span className=\"col-6\">Delete</span>\n                      </div>\n                    </MenuItem>\n                  </ContextMenu>\n                </div>\n              );\n            })}\n          </div>\n          <div\n            id=\"bottom-line\"\n            className={\n              \"list-item\" +\n              (this.state.completedItemsShowing ||\n              completedItems.length === 0 ||\n              name === \"Today\" ||\n              name === \"All\" ||\n              name === \"Next 7 Days\"\n                ? \" d-none\"\n                : \"\")\n            }\n          ></div>\n        </div>\n      </div>\n    );\n  }\n}\n\n// takes in a string (e.g. '01-23-2020') and returns its equivalent 'Jan 23'\n// omits year if year is the same as the current year\nfunction formatDate(str) {\n  if (str === \"\") return \"\";\n  const today = new Date();\n  const currYear = today.getFullYear();\n\n  const monthAbbr = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  const year = parseInt(str.substring(0, 4));\n  const month = parseInt(str.substring(5, 7));\n  const day = parseInt(str.substring(8, 10));\n\n  var formatted =\n    monthAbbr[month - 1] + \" \" + day + (currYear === year ? \"\" : \", \" + year);\n\n  return formatted;\n}\n\n// removes the first occurence of toRemove in str, returns the modified version\nfunction removeOccurence(str, toRemove) {\n  if (toRemove === \"\") return str;\n  var lowerCase = str.toLowerCase();\n  var startIndex = lowerCase.indexOf(toRemove);\n  var endIndex = startIndex + toRemove.length;\n\n  var res = str.substring(0, startIndex) + str.substring(endIndex, str.length);\n\n  return res;\n}\n\n// removes any duplicate, leading, and trailing whitespaces in str\nfunction removeExtraWhitespace(str) {\n  str = str.replace(/\\s+/g, \" \");\n  str = str.trim();\n\n  return str;\n}\n"]},"metadata":{},"sourceType":"module"}