{"ast":null,"code":"import _classCallCheck from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Cookies from\"universal-cookie\";import\"./App.css\";import $ from\"jquery\";import Todolist from\"./todolist/Todolist.js\";import Details from\"./todolist/Details.js\";import Login from\"./todolist/Login.js\";import Register from\"./todolist/Register.js\";import Sidebar from\"./todolist/Sidebar.js\";import Notification from\"./todolist/Notification.js\";import Toolbar from\"./todolist/Toolbar.js\";import AddListOverlay from\"./todolist/AddListOverlay.js\";import EditListOverlay from\"./todolist/EditListOverlay.js\";var ObjectID=require(\"bson-objectid\");var cookies=new Cookies();var domain=\"http://localhost:9000\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={docTitle:\"Log in | Doozy\",loggedIn:\"not yet\",registered:\"not yet\",loginOrRegister:\"login\",lists:[],username:\"\",currentlySelectedListIndex:0,currentlySelectedListName:\"\",currentlySelectedItemID:\"\",bgURL:\"\",firstName:\"\",lastName:\"\",loaded:false,notificationDisplaying:false,lastDeletedItem:{},lastDeletedItemListName:\"\",addListOverlayDisplaying:false,editListOverlayDisplaying:false,editListName:\"\",editListColor:\"\"};_this.addListTitleRef=React.createRef();_this.editListTitleRef=React.createRef();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var username=\"\";var firstName=\"\";var lastName=\"\";var loggedIn=\"not yet\";var docTitle=this.state.docTitle;if(cookies.get(\"DoozyLogin\")!==undefined){username=cookies.get(\"DoozyLogin\").email;firstName=cookies.get(\"DoozyLogin\").firstName;lastName=cookies.get(\"DoozyLogin\").lastName;loggedIn=\"successful\";// extend the expiration date of the cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:username,firstName:firstName,lastName:lastName},{path:\"/\",expires:aWeekFromNow});docTitle=\"Lists | Doozy\";}var bgURL=getRandomBGURL();this.setState({bgURL:bgURL,username:username,firstName:firstName,lastName:lastName,loggedIn:loggedIn,docTitle:docTitle});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.loaded===false&&this.state.loggedIn===\"successful\"){this.setState({loaded:true});this.getLists();}}},{key:\"verifyLogin\",value:function verifyLogin(username,password,authType){var _this2=this;var url=domain+\"/verifyLogin\";var body=JSON.stringify({username:username,password:password,authType:authType});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){if(res.success){_this2.setState({docTitle:\"Lists | Doozy\",loggedIn:\"successful\",username:username,firstName:res.firstName,lastName:res.lastName});_this2.getLists();// set a cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:username,firstName:res.firstName,lastName:res.lastName},{path:\"/\",expires:aWeekFromNow});}else if(res.info===\"username does not exist\")_this2.setState({loggedIn:\"username does not exist\"});else if(res.info===\"auth type\")_this2.setState({loggedIn:\"auth type\"});else if(res.info===\"incorrect password\")_this2.setState({loggedIn:\"incorrect password\"});});}},{key:\"createAccount\",value:function createAccount(email,firstName,lastName,password,authType){var _this3=this;if(email===\"\"||firstName===\"\"||lastName===\"\"||password===\"\")this.setState({registered:\"empty field(s)\"});else if(!ValidateEmail(email))this.setState({registered:\"invalid email\"});else if(password.length<6)this.setState({registered:\"password length\"});else{var url=domain+\"/createAccount\";var body=JSON.stringify({username:email,firstName:firstName,lastName:lastName,password:password,authType:authType});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){if(res.success){_this3.setState({docTitle:\"Lists | Doozy\",loggedIn:\"successful\",registered:\"successful\",username:email,firstName:firstName,lastName:lastName});_this3.getLists();// set a cookie\nvar aWeekFromNow=new Date();aWeekFromNow.setDate(aWeekFromNow.getDate()+7);cookies.set(\"DoozyLogin\",{email:email,firstName:firstName,lastName:lastName},{path:\"/\",expires:aWeekFromNow});}else if(res.info===\"username already exists\"){_this3.setState({registered:\"username already exists\"});}});}}},{key:\"deleteAllCompletedItems\",value:function deleteAllCompletedItems(){var _this4=this;var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){var items=lists[i].items;var firstCompletedIndex=0;for(var j=0;j<items.length;j++){if(items[j].completed){firstCompletedIndex=j;break;}}items=items.slice(0,firstCompletedIndex);}var url=domain+\"/deleteCompletedItems\";var body=JSON.stringify({username:this.state.username});console.log(body);fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){_this4.setState({lists:lists});_this4.getLists();});}},{key:\"setSelectedItem\",value:function setSelectedItem(itemID){this.setState({currentlySelectedItemID:itemID,addListOverlayDisplaying:false});}},{key:\"setSelectedList\",value:function setSelectedList(listName){var index;if(listName===\"Today\")index=this.state.lists.length-3;if(listName===\"Next 7 Days\")index=this.state.lists.length-2;if(listName===\"All\")index=this.state.lists.length-1;else{for(var i=0;i<this.state.lists.length;i++){if(this.state.lists[i].name===listName){index=i;break;}}}this.setState({currentlySelectedListName:listName,currentlySelectedListIndex:index,currentlySelectedItemID:\"\",addListOverlayDisplaying:false});}},{key:\"toggleLoginRegister\",value:function toggleLoginRegister(){if(this.state.loginOrRegister===\"login\")this.setState({docTitle:\"Sign Up | Doozy\",loginOrRegister:\"register\"});else if(this.state.loginOrRegister===\"register\")this.setState({docTitle:\"Log In | Doozy\",loginOrRegister:\"login\"});}},{key:\"getCurrentlySelectedItem\",value:function getCurrentlySelectedItem(){if(this.state.currentlySelectedItemID===\"\")return{title:\"\",description:\"\",dueDate:\"\",priority:\"\",completed:false,itemID:\"\"};var items=this.state.lists.slice(this.state.currentlySelectedListIndex)[0].items;for(var i=0;i<items.length;i++){if(items[i].itemID===this.state.currentlySelectedItemID)return items[i];}return{title:\"\",description:\"\",dueDate:\"\",priority:\"\",completed:false,itemID:\"\"};}// for now assume we are getting the user's username from the props\n// that are being passed in by a Login component (to be created)\n},{key:\"getLists\",value:function getLists(){var _this5=this;var url=domain+\"/getLists\";var body=JSON.stringify({username:this.state.username/*this.props.username*/});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){var lists=res;lists=_this5.appendSmartLists(lists);var index=_this5.state.registered===\"successful\"?0:lists.length-1;var name=lists[index].name;_this5.setState({lists:lists,currentlySelectedListIndex:index,currentlySelectedListName:name});});}},{key:\"appendSmartLists\",value:function appendSmartLists(lists){var next7Days=this.getNext7Days(lists);var today=this.getToday(lists);var all=this.getAll(lists);lists.push(today);lists.push(next7Days);lists.push(all);return lists;}},{key:\"getNext7Days\",value:function getNext7Days(lists){var next7Days={name:\"Next 7 Days\",color:\"\",items:[]};for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){if(checkIfNext7Days(items[j].dueDate)){items[j].originalList=lists[i].name;items[j].color=lists[i].color;next7Days.items.push(items[j]);}}}next7Days.items.sort(sortListItems);return next7Days;}},{key:\"getAll\",value:function getAll(lists){var all={name:\"All\",color:\"\",items:[]};for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){items[j].originalList=lists[i].name;items[j].color=lists[i].color;}all.items=all.items.concat(lists[i].items);}all.items.sort(sortListItems);return all;}},{key:\"getToday\",value:function getToday(lists){var today={name:\"Today\",color:\"\",items:[]};var t=dateToStr(new Date());for(var i=0;i<lists.length;i++){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].dueDate===t){items[j].originalList=lists[i].name;items[j].color=lists[i].color;today.items.push(items[j]);}}}today.items.sort(sortListItems);return today;}},{key:\"addListItem\",value:function addListItem(listName,title,dueDate,description,priority,color){var lists=this.state.lists.slice();var id=null;var item={title:title,description:description,dueDate:dueDate,priority:priority,completed:false,originalList:listName,color:color,itemID:new ObjectID().toString()};for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;items.push(item);id=item.itemID;items.sort(sortListItems);break;}}var today=dateToStr(new Date());if(dueDate===today){lists[lists.length-3].items.push(item);lists[lists.length-3].items.sort(sortListItems);}if(checkIfNext7Days(dueDate)){lists[lists.length-2].items.push(item);lists[lists.length-2].items.sort(sortListItems);}lists[lists.length-1].items.push(item);lists[lists.length-1].items.sort(sortListItems);this.setState({lists:lists,currentlySelectedItemID:id});var url=domain+\"/addListItem\";var body=JSON.stringify({username:this.state.username,listName:listName,title:title,dueDate:dueDate,description:description,priority:priority,itemID:id});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"undoDeleteItem\",value:function undoDeleteItem(itemID,listName,title,dueDate,description,priority,completed,originalList,color){var lists=this.state.lists.slice();var id=null;var item={title:title,description:description,dueDate:dueDate,priority:priority,completed:false,originalList:listName,itemID:new ObjectID().toString()};for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;items.push(item);id=item.itemID;items.sort(sortListItems);break;}}var today=dateToStr(new Date());if(dueDate===today){lists[lists.length-3].items.push(item);lists[lists.length-3].items.sort(sortListItems);}if(checkIfNext7Days(dueDate)){lists[lists.length-2].items.push(item);lists[lists.length-2].items.sort(sortListItems);}lists[lists.length-1].items.push(item);lists[lists.length-1].items.sort(sortListItems);this.setState({lists:lists,currentlySelectedItemID:id});var url=domain+\"/addListItem\";var body=JSON.stringify({username:this.state.username,listName:listName,title:title,dueDate:dueDate,description:description,priority:priority,itemID:id});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"deleteListItem\",value:function deleteListItem(listName,itemID){var dueDate=\"\";var item;var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;var idx=-1;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){idx=j;dueDate=items[j].dueDate;item=items[j];break;}}items=items.splice(idx,1);}}var index=-1;var today=dateToStr(new Date());if(dueDate===today){items=lists[lists.length-3].items;for(var _j=0;_j<items.length;_j++){if(items[_j].itemID===itemID){index=_j;break;}}items=items.splice(index,1);}if(checkIfNext7Days(dueDate)){items=lists[lists.length-2].items;for(var _j2=0;_j2<items.length;_j2++){if(items[_j2].itemID===itemID){index=_j2;break;}}items=items.splice(index,1);}items=lists[lists.length-1].items;for(var _j3=0;_j3<items.length;_j3++){if(items[_j3].itemID===itemID){index=_j3;break;}}items=items.splice(index,1);this.setState({lists:lists,currentlySelectedItemID:\"\",lastDeletedItem:item,lastDeletedItemListName:listName});var url=domain+\"/deleteListItem\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.text();});this.handleDisplayNotification();}},{key:\"setItemTitle\",value:function setItemTitle(listName,itemID,title){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].title=title;item=items[j];break;}}break;}}if(item.originalList!==listName){for(var _i=0;_i<lists.length;_i++){if(lists[_i].name===item.originalList){var _items=lists[_i].items;for(var _j4=0;_j4<_items.length;_j4++){if(_items[_j4].itemID===itemID){_items[_j4].title=title;break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);var url=domain+\"/setItemTitle\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,title:title});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.text();});}},{key:\"setItemCompleted\",value:function setItemCompleted(listName,itemID,completed){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].completed=completed;item=items[j];items.sort(sortListItems);break;}}break;}}if(item.originalList!==listName){for(var _i2=0;_i2<lists.length;_i2++){if(lists[_i2].name===item.originalList){var _items2=lists[_i2].items;for(var _j5=0;_j5<_items2.length;_j5++){if(_items2[_j5].itemID===itemID){_items2[_j5].completed=completed;_items2.sort(sortListItems);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemCompleted\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,completed:completed});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemDueDate\",value:function setItemDueDate(listName,itemID,dueDate){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].dueDate=dueDate;item=items[j];items.sort(sortListItems);break;}}break;}}if(item.originalList!==listName){for(var _i3=0;_i3<lists.length;_i3++){if(lists[_i3].name===item.originalList){var _items3=lists[_i3].items;for(var _j6=0;_j6<_items3.length;_j6++){if(_items3[_j6].itemID===itemID){_items3[_j6].dueDate=dueDate;_items3.sort(sortListItems);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemDueDate\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,dueDate:dueDate});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemPriority\",value:function setItemPriority(listName,itemID,priority){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].priority=priority;item=items[j];items.sort(sortListItems);break;}}break;}}if(item.originalList!==listName){for(var _i4=0;_i4<lists.length;_i4++){if(lists[_i4].name===item.originalList){var _items4=lists[_i4].items;for(var _j7=0;_j7<_items4.length;_j7++){if(_items4[_j7].itemID===itemID){_items4[_j7].priority=priority;_items4.sort(sortListItems);break;}}break;}}}lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists});var url=domain+\"/setItemPriority\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,priority:priority});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"setItemDescription\",value:function setItemDescription(listName,itemID,description){var lists=this.state.lists.slice();var item=undefined;for(var i=0;i<lists.length;i++){if(lists[i].name===listName){var items=lists[i].items;for(var j=0;j<items.length;j++){if(items[j].itemID===itemID){items[j].description=description;item=items[j];break;}}break;}}if(item.originalList!==listName){for(var _i5=0;_i5<lists.length;_i5++){if(lists[_i5].name===item.originalList){var _items5=lists[_i5].items;for(var _j8=0;_j8<_items5.length;_j8++){if(_items5[_j8].itemID===itemID){_items5[_j8].description=description;break;}}break;}}}this.setState({lists:lists});var url=domain+\"/setItemDescription\";var body=JSON.stringify({username:this.state.username,listName:listName===\"All\"||listName===\"Next 7 Days\"||listName===\"Today\"?item.originalList:listName,itemID:itemID,description:description});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"handleLogOut\",value:function handleLogOut(){// delete the cookie\ncookies.remove(\"DoozyLogin\");// const bgURL = getRandomBGURL();\n// reset state back to start\nthis.setState({docTitle:\"Log in | Doozy\",loggedIn:\"not yet\",registered:\"not yet\",loginOrRegister:\"login\",lists:[],username:\"\",currentlySelectedListIndex:0,currentlySelectedListName:\"\",currentlySelectedItemID:\"\",// bgURL: bgURL,\nfirstName:\"\",lastName:\"\",loaded:false});}},{key:\"createEmptyList\",value:function createEmptyList(listName,color){var list={name:listName,color:color,items:[]};var lists=this.state.lists.slice();lists.splice(lists.length-3,0,list);this.setState({lists:lists,currentlySelectedListIndex:lists.length-4,currentlySelectedListName:listName});var url=domain+\"/createEmptyList\";var body=JSON.stringify({username:this.state.username,listName:listName,color:color});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"focusAddListOverlayTitleInput\",value:function focusAddListOverlayTitleInput(){this.addListTitleRef.current.focus();}},{key:\"focusEditListOverlayTitleInput\",value:function focusEditListOverlayTitleInput(){this.editListTitleRef.current.focus();}},{key:\"deleteList\",value:function deleteList(listName){var idx=-1;var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===listName){idx=i;break;}}lists.splice(idx,1);lists=lists.slice(0,lists.length-3);lists=this.appendSmartLists(lists);this.setState({lists:lists,currentlySelectedItemID:\"\",currentlySelectedListIndex:idx-1>=0?idx-1:2,currentlySelectedListName:idx-1>=0?lists[idx-1].name:lists[2].name});var url=domain+\"/deleteList\";var body=JSON.stringify({username:this.state.username,listName:listName});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"editList\",value:function editList(oldName,newName,color){var lists=this.state.lists.slice();for(var i=0;i<lists.length;i++){if(lists[i].name===oldName){lists[i].name=newName;lists[i].color=color;var items=lists[i].items;for(var j=0;j<items.length;j++){items[j].originalList=newName;items[j].color=color;}break;}}this.setState({lists:lists});var url=domain+\"/editList\";var body=JSON.stringify({username:this.state.username,oldName:oldName,newName:newName,color:color});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body});}},{key:\"handleDisplayNotification\",value:function handleDisplayNotification(){var _this6=this;this.setState({notificationDisplaying:true});setTimeout(function(){_this6.setState({notificationDisplaying:false});},4000);}},{key:\"handleShowAddListOverlay\",value:function handleShowAddListOverlay(){var _this7=this;this.setState({addListOverlayDisplaying:true});$(\".add-list-overlay-color-selected\").removeClass(\".add-list-overlay-color-selected\");this.addListTitleRef.current.value=\"\";setTimeout(function(){_this7.addListTitleRef.current.focus();},500);}},{key:\"handleShowEditListOverlay\",value:function handleShowEditListOverlay(listName,color){var _this8=this;this.setState({editListOverlayDisplaying:true,editListColor:color,editListName:listName});this.editListTitleRef.current.value=listName;setTimeout(function(){_this8.editListTitleRef.current.focus();},500);}},{key:\"handleHideAddListOverlay\",value:function handleHideAddListOverlay(){this.setState({addListOverlayDisplaying:false});}},{key:\"handleHideEditListOverlay\",value:function handleHideEditListOverlay(){this.setState({editListOverlayDisplaying:false,editListColor:\"\",editListName:\"\"});}},{key:\"render\",value:function render(){var _this9=this;document.title=this.state.docTitle;var listArr=this.state.lists.slice(this.state.currentlySelectedListIndex,this.state.currentlySelectedListIndex+1);var lastDeletedItemTitle=\"\";if(this.state.lastDeletedItem!==undefined)lastDeletedItemTitle=this.state.lastDeletedItem.title;var selectedItem=this.getCurrentlySelectedItem();var appClasses=\"row align-items-center\"+(this.state.loggedIn===\"successful\"?\"\":\" d-none\");var loginRegClasses=\"container-fluid align-items-center\"+(this.state.loggedIn===\"successful\"?\" d-none\":\" d-flex \");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"login-register\",style:{backgroundImage:this.state.bgURL},className:loginRegClasses},/*#__PURE__*/React.createElement(\"div\",{className:\"login-section\"+(this.state.loginOrRegister===\"login\"?\"\":\" d-none\")},/*#__PURE__*/React.createElement(Login,{loginInfo:this.state.loggedIn,verifyLogin:function verifyLogin(username,password,authType){return _this9.verifyLogin(username,password,authType);},createAccount:function createAccount(email,fName,lName,password,authType){return _this9.createAccount(email,fName,lName,password,authType);},switchToRegister:function switchToRegister(){return _this9.toggleLoginRegister();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"register-section\"+(this.state.loginOrRegister===\"register\"?\"\":\" d-none\")},/*#__PURE__*/React.createElement(Register,{switchToLogin:function switchToLogin(){return _this9.toggleLoginRegister();},verifyLogin:function verifyLogin(username,password,authType){return _this9.verifyLogin(username,password,authType);},createAccount:function createAccount(email,fName,lName,password,authType){return _this9.createAccount(email,fName,lName,password,authType);},registerInfo:this.state.registered}))),/*#__PURE__*/React.createElement(\"div\",{id:\"app\",style:{backgroundImage:this.state.bgURL},className:appClasses,onKeyDown:function onKeyDown(e){if(e.keyCode===27&&_this9.state.addListOverlayDisplaying)_this9.setState({addListOverlayDisplaying:false});}},/*#__PURE__*/React.createElement(AddListOverlay,{id:\"addListOverlay\",displaying:this.state.addListOverlayDisplaying,addListTitleRef:this.addListTitleRef,lists:this.state.lists,hideOverlay:function hideOverlay(){return _this9.handleHideAddListOverlay();},createList:function createList(listName,color){return _this9.createEmptyList(listName,color);},focusTitleInput:function focusTitleInput(){return _this9.focusAddListOverlayTitleInput();}}),/*#__PURE__*/React.createElement(EditListOverlay,{id:\"editListOverlay\",displaying:this.state.editListOverlayDisplaying,editListTitleRef:this.editListTitleRef,lists:this.state.lists,hideOverlay:function hideOverlay(){return _this9.handleHideEditListOverlay();},focusTitleInput:function focusTitleInput(){return _this9.focusEditListOverlayTitleInput();},startingName:this.state.editListName,startingColor:this.state.editListColor,editList:function editList(oldName,newName,color){return _this9.editList(oldName,newName,color);}}),/*#__PURE__*/React.createElement(Notification,{displaying:this.state.notificationDisplaying,hideNotification:function hideNotification(){return _this9.setState({notificationDisplaying:false});},title:lastDeletedItemTitle,undo:function undo(){if(_this9.state.lastDeletedItem.itemID!==undefined){_this9.addListItem(_this9.state.lastDeletedItemListName,_this9.state.lastDeletedItem.title,_this9.state.lastDeletedItem.dueDate,_this9.state.lastDeletedItem.description,_this9.state.lastDeletedItem.priority,_this9.state.lastDeletedItem.color);}},listName:this.state.lastDeletedItemListName,originalList:this.state.lastDeletedItem.originalList}),/*#__PURE__*/React.createElement(\"div\",{id:\"sidebar\",className:\"p-0\"},/*#__PURE__*/React.createElement(Sidebar,{lists:this.state.lists,firstName:this.state.firstName,lastName:this.state.lastName,currentlySelectedListName:this.state.currentlySelectedListName,setSelectedList:function setSelectedList(listName){return _this9.setSelectedList(listName);},showAddListOverlay:function showAddListOverlay(){return _this9.handleShowAddListOverlay();},deleteList:function deleteList(listName){return _this9.deleteList(listName);},showEditListOverlay:function showEditListOverlay(listName,color){return _this9.handleShowEditListOverlay(listName,color);}})),listArr.map(function(list,i){return/*#__PURE__*/React.createElement(React.Fragment,{key:list.name},/*#__PURE__*/React.createElement(\"div\",{id:\"todolist\",className:\"col-5\"},/*#__PURE__*/React.createElement(Todolist,{color:list.color,name:list.name,items:list.items,addListItem:function addListItem(listName,title,dueDate,description,priority,color){return _this9.addListItem(listName,title,dueDate,description,priority,color);},deleteListItem:function deleteListItem(listName,itemID){return _this9.deleteListItem(listName,itemID);},setItemTitle:function setItemTitle(listName,itemID,title){return _this9.setItemTitle(listName,itemID,title);},setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this9.setItemCompleted(listName,itemID,completed);},setSelectedItem:function setSelectedItem(itemID){return _this9.setSelectedItem(itemID);},selectedItemID:_this9.state.currentlySelectedItemID,hideAddListOverlay:function hideAddListOverlay(){return _this9.handleHideAddListOverlay();}})),/*#__PURE__*/React.createElement(\"div\",{id:\"details\",className:\"col-4\"},/*#__PURE__*/React.createElement(Details,{listName:list.name,selectedItemID:selectedItem.itemID,selectedItemColor:selectedItem.color,selectedItemList:selectedItem.originalList,selectedItemTitle:selectedItem.title,selectedItemDueDate:selectedItem.dueDate,selectedItemDescription:selectedItem.description,selectedItemPriority:selectedItem.priority,selectedItemCompleted:selectedItem.completed,setItemTitle:function setItemTitle(listName,itemID,title){return _this9.setItemTitle(listName,itemID,title);},setItemCompleted:function setItemCompleted(listName,itemID,completed){return _this9.setItemCompleted(listName,itemID,completed);},setItemDueDate:function setItemDueDate(listName,itemID,dueDate){return _this9.setItemDueDate(listName,itemID,dueDate);},setItemPriority:function setItemPriority(listName,itemID,priority){return _this9.setItemPriority(listName,itemID,priority);},setItemDescription:function setItemDescription(listName,itemID,description){return _this9.setItemDescription(listName,itemID,description);},handleDelete:function handleDelete(listName,itemID){return _this9.deleteListItem(listName,itemID);},hideAddListOverlay:function hideAddListOverlay(){return _this9.handleHideAddListOverlay();}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"toolbar\",className:\"row col-1 justify-content-center\"},/*#__PURE__*/React.createElement(Toolbar,{handleLogOut:function handleLogOut(){return _this9.handleLogOut();},deleteAllCompletedItems:function deleteAllCompletedItems(){return _this9.deleteAllCompletedItems();}})));})));}}]);return App;}(Component);export{App as default};function sortListItems(a,b){if(a.completed&&!b.completed)return 1;else if(!a.completed&&b.completed)return-1;else if(a.dueDate===\"\"&&b.dueDate!==\"\")return 1;else if(a.dueDate!==\"\"&&b.dueDate===\"\")return-1;else{// both are either completed or incomplete or have a due date set or no due date set\nif(a.dueDate===b.dueDate){// sort items due on the same day by priority\nvar priorities=[\"low\",\"medium\",\"high\"];var priorityA=priorities.indexOf(a.priority);var priorityB=priorities.indexOf(b.priority);if(priorityA!==priorityB)return priorityB-priorityA;else{// sort by itemID\nvar itemIDA=a.itemID;var itemIDB=b.itemID;return itemIDA-itemIDB;}}else{// sort items based on date\nvar dateA=new Date(a.dueDate+\" 00:00\");var dateB=new Date(b.dueDate+\" 00:00\");return dateA-dateB;}}}function ValidateEmail(mail){if(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)){return true;}return false;}function getRandomBGURL(){// visit https://freeimage.host/ to host more background images\nvar backgroundURLs=[\"https://iili.io/J4xbBS.jpg\",\"https://iili.io/J4xtQ2.jpg\",\"https://iili.io/J4z92e.jpg\",\"https://iili.io/J4zdpj.jpg\",\"https://iili.io/J4zJkb.jpg\",\"https://iili.io/J4zWZl.jpg\",\"https://iili.io/J4Weln.jpg\",\"https://iili.io/J4WhoN.jpg\",\"https://iili.io/J4WOKX.jpg\",\"https://iili.io/J4WUN4.jpg\",\"https://iili.io/J4WgDl.jpg\",\"https://iili.io/J4WSRf.jpg\",\"https://iili.io/J4WmDQ.jpg\",\"https://iili.io/J4X9WB.jpg\",\"https://iili.io/J4XHiP.jpg\",\"https://iili.io/J4WyxV.jpg\",\"https://iili.io/JPNuGR.jpg\",\"https://iili.io/JPN53N.jpg\",\"https://iili.io/JPNTCv.jpg\",\"https://iili.io/JiKSp4.jpg\"];var currBackground=Math.floor(Math.random()*Math.floor(backgroundURLs.length));return'url(\"'+backgroundURLs[currBackground]+'\")';}function dateToStr(date){var day=date.getDate();if(day<10)day=\"0\"+day.toString();var month=date.getMonth()+1;if(month<10)month=\"0\"+month.toString();var year=date.getFullYear().toString();var formatted=year+\"-\"+month+\"-\"+day;return formatted;}function checkIfNext7Days(dateStr){var curr=new Date();for(var i=0;i<7;i++){var d=dateToStr(curr);if(dateStr===d)return true;curr.setDate(curr.getDate()+1);}d=dateToStr(curr);if(dateStr===d)return true;return false;}","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/App.js"],"names":["React","Component","Cookies","$","Todolist","Details","Login","Register","Sidebar","Notification","Toolbar","AddListOverlay","EditListOverlay","ObjectID","require","cookies","domain","App","props","state","docTitle","loggedIn","registered","loginOrRegister","lists","username","currentlySelectedListIndex","currentlySelectedListName","currentlySelectedItemID","bgURL","firstName","lastName","loaded","notificationDisplaying","lastDeletedItem","lastDeletedItemListName","addListOverlayDisplaying","editListOverlayDisplaying","editListName","editListColor","addListTitleRef","createRef","editListTitleRef","get","undefined","email","aWeekFromNow","Date","setDate","getDate","set","path","expires","getRandomBGURL","setState","getLists","password","authType","url","body","JSON","stringify","fetch","method","headers","then","res","json","success","info","ValidateEmail","length","slice","i","items","firstCompletedIndex","j","completed","console","log","itemID","listName","index","name","title","description","dueDate","priority","appendSmartLists","next7Days","getNext7Days","today","getToday","all","getAll","push","color","checkIfNext7Days","originalList","sort","sortListItems","concat","t","dateToStr","id","item","toString","idx","splice","text","handleDisplayNotification","remove","list","current","focus","oldName","newName","setTimeout","removeClass","value","document","listArr","lastDeletedItemTitle","selectedItem","getCurrentlySelectedItem","appClasses","loginRegClasses","backgroundImage","verifyLogin","fName","lName","createAccount","toggleLoginRegister","e","keyCode","handleHideAddListOverlay","createEmptyList","focusAddListOverlayTitleInput","handleHideEditListOverlay","focusEditListOverlayTitleInput","editList","addListItem","setSelectedList","handleShowAddListOverlay","deleteList","handleShowEditListOverlay","map","deleteListItem","setItemTitle","setItemCompleted","setSelectedItem","setItemDueDate","setItemPriority","setItemDescription","handleLogOut","deleteAllCompletedItems","a","b","priorities","priorityA","indexOf","priorityB","itemIDA","itemIDB","dateA","dateB","mail","test","backgroundURLs","currBackground","Math","floor","random","date","day","month","getMonth","year","getFullYear","formatted","dateStr","curr","d"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Cookies from \"universal-cookie\";\nimport \"./App.css\";\n\nimport $ from \"jquery\";\n\nimport Todolist from \"./todolist/Todolist.js\";\nimport Details from \"./todolist/Details.js\";\nimport Login from \"./todolist/Login.js\";\nimport Register from \"./todolist/Register.js\";\nimport Sidebar from \"./todolist/Sidebar.js\";\nimport Notification from \"./todolist/Notification.js\";\nimport Toolbar from \"./todolist/Toolbar.js\";\nimport AddListOverlay from \"./todolist/AddListOverlay.js\";\nimport EditListOverlay from \"./todolist/EditListOverlay.js\";\n\nvar ObjectID = require(\"bson-objectid\");\nconst cookies = new Cookies();\n\nconst domain = \"http://localhost:9000\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      docTitle: \"Log in | Doozy\",\n      loggedIn: \"not yet\",\n      registered: \"not yet\",\n      loginOrRegister: \"login\",\n      lists: [],\n      username: \"\",\n      currentlySelectedListIndex: 0,\n      currentlySelectedListName: \"\",\n      currentlySelectedItemID: \"\",\n      bgURL: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      loaded: false,\n      notificationDisplaying: false,\n      lastDeletedItem: {},\n      lastDeletedItemListName: \"\",\n      addListOverlayDisplaying: false,\n      editListOverlayDisplaying: false,\n      editListName: \"\",\n      editListColor: \"\",\n    };\n    this.addListTitleRef = React.createRef();\n    this.editListTitleRef = React.createRef();\n  }\n\n  componentDidMount() {\n    var username = \"\";\n    var firstName = \"\";\n    var lastName = \"\";\n    var loggedIn = \"not yet\";\n    var docTitle = this.state.docTitle;\n\n    if (cookies.get(\"DoozyLogin\") !== undefined) {\n      username = cookies.get(\"DoozyLogin\").email;\n      firstName = cookies.get(\"DoozyLogin\").firstName;\n      lastName = cookies.get(\"DoozyLogin\").lastName;\n      loggedIn = \"successful\";\n\n      // extend the expiration date of the cookie\n      var aWeekFromNow = new Date();\n      aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n      cookies.set(\n        \"DoozyLogin\",\n        { email: username, firstName: firstName, lastName: lastName },\n        {\n          path: \"/\",\n          expires: aWeekFromNow,\n        }\n      );\n      docTitle = \"Lists | Doozy\";\n    }\n\n    const bgURL = getRandomBGURL();\n\n    this.setState({\n      bgURL: bgURL,\n      username: username,\n      firstName: firstName,\n      lastName: lastName,\n      loggedIn: loggedIn,\n      docTitle: docTitle,\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.state.loaded === false && this.state.loggedIn === \"successful\") {\n      this.setState({ loaded: true });\n      this.getLists();\n    }\n  }\n\n  verifyLogin(username, password, authType) {\n    const url = domain + \"/verifyLogin\";\n    const body = JSON.stringify({\n      username: username,\n      password: password,\n      authType: authType,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.success) {\n          this.setState({\n            docTitle: \"Lists | Doozy\",\n            loggedIn: \"successful\",\n            username: username,\n            firstName: res.firstName,\n            lastName: res.lastName,\n          });\n          this.getLists();\n          // set a cookie\n          var aWeekFromNow = new Date();\n          aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n          cookies.set(\n            \"DoozyLogin\",\n            {\n              email: username,\n              firstName: res.firstName,\n              lastName: res.lastName,\n            },\n            {\n              path: \"/\",\n              expires: aWeekFromNow,\n            }\n          );\n        } else if (res.info === \"username does not exist\")\n          this.setState({ loggedIn: \"username does not exist\" });\n        else if (res.info === \"auth type\")\n          this.setState({ loggedIn: \"auth type\" });\n        else if (res.info === \"incorrect password\")\n          this.setState({ loggedIn: \"incorrect password\" });\n      });\n  }\n\n  createAccount(email, firstName, lastName, password, authType) {\n    if (email === \"\" || firstName === \"\" || lastName === \"\" || password === \"\")\n      this.setState({ registered: \"empty field(s)\" });\n    else if (!ValidateEmail(email))\n      this.setState({ registered: \"invalid email\" });\n    else if (password.length < 6)\n      this.setState({ registered: \"password length\" });\n    else {\n      const url = domain + \"/createAccount\";\n      const body = JSON.stringify({\n        username: email,\n        firstName: firstName,\n        lastName: lastName,\n        password: password,\n        authType: authType,\n      });\n\n      fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: body,\n      })\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.success) {\n            this.setState({\n              docTitle: \"Lists | Doozy\",\n              loggedIn: \"successful\",\n              registered: \"successful\",\n              username: email,\n              firstName: firstName,\n              lastName: lastName,\n            });\n            this.getLists();\n            // set a cookie\n            var aWeekFromNow = new Date();\n            aWeekFromNow.setDate(aWeekFromNow.getDate() + 7);\n            cookies.set(\n              \"DoozyLogin\",\n              { email: email, firstName: firstName, lastName: lastName },\n              {\n                path: \"/\",\n                expires: aWeekFromNow,\n              }\n            );\n          } else if (res.info === \"username already exists\") {\n            this.setState({ registered: \"username already exists\" });\n          }\n        });\n    }\n  }\n\n  deleteAllCompletedItems() {\n    var lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      var items = lists[i].items;\n      var firstCompletedIndex = 0;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].completed) {\n          firstCompletedIndex = j;\n          break;\n        }\n      }\n      items = items.slice(0, firstCompletedIndex);\n    }\n\n    const url = domain + \"/deleteCompletedItems\";\n    const body = JSON.stringify({\n      username: this.state.username,\n    });\n\n    console.log(body);\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        this.setState({ lists: lists });\n        this.getLists();\n      });\n  }\n\n  setSelectedItem(itemID) {\n    this.setState({\n      currentlySelectedItemID: itemID,\n      addListOverlayDisplaying: false,\n    });\n  }\n\n  setSelectedList(listName) {\n    var index;\n\n    if (listName === \"Today\") index = this.state.lists.length - 3;\n    if (listName === \"Next 7 Days\") index = this.state.lists.length - 2;\n    if (listName === \"All\") index = this.state.lists.length - 1;\n    else {\n      for (let i = 0; i < this.state.lists.length; i++) {\n        if (this.state.lists[i].name === listName) {\n          index = i;\n          break;\n        }\n      }\n    }\n    this.setState({\n      currentlySelectedListName: listName,\n      currentlySelectedListIndex: index,\n      currentlySelectedItemID: \"\",\n      addListOverlayDisplaying: false,\n    });\n  }\n\n  toggleLoginRegister() {\n    if (this.state.loginOrRegister === \"login\")\n      this.setState({\n        docTitle: \"Sign Up | Doozy\",\n        loginOrRegister: \"register\",\n      });\n    else if (this.state.loginOrRegister === \"register\")\n      this.setState({\n        docTitle: \"Log In | Doozy\",\n        loginOrRegister: \"login\",\n      });\n  }\n\n  getCurrentlySelectedItem() {\n    if (this.state.currentlySelectedItemID === \"\")\n      return {\n        title: \"\",\n        description: \"\",\n        dueDate: \"\",\n        priority: \"\",\n        completed: false,\n        itemID: \"\",\n      };\n\n    var items = this.state.lists.slice(this.state.currentlySelectedListIndex)[0]\n      .items;\n\n    for (let i = 0; i < items.length; i++)\n      if (items[i].itemID === this.state.currentlySelectedItemID)\n        return items[i];\n\n    return {\n      title: \"\",\n      description: \"\",\n      dueDate: \"\",\n      priority: \"\",\n      completed: false,\n      itemID: \"\",\n    };\n  }\n\n  // for now assume we are getting the user's username from the props\n  // that are being passed in by a Login component (to be created)\n  getLists() {\n    const url = domain + \"/getLists\";\n    const body = JSON.stringify({\n      username: this.state.username /*this.props.username*/,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        var lists = res;\n\n        lists = this.appendSmartLists(lists);\n\n        const index =\n          this.state.registered === \"successful\" ? 0 : lists.length - 1;\n        const name = lists[index].name;\n        this.setState({\n          lists: lists,\n          currentlySelectedListIndex: index,\n          currentlySelectedListName: name,\n        });\n      });\n  }\n\n  appendSmartLists(lists) {\n    var next7Days = this.getNext7Days(lists);\n    var today = this.getToday(lists);\n    var all = this.getAll(lists);\n\n    lists.push(today);\n    lists.push(next7Days);\n    lists.push(all);\n\n    return lists;\n  }\n\n  getNext7Days(lists) {\n    var next7Days = {\n      name: \"Next 7 Days\",\n      color: \"\",\n      items: [],\n    };\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n      for (let j = 0; j < items.length; j++) {\n        if (checkIfNext7Days(items[j].dueDate)) {\n          items[j].originalList = lists[i].name;\n          items[j].color = lists[i].color;\n          next7Days.items.push(items[j]);\n        }\n      }\n    }\n    next7Days.items.sort(sortListItems);\n\n    return next7Days;\n  }\n\n  getAll(lists) {\n    var all = {\n      name: \"All\",\n      color: \"\",\n      items: [],\n    };\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n\n      for (let j = 0; j < items.length; j++) {\n        items[j].originalList = lists[i].name;\n        items[j].color = lists[i].color;\n      }\n\n      all.items = all.items.concat(lists[i].items);\n    }\n\n    all.items.sort(sortListItems);\n\n    return all;\n  }\n\n  getToday(lists) {\n    var today = {\n      name: \"Today\",\n      color: \"\",\n      items: [],\n    };\n\n    var t = dateToStr(new Date());\n\n    for (let i = 0; i < lists.length; i++) {\n      const items = lists[i].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].dueDate === t) {\n          items[j].originalList = lists[i].name;\n          items[j].color = lists[i].color;\n          today.items.push(items[j]);\n        }\n      }\n    }\n    today.items.sort(sortListItems);\n\n    return today;\n  }\n\n  addListItem(listName, title, dueDate, description, priority, color) {\n    const lists = this.state.lists.slice();\n    var id = null;\n    var item = {\n      title: title,\n      description: description,\n      dueDate: dueDate,\n      priority: priority,\n      completed: false,\n      originalList: listName,\n      color: color,\n      itemID: new ObjectID().toString(),\n    };\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        items.push(item);\n        id = item.itemID;\n        items.sort(sortListItems);\n        break;\n      }\n    }\n\n    var today = dateToStr(new Date());\n    if (dueDate === today) {\n      lists[lists.length - 3].items.push(item);\n      lists[lists.length - 3].items.sort(sortListItems);\n    }\n    if (checkIfNext7Days(dueDate)) {\n      lists[lists.length - 2].items.push(item);\n      lists[lists.length - 2].items.sort(sortListItems);\n    }\n    lists[lists.length - 1].items.push(item);\n    lists[lists.length - 1].items.sort(sortListItems);\n\n    this.setState({ lists: lists, currentlySelectedItemID: id });\n\n    const url = domain + \"/addListItem\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n      title: title,\n      dueDate: dueDate,\n      description: description,\n      priority: priority,\n      itemID: id,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  undoDeleteItem(\n    itemID,\n    listName,\n    title,\n    dueDate,\n    description,\n    priority,\n    completed,\n    originalList,\n    color\n  ) {\n    const lists = this.state.lists.slice();\n    var id = null;\n    var item = {\n      title: title,\n      description: description,\n      dueDate: dueDate,\n      priority: priority,\n      completed: false,\n      originalList: listName,\n      itemID: new ObjectID().toString(),\n    };\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        items.push(item);\n        id = item.itemID;\n        items.sort(sortListItems);\n        break;\n      }\n    }\n\n    var today = dateToStr(new Date());\n    if (dueDate === today) {\n      lists[lists.length - 3].items.push(item);\n      lists[lists.length - 3].items.sort(sortListItems);\n    }\n    if (checkIfNext7Days(dueDate)) {\n      lists[lists.length - 2].items.push(item);\n      lists[lists.length - 2].items.sort(sortListItems);\n    }\n    lists[lists.length - 1].items.push(item);\n    lists[lists.length - 1].items.sort(sortListItems);\n\n    this.setState({ lists: lists, currentlySelectedItemID: id });\n\n    const url = domain + \"/addListItem\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n      title: title,\n      dueDate: dueDate,\n      description: description,\n      priority: priority,\n      itemID: id,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  deleteListItem(listName, itemID) {\n    var dueDate = \"\";\n    var item;\n    const lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        var items = lists[i].items;\n        var idx = -1;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            idx = j;\n            dueDate = items[j].dueDate;\n            item = items[j];\n            break;\n          }\n        }\n        items = items.splice(idx, 1);\n      }\n    }\n\n    let index = -1;\n    var today = dateToStr(new Date());\n    if (dueDate === today) {\n      items = lists[lists.length - 3].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].itemID === itemID) {\n          index = j;\n          break;\n        }\n      }\n      items = items.splice(index, 1);\n    }\n    if (checkIfNext7Days(dueDate)) {\n      items = lists[lists.length - 2].items;\n      for (let j = 0; j < items.length; j++) {\n        if (items[j].itemID === itemID) {\n          index = j;\n          break;\n        }\n      }\n      items = items.splice(index, 1);\n    }\n    items = lists[lists.length - 1].items;\n    for (let j = 0; j < items.length; j++) {\n      if (items[j].itemID === itemID) {\n        index = j;\n        break;\n      }\n    }\n    items = items.splice(index, 1);\n\n    this.setState({\n      lists: lists,\n      currentlySelectedItemID: \"\",\n      lastDeletedItem: item,\n      lastDeletedItemListName: listName,\n    });\n\n    const url = domain + \"/deleteListItem\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    }).then((res) => res.text());\n    this.handleDisplayNotification();\n  }\n\n  setItemTitle(listName, itemID, title) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].title = title;\n            item = items[j];\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].title = title;\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    const url = domain + \"/setItemTitle\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      title: title,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    }).then((res) => res.text());\n  }\n\n  setItemCompleted(listName, itemID, completed) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].completed = completed;\n            item = items[j];\n            items.sort(sortListItems);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].completed = completed;\n              items.sort(sortListItems);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemCompleted\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      completed: completed,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemDueDate(listName, itemID, dueDate) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].dueDate = dueDate;\n            item = items[j];\n            items.sort(sortListItems);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].dueDate = dueDate;\n              items.sort(sortListItems);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemDueDate\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      dueDate: dueDate,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemPriority(listName, itemID, priority) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].priority = priority;\n            item = items[j];\n            items.sort(sortListItems);\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].priority = priority;\n              items.sort(sortListItems);\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemPriority\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      priority: priority,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  setItemDescription(listName, itemID, description) {\n    var lists = this.state.lists.slice();\n    var item = undefined;\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === listName) {\n        const items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          if (items[j].itemID === itemID) {\n            items[j].description = description;\n            item = items[j];\n            break;\n          }\n        }\n        break;\n      }\n    }\n\n    if (item.originalList !== listName) {\n      for (let i = 0; i < lists.length; i++) {\n        if (lists[i].name === item.originalList) {\n          const items = lists[i].items;\n          for (let j = 0; j < items.length; j++) {\n            if (items[j].itemID === itemID) {\n              items[j].description = description;\n              break;\n            }\n          }\n          break;\n        }\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/setItemDescription\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName:\n        listName === \"All\" || listName === \"Next 7 Days\" || listName === \"Today\"\n          ? item.originalList\n          : listName,\n      itemID: itemID,\n      description: description,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  handleLogOut() {\n    // delete the cookie\n    cookies.remove(\"DoozyLogin\");\n\n    // const bgURL = getRandomBGURL();\n\n    // reset state back to start\n    this.setState({\n      docTitle: \"Log in | Doozy\",\n      loggedIn: \"not yet\",\n      registered: \"not yet\",\n      loginOrRegister: \"login\",\n      lists: [],\n      username: \"\",\n      currentlySelectedListIndex: 0,\n      currentlySelectedListName: \"\",\n      currentlySelectedItemID: \"\",\n      // bgURL: bgURL,\n      firstName: \"\",\n      lastName: \"\",\n      loaded: false,\n    });\n  }\n\n  createEmptyList(listName, color) {\n    var list = { name: listName, color: color, items: [] };\n    var lists = this.state.lists.slice();\n    lists.splice(lists.length - 3, 0, list);\n    this.setState({\n      lists: lists,\n      currentlySelectedListIndex: lists.length - 4,\n      currentlySelectedListName: listName,\n    });\n\n    const url = domain + \"/createEmptyList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n      color: color,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  focusAddListOverlayTitleInput() {\n    this.addListTitleRef.current.focus();\n  }\n\n  focusEditListOverlayTitleInput() {\n    this.editListTitleRef.current.focus();\n  }\n\n  deleteList(listName) {\n    var idx = -1;\n    var lists = this.state.lists.slice();\n    for (let i = 0; i < lists.length; i++)\n      if (lists[i].name === listName) {\n        idx = i;\n        break;\n      }\n    lists.splice(idx, 1);\n\n    lists = lists.slice(0, lists.length - 3);\n    lists = this.appendSmartLists(lists);\n\n    this.setState({\n      lists: lists,\n      currentlySelectedItemID: \"\",\n      currentlySelectedListIndex: idx - 1 >= 0 ? idx - 1 : 2,\n      currentlySelectedListName:\n        idx - 1 >= 0 ? lists[idx - 1].name : lists[2].name,\n    });\n\n    const url = domain + \"/deleteList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      listName: listName,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  editList(oldName, newName, color) {\n    var lists = this.state.lists.slice();\n\n    for (let i = 0; i < lists.length; i++) {\n      if (lists[i].name === oldName) {\n        lists[i].name = newName;\n        lists[i].color = color;\n        var items = lists[i].items;\n        for (let j = 0; j < items.length; j++) {\n          items[j].originalList = newName;\n          items[j].color = color;\n        }\n        break;\n      }\n    }\n\n    this.setState({ lists: lists });\n\n    const url = domain + \"/editList\";\n    const body = JSON.stringify({\n      username: this.state.username,\n      oldName: oldName,\n      newName: newName,\n      color: color,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    });\n  }\n\n  handleDisplayNotification() {\n    this.setState({ notificationDisplaying: true });\n    setTimeout(() => {\n      this.setState({ notificationDisplaying: false });\n    }, 4000);\n  }\n\n  handleShowAddListOverlay() {\n    this.setState({ addListOverlayDisplaying: true });\n    $(\".add-list-overlay-color-selected\").removeClass(\n      \".add-list-overlay-color-selected\"\n    );\n    this.addListTitleRef.current.value = \"\";\n    setTimeout(() => {\n      this.addListTitleRef.current.focus();\n    }, 500);\n  }\n\n  handleShowEditListOverlay(listName, color) {\n    this.setState({\n      editListOverlayDisplaying: true,\n      editListColor: color,\n      editListName: listName,\n    });\n\n    this.editListTitleRef.current.value = listName;\n\n    setTimeout(() => {\n      this.editListTitleRef.current.focus();\n    }, 500);\n  }\n\n  handleHideAddListOverlay() {\n    this.setState({ addListOverlayDisplaying: false });\n  }\n\n  handleHideEditListOverlay() {\n    this.setState({\n      editListOverlayDisplaying: false,\n      editListColor: \"\",\n      editListName: \"\",\n    });\n  }\n\n  render() {\n    document.title = this.state.docTitle;\n\n    const listArr = this.state.lists.slice(\n      this.state.currentlySelectedListIndex,\n      this.state.currentlySelectedListIndex + 1\n    );\n\n    var lastDeletedItemTitle = \"\";\n    if (this.state.lastDeletedItem !== undefined)\n      lastDeletedItemTitle = this.state.lastDeletedItem.title;\n\n    const selectedItem = this.getCurrentlySelectedItem();\n    const appClasses =\n      \"row align-items-center\" +\n      (this.state.loggedIn === \"successful\" ? \"\" : \" d-none\");\n    const loginRegClasses =\n      \"container-fluid align-items-center\" +\n      (this.state.loggedIn === \"successful\" ? \" d-none\" : \" d-flex \");\n\n    return (\n      <>\n        <div\n          id=\"login-register\"\n          style={{ backgroundImage: this.state.bgURL }}\n          className={loginRegClasses}\n        >\n          <div\n            className={\n              \"login-section\" +\n              (this.state.loginOrRegister === \"login\" ? \"\" : \" d-none\")\n            }\n          >\n            <Login\n              loginInfo={this.state.loggedIn}\n              verifyLogin={(username, password, authType) =>\n                this.verifyLogin(username, password, authType)\n              }\n              createAccount={(email, fName, lName, password, authType) =>\n                this.createAccount(email, fName, lName, password, authType)\n              }\n              switchToRegister={() => this.toggleLoginRegister()}\n            />\n          </div>\n          <div\n            className={\n              \"register-section\" +\n              (this.state.loginOrRegister === \"register\" ? \"\" : \" d-none\")\n            }\n          >\n            <Register\n              switchToLogin={() => this.toggleLoginRegister()}\n              verifyLogin={(username, password, authType) =>\n                this.verifyLogin(username, password, authType)\n              }\n              createAccount={(email, fName, lName, password, authType) =>\n                this.createAccount(email, fName, lName, password, authType)\n              }\n              registerInfo={this.state.registered}\n            />\n          </div>\n        </div>\n        <div\n          id=\"app\"\n          style={{ backgroundImage: this.state.bgURL }}\n          className={appClasses}\n          onKeyDown={(e) => {\n            if (e.keyCode === 27 && this.state.addListOverlayDisplaying)\n              this.setState({ addListOverlayDisplaying: false });\n          }}\n        >\n          <AddListOverlay\n            id=\"addListOverlay\"\n            displaying={this.state.addListOverlayDisplaying}\n            addListTitleRef={this.addListTitleRef}\n            lists={this.state.lists}\n            hideOverlay={() => this.handleHideAddListOverlay()}\n            createList={(listName, color) =>\n              this.createEmptyList(listName, color)\n            }\n            focusTitleInput={() => this.focusAddListOverlayTitleInput()}\n          />\n          <EditListOverlay\n            id=\"editListOverlay\"\n            displaying={this.state.editListOverlayDisplaying}\n            editListTitleRef={this.editListTitleRef}\n            lists={this.state.lists}\n            hideOverlay={() => this.handleHideEditListOverlay()}\n            focusTitleInput={() => this.focusEditListOverlayTitleInput()}\n            startingName={this.state.editListName}\n            startingColor={this.state.editListColor}\n            editList={(oldName, newName, color) =>\n              this.editList(oldName, newName, color)\n            }\n          />\n          <Notification\n            displaying={this.state.notificationDisplaying}\n            hideNotification={() =>\n              this.setState({ notificationDisplaying: false })\n            }\n            title={lastDeletedItemTitle}\n            undo={() => {\n              if (this.state.lastDeletedItem.itemID !== undefined) {\n                this.addListItem(\n                  this.state.lastDeletedItemListName,\n                  this.state.lastDeletedItem.title,\n                  this.state.lastDeletedItem.dueDate,\n                  this.state.lastDeletedItem.description,\n                  this.state.lastDeletedItem.priority,\n                  this.state.lastDeletedItem.color\n                );\n              }\n            }}\n            listName={this.state.lastDeletedItemListName}\n            originalList={this.state.lastDeletedItem.originalList}\n          />\n          <div id=\"sidebar\" className=\"p-0\">\n            <Sidebar\n              lists={this.state.lists}\n              firstName={this.state.firstName}\n              lastName={this.state.lastName}\n              currentlySelectedListName={this.state.currentlySelectedListName}\n              setSelectedList={(listName) => this.setSelectedList(listName)}\n              showAddListOverlay={() => this.handleShowAddListOverlay()}\n              deleteList={(listName) => this.deleteList(listName)}\n              showEditListOverlay={(listName, color) =>\n                this.handleShowEditListOverlay(listName, color)\n              }\n            />\n          </div>\n          {listArr.map((list, i) => {\n            return (\n              <React.Fragment key={list.name}>\n                <div id=\"todolist\" className=\"col-5\">\n                  <Todolist\n                    color={list.color}\n                    name={list.name}\n                    items={list.items}\n                    addListItem={(\n                      listName,\n                      title,\n                      dueDate,\n                      description,\n                      priority,\n                      color\n                    ) =>\n                      this.addListItem(\n                        listName,\n                        title,\n                        dueDate,\n                        description,\n                        priority,\n                        color\n                      )\n                    }\n                    deleteListItem={(listName, itemID) =>\n                      this.deleteListItem(listName, itemID)\n                    }\n                    setItemTitle={(listName, itemID, title) =>\n                      this.setItemTitle(listName, itemID, title)\n                    }\n                    setItemCompleted={(listName, itemID, completed) =>\n                      this.setItemCompleted(listName, itemID, completed)\n                    }\n                    setSelectedItem={(itemID) => this.setSelectedItem(itemID)}\n                    selectedItemID={this.state.currentlySelectedItemID}\n                    hideAddListOverlay={() => this.handleHideAddListOverlay()}\n                  />\n                </div>\n                <div id=\"details\" className=\"col-4\">\n                  <Details\n                    listName={list.name}\n                    selectedItemID={selectedItem.itemID}\n                    selectedItemColor={selectedItem.color}\n                    selectedItemList={selectedItem.originalList}\n                    selectedItemTitle={selectedItem.title}\n                    selectedItemDueDate={selectedItem.dueDate}\n                    selectedItemDescription={selectedItem.description}\n                    selectedItemPriority={selectedItem.priority}\n                    selectedItemCompleted={selectedItem.completed}\n                    setItemTitle={(listName, itemID, title) =>\n                      this.setItemTitle(listName, itemID, title)\n                    }\n                    setItemCompleted={(listName, itemID, completed) =>\n                      this.setItemCompleted(listName, itemID, completed)\n                    }\n                    setItemDueDate={(listName, itemID, dueDate) =>\n                      this.setItemDueDate(listName, itemID, dueDate)\n                    }\n                    setItemPriority={(listName, itemID, priority) =>\n                      this.setItemPriority(listName, itemID, priority)\n                    }\n                    setItemDescription={(listName, itemID, description) =>\n                      this.setItemDescription(listName, itemID, description)\n                    }\n                    handleDelete={(listName, itemID) =>\n                      this.deleteListItem(listName, itemID)\n                    }\n                    hideAddListOverlay={() => this.handleHideAddListOverlay()}\n                  />\n                </div>\n                <div className=\"col-1\"></div>\n                <div id=\"toolbar\" className=\"row col-1 justify-content-center\">\n                  <Toolbar\n                    handleLogOut={() => this.handleLogOut()}\n                    deleteAllCompletedItems={() =>\n                      this.deleteAllCompletedItems()\n                    }\n                  />\n                </div>\n              </React.Fragment>\n            );\n          })}\n        </div>\n      </>\n    );\n  }\n}\n\nfunction sortListItems(a, b) {\n  if (a.completed && !b.completed) return 1;\n  else if (!a.completed && b.completed) return -1;\n  else if (a.dueDate === \"\" && b.dueDate !== \"\") return 1;\n  else if (a.dueDate !== \"\" && b.dueDate === \"\") return -1;\n  else {\n    // both are either completed or incomplete or have a due date set or no due date set\n    if (a.dueDate === b.dueDate) {\n      // sort items due on the same day by priority\n      const priorities = [\"low\", \"medium\", \"high\"];\n      const priorityA = priorities.indexOf(a.priority);\n      const priorityB = priorities.indexOf(b.priority);\n\n      if (priorityA !== priorityB) return priorityB - priorityA;\n      else {\n        // sort by itemID\n        const itemIDA = a.itemID;\n        const itemIDB = b.itemID;\n        return itemIDA - itemIDB;\n      }\n    } else {\n      // sort items based on date\n      const dateA = new Date(a.dueDate + \" 00:00\");\n      const dateB = new Date(b.dueDate + \" 00:00\");\n      return dateA - dateB;\n    }\n  }\n}\n\nfunction ValidateEmail(mail) {\n  if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n    return true;\n  }\n  return false;\n}\n\nfunction getRandomBGURL() {\n  // visit https://freeimage.host/ to host more background images\n  const backgroundURLs = [\n    \"https://iili.io/J4xbBS.jpg\",\n    \"https://iili.io/J4xtQ2.jpg\",\n    \"https://iili.io/J4z92e.jpg\",\n    \"https://iili.io/J4zdpj.jpg\",\n    \"https://iili.io/J4zJkb.jpg\",\n    \"https://iili.io/J4zWZl.jpg\",\n    \"https://iili.io/J4Weln.jpg\",\n    \"https://iili.io/J4WhoN.jpg\",\n    \"https://iili.io/J4WOKX.jpg\",\n    \"https://iili.io/J4WUN4.jpg\",\n    \"https://iili.io/J4WgDl.jpg\",\n    \"https://iili.io/J4WSRf.jpg\",\n    \"https://iili.io/J4WmDQ.jpg\",\n    \"https://iili.io/J4X9WB.jpg\",\n    \"https://iili.io/J4XHiP.jpg\",\n    \"https://iili.io/J4WyxV.jpg\",\n    \"https://iili.io/JPNuGR.jpg\",\n    \"https://iili.io/JPN53N.jpg\",\n    \"https://iili.io/JPNTCv.jpg\",\n    \"https://iili.io/JiKSp4.jpg\",\n  ];\n  var currBackground = Math.floor(\n    Math.random() * Math.floor(backgroundURLs.length)\n  );\n\n  return 'url(\"' + backgroundURLs[currBackground] + '\")';\n}\n\nfunction dateToStr(date) {\n  var day = date.getDate();\n  if (day < 10) day = \"0\" + day.toString();\n\n  var month = date.getMonth() + 1;\n  if (month < 10) month = \"0\" + month.toString();\n\n  var year = date.getFullYear().toString();\n\n  var formatted = year + \"-\" + month + \"-\" + day;\n\n  return formatted;\n}\n\nfunction checkIfNext7Days(dateStr) {\n  var curr = new Date();\n  for (let i = 0; i < 7; i++) {\n    var d = dateToStr(curr);\n    if (dateStr === d) return true;\n    curr.setDate(curr.getDate() + 1);\n  }\n\n  d = dateToStr(curr);\n  if (dateStr === d) return true;\n\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}