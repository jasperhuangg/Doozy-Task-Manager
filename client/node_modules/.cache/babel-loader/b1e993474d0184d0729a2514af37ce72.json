{"ast":null,"code":"import _classCallCheck from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./Login-Register.css\";import{GoogleLogin}from\"react-google-login\";import\"./GoogleButton.css\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleGoogleOAuth=function(response){var username=response.profileObj.email;var firstName=response.profileObj.givenName;var lastName=response.profileObj.lastName;var password=_this.hashGoogleInfo(response);var domain=\"http://localhost:9000\";var url=domain+\"/accountExists\";var body=JSON.stringify({username:username});fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:body}).then(function(res){return res.json();}).then(function(res){if(res)_this.props.verifyLogin(username,password,\"Google\");else _this.props.createAccount(username,firstName,lastName,password,\"Google\");});};_this.state={email:\"\",password:\"\",usernameEntered:false,nextClicked:false};_this.passwordInput=React.createRef();_this.inputRef=React.createRef();return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.usernameEntered===false&&this.state.email!==\"\")this.setState({usernameEntered:true});}},{key:\"handleEmailInput\",value:function handleEmailInput(e){var entered=e.target.value===\"\";this.setState({email:e.target.value,usernameEntered:!entered});}},{key:\"handleEmailEnter\",value:function handleEmailEnter(e){if(this.state.usernameEntered&&(e.keyCode===13||e.keyCode===9)){e.preventDefault();this.setState({nextClicked:true});this.passwordInput.current.focus();}}},{key:\"handlePasswordEnter\",value:function handlePasswordEnter(e){if(this.state.nextClicked&&e.keyCode===13&&e.target.value!==\"\"){e.preventDefault();this.props.verifyLogin(this.state.email,this.state.password,\"Conventional\");// this.setState({ usernameEntered: false, nextClicked: false });\n}}},{key:\"handlePasswordInput\",value:function handlePasswordInput(e){this.setState({password:e.target.value});}},{key:\"handleLoginBtnClick\",value:function handleLoginBtnClick(e){e.preventDefault();if(!this.state.nextClicked)this.setState({nextClicked:true});else{this.props.verifyLogin(this.state.email,this.state.password,\"Conventional\");}}},{key:\"reverseStr\",value:function reverseStr(str){if(str===\"\"||str===undefined||str===null)return\"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";return str.split(\"\").reverse().join(\"\");}},{key:\"hashGoogleInfo\",value:function hashGoogleInfo(responseObj){var profileObj=responseObj.profileObj;var firstName=this.reverseStr(profileObj.givenName);var lastName=this.reverseStr(profileObj.familyName);var googleId=this.reverseStr(profileObj.googleId);var email=this.reverseStr(profileObj.email);var rand1=\"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";var rand2=\"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";var rand3=\"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";var rand4=\"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";var rand5=\"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";return rand1+firstName+rand2+lastName+rand3+googleId+rand4+email+rand5;}},{key:\"render\",value:function render(){var _this2=this;var sentBack=this.props.loginInfo!==\"not yet\";if(this.state.nextClicked&&!sentBack){this.passwordInput.current.focus();}return/*#__PURE__*/React.createElement(\"div\",{className:\"Login pb-5 px-4 pt-4\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"text-left\"},/*#__PURE__*/React.createElement(\"img\",{style:{width:\"121.6px\",height:\"35px\"},src:\"https://iili.io/JQP1Pp.png\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-left\",style:{fontWeight:\"600\"}},\"Log in to your account\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"google-btn\",style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"google-icon-wrapper\"},/*#__PURE__*/React.createElement(\"img\",{className:\"google-icon\",alt:\"\",src:\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"google-button-text\"},/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/React.createElement(\"a\",{onClick:renderProps.onClick,disabled:renderProps.disabled,className:\"btn-text no-bg-no-borders text-white text-center\"},\"Log in with Google\");},buttonText:\"Log in with Google\",onSuccess:this.handleGoogleOAuth,onFailure:function onFailure(response){alert(\"Google OAuth Failed.\\n\"+JSON.stringify(response));},cookiePolicy:\"single_host_origin\"})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"or-separator my-2 w-100 text-center font-grey\"},/*#__PURE__*/React.createElement(\"span\",{className:\"px-1\"},\"or\")),/*#__PURE__*/React.createElement(\"div\",{className:\"font-small-login-reg text-danger\"+(this.props.loginInfo===\"not yet\"?\" d-none\":\"\")},this.props.loginInfo===\"auth type\"?\"Please log in using the method you created your account.\":\"Please provide a valid username and password.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{className:\"font-grey font-small-login-reg\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-email-input\",style:{fontWeight:\"500\"}},\"Email Address\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-sm\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control form-control-sm\"+(this.state.usernameEntered?\" input-validated\":\"\")+(sentBack&&this.props.loginInfo===\"username does not exist\"?\" border-danger\":\"\"),id:\"login-email-input\",\"aria-describedby\":\"emailHelp\",onChange:function onChange(e){return _this2.handleEmailInput(e);},onKeyDown:function onKeyDown(e){return _this2.handleEmailEnter(e);},disabled:this.state.nextClicked&&this.props.loginInfo!==\"username does not exist\",ref:this.inputRef}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"+(this.state.nextClicked&&this.props.loginInfo!==\"username does not exist\"?\"\":\" d-none\")},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text email-check\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"+(this.state.nextClicked?\"\":\" d-none\")},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-password-input\",style:{fontWeight:\"500\"}},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control form-control-sm\"+(sentBack?\" border-danger\":\"\"),id:\"login-password-input\",onChange:function onChange(e){return _this2.handlePasswordInput(e);},ref:this.passwordInput})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary px-4 font-small-login-reg\",type:this.state.nextClicked?\"submit\":\"button\",disabled:!this.state.usernameEntered||this.inputRef.current.value===\"\",onClick:function onClick(e){return _this2.handleLoginBtnClick(e);}},this.state.nextClicked?\"Log In\":\"Next\"),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-3 font-small-login-reg\"},\"Don't have an account?\",\" \",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){_this2.props.switchToRegister();},className:\"text-primary toggle-prompt-text\",style:{cursor:\"pointer\"}},\"Sign Up\"))));}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/Users/jasper.huang/Desktop/Personal_Projects/doozy_task_manager/client/src/todolist/Login.js"],"names":["React","Component","GoogleLogin","Login","props","handleGoogleOAuth","response","username","profileObj","email","firstName","givenName","lastName","password","hashGoogleInfo","domain","url","body","JSON","stringify","fetch","method","headers","then","res","json","verifyLogin","createAccount","state","usernameEntered","nextClicked","passwordInput","createRef","inputRef","setState","e","entered","target","value","keyCode","preventDefault","current","focus","str","undefined","split","reverse","join","responseObj","reverseStr","familyName","googleId","rand1","rand2","rand3","rand4","rand5","sentBack","loginInfo","width","height","fontWeight","cursor","renderProps","onClick","disabled","alert","handleEmailInput","handleEmailEnter","handlePasswordInput","handleLoginBtnClick","switchToRegister"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Login-Register.css\";\nimport { GoogleLogin } from \"react-google-login\";\nimport \"./GoogleButton.css\";\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      usernameEntered: false,\n      nextClicked: false,\n    };\n    this.passwordInput = React.createRef();\n    this.inputRef = React.createRef();\n  }\n\n  componentDidUpdate() {\n    if (this.state.usernameEntered === false && this.state.email !== \"\")\n      this.setState({ usernameEntered: true });\n  }\n\n  handleEmailInput(e) {\n    var entered = e.target.value === \"\";\n\n    this.setState({\n      email: e.target.value,\n      usernameEntered: !entered,\n    });\n  }\n\n  handleEmailEnter(e) {\n    if (this.state.usernameEntered && (e.keyCode === 13 || e.keyCode === 9)) {\n      e.preventDefault();\n      this.setState({ nextClicked: true });\n      this.passwordInput.current.focus();\n    }\n  }\n\n  handlePasswordEnter(e) {\n    if (this.state.nextClicked && e.keyCode === 13 && e.target.value !== \"\") {\n      e.preventDefault();\n      this.props.verifyLogin(\n        this.state.email,\n        this.state.password,\n        \"Conventional\"\n      );\n      // this.setState({ usernameEntered: false, nextClicked: false });\n    }\n  }\n\n  handlePasswordInput(e) {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleLoginBtnClick(e) {\n    e.preventDefault();\n    if (!this.state.nextClicked) this.setState({ nextClicked: true });\n    else {\n      this.props.verifyLogin(\n        this.state.email,\n        this.state.password,\n        \"Conventional\"\n      );\n    }\n  }\n\n  reverseStr(str) {\n    if (str === \"\" || str === undefined || str === null)\n      return \"3279ruwejsdnma;lno3 -5pyr eo;dilzk mnd1[  0vcp89'a jklt4-]1-83rdusah13\";\n    return str.split(\"\").reverse().join(\"\");\n  }\n\n  hashGoogleInfo(responseObj) {\n    const profileObj = responseObj.profileObj;\n\n    const firstName = this.reverseStr(profileObj.givenName);\n    const lastName = this.reverseStr(profileObj.familyName);\n    const googleId = this.reverseStr(profileObj.googleId);\n    const email = this.reverseStr(profileObj.email);\n\n    const rand1 =\n      \"d9afspiuflj2kw0r392[pwiua esfljdkf[werpuasidflz;jk3dm2'- rw9eafpuisdjlzkc;3 j 80[weoadhls;jk 23np8we9asoudlh;zkxrj  f[2 e\";\n    const rand2 =\n      \"483ruoeifdsjlvsgrhw4q5983;rlfkjDSGN,FDGHWB0YQ934TP8weio;gljgkhwtr07qy480rwuepjGKHRJIUWY5-03[94APW'OE;JTSKGNJWNLP8Q4029W\";\n    const rand3 =\n      \"0283ROWIELFKDSK[p9 peua4oliwfjkdsfhdiouaotil;fewtq0uogprijsldhuoijao'ortk4ripfdhig;fk';wple-9stdpygihpfj'kQ\";\n    const rand4 =\n      \"948otwrjafj408w[8aer9pifsdjqp49w;'etoisfaj49w0ep[orsiaj[w9eosdilhva5a049P;TJRpiJ0IO_*)OIPLYT(H08pytoi4ljwef\";\n    const rand5 =\n      \"30rweisdjfak]Oi;gjanljrL;J;u;OFTYITF8d35q54tr1q2t4awregfghoikhliop'o=]iioufdrye5a243twretriot89y8upo'p[]pjuyb9tvrdw4teqrwteyrty0jpo\";\n\n    return (\n      rand1 +\n      firstName +\n      rand2 +\n      lastName +\n      rand3 +\n      googleId +\n      rand4 +\n      email +\n      rand5\n    );\n  }\n\n  handleGoogleOAuth = (response) => {\n    const username = response.profileObj.email;\n    const firstName = response.profileObj.givenName;\n    const lastName = response.profileObj.lastName;\n    const password = this.hashGoogleInfo(response);\n    const domain = \"http://localhost:9000\";\n    const url = domain + \"/accountExists\";\n    const body = JSON.stringify({\n      username: username,\n    });\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: body,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res) this.props.verifyLogin(username, password, \"Google\");\n        else\n          this.props.createAccount(\n            username,\n            firstName,\n            lastName,\n            password,\n            \"Google\"\n          );\n      });\n  };\n\n  render() {\n    const sentBack = this.props.loginInfo !== \"not yet\";\n\n    if (this.state.nextClicked && !sentBack) {\n      this.passwordInput.current.focus();\n    }\n\n    return (\n      <div className=\"Login pb-5 px-4 pt-4\">\n        <br />\n        <div className=\"text-left\">\n          <img\n            style={{ width: \"121.6px\", height: \"35px\" }}\n            src=\"https://iili.io/JQP1Pp.png\"\n          />\n        </div>\n        <br />\n        <br />\n        <h5 className=\"text-left\" style={{ fontWeight: \"600\" }}>\n          Log in to your account\n        </h5>\n        <br />\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"google-btn\" style={{ cursor: \"pointer\" }}>\n            <div className=\"google-icon-wrapper\">\n              <img\n                className=\"google-icon\"\n                alt=\"\"\n                src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"\n              />\n            </div>\n            <div className=\"google-button-text\">\n              <GoogleLogin\n                clientId=\"777242510220-80aoinvqo7q39g1iqtafjet4stv1nnu7.apps.googleusercontent.com\"\n                render={(renderProps) => (\n                  <a\n                    onClick={renderProps.onClick}\n                    disabled={renderProps.disabled}\n                    className=\"btn-text no-bg-no-borders text-white text-center\"\n                  >\n                    Log in with Google\n                  </a>\n                )}\n                buttonText=\"Log in with Google\"\n                onSuccess={this.handleGoogleOAuth}\n                onFailure={(response) => {\n                  alert(\"Google OAuth Failed.\\n\" + JSON.stringify(response));\n                }}\n                cookiePolicy={\"single_host_origin\"}\n              />\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"or-separator my-2 w-100 text-center font-grey\">\n          <span className=\"px-1\">or</span>\n        </div>\n        <div\n          className={\n            \"font-small-login-reg text-danger\" +\n            (this.props.loginInfo === \"not yet\" ? \" d-none\" : \"\")\n          }\n        >\n          {this.props.loginInfo === \"auth type\"\n            ? \"Please log in using the method you created your account.\"\n            : \"Please provide a valid username and password.\"}\n        </div>\n        <br />\n        <form className=\"font-grey font-small-login-reg\">\n          <label htmlFor=\"login-email-input\" style={{ fontWeight: \"500\" }}>\n            Email Address{\" \"}\n          </label>\n          <div className=\"input-group input-group-sm\">\n            <input\n              type=\"email\"\n              className={\n                \"form-control form-control-sm\" +\n                (this.state.usernameEntered ? \" input-validated\" : \"\") +\n                (sentBack && this.props.loginInfo === \"username does not exist\"\n                  ? \" border-danger\"\n                  : \"\")\n              }\n              id=\"login-email-input\"\n              aria-describedby=\"emailHelp\"\n              onChange={(e) => this.handleEmailInput(e)}\n              onKeyDown={(e) => this.handleEmailEnter(e)}\n              disabled={\n                this.state.nextClicked &&\n                this.props.loginInfo !== \"username does not exist\"\n              }\n              ref={this.inputRef}\n            />\n            <div\n              className={\n                \"input-group-append\" +\n                (this.state.nextClicked &&\n                this.props.loginInfo !== \"username does not exist\"\n                  ? \"\"\n                  : \" d-none\")\n              }\n            >\n              <span className=\"input-group-text email-check\">\n                <i className=\"fas fa-check\"></i>\n              </span>\n            </div>\n\n            {/* <small id=\"emailHelp\" className=\"form-text text-muted\">\n              This is your email address you used when you registered.\n            </small> */}\n          </div>\n\n          <div\n            className={\"form-group\" + (this.state.nextClicked ? \"\" : \" d-none\")}\n          >\n            <br></br>\n            <label htmlFor=\"login-password-input\" style={{ fontWeight: \"500\" }}>\n              Password\n            </label>\n            <input\n              type=\"password\"\n              className={\n                \"form-control form-control-sm\" +\n                (sentBack ? \" border-danger\" : \"\")\n              }\n              id=\"login-password-input\"\n              onChange={(e) => this.handlePasswordInput(e)}\n              ref={this.passwordInput}\n            />\n          </div>\n          <br />\n          <br />\n\n          <button\n            className=\"btn btn-primary px-4 font-small-login-reg\"\n            type={this.state.nextClicked ? \"submit\" : \"button\"}\n            disabled={\n              !this.state.usernameEntered || this.inputRef.current.value === \"\"\n            }\n            onClick={(e) => this.handleLoginBtnClick(e)}\n          >\n            {this.state.nextClicked ? \"Log In\" : \"Next\"}\n          </button>\n\n          <span className=\"ml-3 font-small-login-reg\">\n            Don't have an account?{\" \"}\n            <span\n              onClick={() => {\n                this.props.switchToRegister();\n              }}\n              className=\"text-primary toggle-prompt-text\"\n              style={{ cursor: \"pointer\" }}\n            >\n              Sign Up\n            </span>\n          </span>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}